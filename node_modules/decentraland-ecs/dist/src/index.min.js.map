{"version":3,"file":"index.min.js","sources":["../src/ecs/Attachable.ts","../src/ecs/helpers.ts","../src/ecs/EventManager.ts","../src/ecs/UIValue.ts","../src/ecs/IEntity.ts","../src/ecs/Component.ts","../src/ecs/ComponentGroup.ts","../src/ecs/Entity.ts","../src/ecs/Engine.ts","../src/ecs/Task.ts","../src/ecs/UserActions.ts","../src/ecs/Observable.ts","../src/decentraland/Events.ts","../src/decentraland/Implementation.ts","../node_modules/@dcl/ecs-math/dist/types.js","../node_modules/@dcl/ecs-math/dist/utils.js","../node_modules/@dcl/ecs-math/dist/Scalar.js","../node_modules/@dcl/ecs-math/dist/Vector4.js","../node_modules/@dcl/ecs-math/dist/Matrix.js","../node_modules/@dcl/ecs-math/dist/Quaternion.js","../node_modules/@dcl/ecs-math/dist/Vector3.js","../node_modules/@dcl/ecs-math/dist/preallocatedVariables.js","../node_modules/@dcl/ecs-math/dist/Angle.js","../node_modules/@dcl/ecs-math/dist/Vector2.js","../node_modules/@dcl/ecs-math/dist/Arc2.js","../node_modules/@dcl/ecs-math/dist/Axis.js","../node_modules/@dcl/ecs-math/dist/BezierCurve.js","../node_modules/@dcl/ecs-math/dist/Color4.js","../node_modules/@dcl/ecs-math/dist/Color3.js","../node_modules/@dcl/ecs-math/dist/Curve3d.js","../node_modules/@dcl/ecs-math/dist/Plane.js","../node_modules/@dcl/ecs-math/dist/Furstum.js","../node_modules/@dcl/ecs-math/dist/Path2d.js","../node_modules/@dcl/ecs-math/dist/Path3d.js","../node_modules/@dcl/ecs-math/dist/Size.js","../node_modules/@dcl/ecs-math/dist/index.js","../src/decentraland/AnimationState.ts","../src/decentraland/Types.ts","../src/decentraland/Input.ts","../src/decentraland/Components.ts","../src/decentraland/PhysicsCast.ts","../src/decentraland/Camera.ts","../src/decentraland/Gizmos.ts","../src/decentraland/Systems.ts","../src/decentraland/Audio.ts","../src/decentraland/UIShapes.ts","../src/decentraland/UIEvents.ts","../src/decentraland/AvatarShape.ts","../src/decentraland/MessageBus.ts","../src/index.ts"],"sourcesContent":["import { IEntity, IEngine } from './IEntity'\n\n/**\n * Entities can be attached to each other by using the `setParent` method. However, there are cases where we might want to attach entities\n * to other objects that are not entities created by the same scene (for example, the player's avatar). For those cases, we have this class.\n * @public\n */\nexport abstract class Attachable {\n  /** Used to attach entities to the avatar. Entities will follow the avatar when it moves */\n  static readonly AVATAR: Attachable = {\n    getEntityRepresentation: (engine: IEngine) => engine.avatarEntity\n  } as const\n  /** Used to attach entities to the camera. When in first person mode, the attached entities will also rotate with the camera */\n  static readonly FIRST_PERSON_CAMERA: Attachable = {\n    getEntityRepresentation: (engine: IEngine) => engine.firstPersonCameraEntity\n  } as const\n\n  // @internal\n  /** Entities must be attached to entities, so in this case, each attachable object must return the entity used to present it */\n  abstract getEntityRepresentation(engine: IEngine): IEntity\n}\n","let lastGeneratedId = 0\n\ndeclare let console: any\n\n/**\n * Log function. Only works in debug mode, otherwise it does nothing.\n * @param args - any loggable parameter\n * @public\n */\nexport function log(...args: any[]) {\n  if (typeof dcl !== 'undefined') {\n    dcl.log(...args)\n  } else {\n    console.log('DEBUG:', ...args)\n  }\n}\n\n/**\n * Error function. Prints a console error. Only works in debug mode, otherwise it does nothing.\n * @param error - string or Error object.\n * @param data - any debug information.\n * @public\n */\nexport function error(error: string | Error, data?: any) {\n  if (typeof dcl !== 'undefined') {\n    dcl.error(error as any, data)\n  } else {\n    console.error('ERROR:', error, data)\n  }\n}\n\n/**\n * Generates a new prefixed id\n * @public\n */\nexport function newId(type: string) {\n  lastGeneratedId++\n  if (type.length === 0)\n    throw new Error('newId(type: string): type cannot be empty')\n  return type + lastGeneratedId.toString(36)\n}\n\n/**\n * @internal\n */\nexport function uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0\n    const v = c === 'x' ? r : (r & 0x3) | 0x8\n    return v.toString(16)\n  })\n}\n\n/**\n * Returns an array of the given size filled with element built from the given constructor and the paramters\n * @param size - the number of element to construct and put in the array\n * @param itemBuilder - a callback responsible for creating new instance of item. Called once per array entry.\n * @returns a new array filled with new objects\n * @internal\n */\nexport function buildArray<T>(size: number, itemBuilder: () => T): Array<T> {\n  const a: T[] = []\n  for (let i = 0; i < size; ++i) {\n    a.push(itemBuilder())\n  }\n  return a\n}\n\n/**\n * @public\n */\nexport function openExternalURL(url: string) {\n  if (typeof dcl !== 'undefined') {\n    dcl.openExternalUrl(url)\n  } else {\n    error('ERROR: openExternalURL dcl is undefined')\n  }\n}\n\n/**\n * Popup NFT info dialog\n * @param scr - 'ethereum://contractAddress/tokenID'\n * @param comment - optional. add a comment.\n * @public\n */\nexport function openNFTDialog(scr: string, comment: string | null = null) {\n  if (typeof dcl !== 'undefined') {\n    const regex = /ethereum:\\/\\/(.+)\\/(.+)/\n    const matches = scr.match(regex)\n\n    if (!matches || matches.length < 3) {\n      return\n    }\n\n    dcl.openNFTDialog(matches[1], matches[2], comment)\n  } else {\n    error('ERROR: openNFTDialog dcl is undefined')\n  }\n}\n","import { error, newId } from './helpers'\n\nconst eventNameSymbol = '__event_name__'\n\n/**\n * @public\n */\nexport interface IEventConstructor<T> {\n  // @internal\n  [eventNameSymbol]?: string\n  new (...args: any[]): T\n}\n\nconst takenEventNames: string[] = []\n\nfunction getEventNameFromConstructor<T>(ctor: IEventConstructor<T>): string {\n  if (!(eventNameSymbol in ctor) || typeof ctor[eventNameSymbol] !== 'string') {\n    throw new Error('The EventConstructor is not registered')\n  }\n  return ctor[eventNameSymbol] as any as string\n}\n\ntype EventListener<X> = {\n  listener: X\n  fn: (this: X, event: any) => void\n}\n\n/**\n * @public\n */\nexport class EventManager {\n  private listeners: Record<string, Array<EventListener<any>>> = {}\n\n  addListener<T, X>(\n    eventClass: IEventConstructor<T>,\n    listener: X,\n    listenerFunction: (this: X, event: T) => void\n  ) {\n    if (!eventClass || typeof (eventClass as any) !== 'function') {\n      throw new Error('Invalid EventConstructor')\n    }\n    const eventName = getEventNameFromConstructor(eventClass)\n\n    let listeners = this.listeners[eventName]\n\n    if (!listeners) {\n      listeners = this.listeners[eventName] = []\n    }\n\n    for (let i = 0; i < listeners.length; i++) {\n      const x = listeners[i]\n      if (x.listener === listener) {\n        throw new Error('The provided listener is already registered')\n      }\n    }\n\n    listeners.push({\n      listener,\n      fn: listenerFunction\n    })\n\n    return this\n  }\n\n  removeListener<X>(listener: X, eventClass: IEventConstructor<any>): boolean {\n    if (!eventClass || typeof (eventClass as any) !== 'function') {\n      throw new Error('Invalid EventConstructor')\n    }\n\n    const eventName = getEventNameFromConstructor(eventClass)\n\n    const listeners = this.listeners[eventName]\n\n    if (!listeners) {\n      return false\n    }\n\n    for (let i = 0; i < listeners.length; i++) {\n      const x = listeners[i]\n      if (x.listener === listener) {\n        listeners.splice(i, 1)\n        return true\n      }\n    }\n\n    return false\n  }\n\n  fireEvent<T extends object>(event: T) {\n    const eventName = getEventNameFromConstructor((event as any).constructor)\n\n    const listeners = this.listeners[eventName]\n\n    if (listeners) {\n      for (let i = 0; i < listeners.length; i++) {\n        try {\n          const l = listeners[i]\n          l.fn.call(l.listener, event)\n        } catch (e) {\n          // TODO: e may not be an instance of Error\n          error(e as any)\n        }\n      }\n    }\n\n    return this\n  }\n}\n\n/**\n * @public\n */\nexport function EventConstructor(): ClassDecorator {\n  const eventName = newId('EV')\n\n  if (takenEventNames.indexOf(eventName) !== -1) {\n    throw new Error(`The event name ${eventName} is already taken`)\n  }\n\n  takenEventNames.push(eventName)\n\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  return <TFunction extends Function>(target: TFunction): TFunction | void => {\n    ;(target as any)[eventNameSymbol] = eventName\n    return target\n  }\n}\n","/**\n * @public\n */\nexport enum UIValueType {\n  PERCENT = 0,\n  PIXELS = 1\n}\n\n/**\n * @public\n */\nexport class UIValue {\n  value: number\n  type: UIValueType\n\n  constructor(value: string | number) {\n    this.type = UIValueType.PIXELS\n\n    if (typeof value === 'string') {\n      const valueAsString: string = value\n      if (valueAsString.indexOf('px') > -1) {\n        this.type = UIValueType.PIXELS\n      } else if (valueAsString.indexOf('%') > -1) {\n        this.type = UIValueType.PERCENT\n      }\n\n      this.value = parseFloat(valueAsString)\n    } else {\n      this.value = value\n    }\n  }\n\n  toString(): string {\n    let result: string = this.value.toString()\n\n    if (this.type === UIValueType.PERCENT) {\n      result += '%'\n    } else {\n      result += 'px'\n    }\n\n    return result\n  }\n}\n","import { ComponentLike, ComponentConstructor } from './Component'\nimport { EventConstructor, EventManager } from './EventManager'\nimport { Attachable } from './Attachable'\n\n/**\n * @public\n */\nexport interface ISystem {\n  active?: boolean\n\n  activate?(engine: IEngine): void\n  deactivate?(): void\n\n  update?(dt: number): void\n\n  onAddEntity?(entity: IEntity): void\n  onRemoveEntity?(entity: IEntity): void\n}\n\n/**\n * @public\n */\nexport interface IEngine {\n  rootEntity: IEntity\n  readonly firstPersonCameraEntity: IEntity\n  readonly avatarEntity: IEntity\n  readonly entities: Readonly<Record<string, IEntity>>\n\n  addEntity(entity: IEntity): void\n  removeEntity(entity: IEntity): void\n  addSystem(system: ISystem, priority: number): void\n  removeSystem(system: ISystem): void\n}\n\n/**\n * @public\n */\nexport interface IEntity {\n  children: Record<string, IEntity>\n  eventManager: EventManager | null\n  alive: boolean\n  readonly uuid: string\n  readonly components: Record<string, any>\n\n  isAddedToEngine(): boolean\n  getParent(): IEntity | null\n  setParent(e: IEntity | Attachable | null): void\n\n  getComponent<T = any>(component: string): T\n  getComponent<T>(component: ComponentConstructor<T>): T\n  getComponent<T>(component: ComponentConstructor<T> | string): T\n\n  /**\n   * Gets a component, if it doesn't exist, it returns null.\n   * @param component - component class or name\n   */\n  getComponentOrNull<T = any>(component: string): T | null\n  getComponentOrNull<T>(component: ComponentConstructor<T>): T | null\n  getComponentOrNull<T>(component: ComponentConstructor<T> | string): T | null\n\n  getComponentOrCreate<T>(component: ComponentConstructor<T> & { new (): T }): T\n\n  /**\n   * Adds a component. If the component already exist, it throws an Error.\n   * @param component - component instance.\n   */\n  addComponent<T extends object>(component: T): void\n\n  addComponentOrReplace<T extends object>(component: T): void\n\n  removeComponent(component: string, triggerRemovedEvent?: boolean): void\n  removeComponent<T extends object>(\n    component: T,\n    triggerRemovedEvent?: boolean\n  ): void\n  removeComponent(\n    component: ComponentConstructor<any>,\n    triggerRemovedEvent?: boolean\n  ): void\n  removeComponent(\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    component: object | string | Function,\n    triggerRemovedEvent: any\n  ): void\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  hasComponent<T = any>(component: string): boolean\n  hasComponent<T>(component: ComponentConstructor<T>): boolean\n  hasComponent<T extends object>(component: T): boolean\n  hasComponent<T>(component: ComponentConstructor<T> | string): boolean\n}\n\n/**\n * @public\n */\n@EventConstructor()\nexport class ComponentRemoved {\n  constructor(\n    public entity: IEntity,\n    public componentName: string,\n    public component: ComponentLike\n  ) {\n    // stub\n  }\n}\n\n/**\n * @public\n */\n@EventConstructor()\nexport class ComponentAdded {\n  constructor(\n    public entity: IEntity,\n    public componentName: string,\n    public classId: number | null\n  ) {\n    // stub\n  }\n}\n\n/**\n * @public\n */\n@EventConstructor()\nexport class ParentChanged {\n  constructor(public entity: IEntity, public parent: IEntity | null) {\n    // stub\n  }\n}\n","import { newId } from './helpers'\nimport { EventConstructor } from './EventManager'\nimport { UIValue } from './UIValue'\n\nconst componentSymbol = '__name__symbol_'\nconst componentClassIdSymbol = '__classId__symbol_'\nconst componentIdSymbol = '__component__id_'\n\n/**\n * @public\n */\nexport interface ComponentLike {\n  // @internal\n  [componentSymbol]?: string\n  // @internal\n  [componentClassIdSymbol]?: number\n\n  // @internal\n  addedToEntity?(entity: any): void\n  // @internal\n  removedFromEntity?(entity: any): void\n}\n\n/**\n * @public\n */\nexport interface DisposableComponentLike extends ComponentLike {\n  // @internal\n  [componentIdSymbol]?: string\n  onDispose?(): void\n}\n\n/**\n * @public\n */\nexport interface ComponentConstructor<T extends ComponentLike> {\n  // @internal\n  [componentSymbol]?: string\n  // @internal\n  [componentClassIdSymbol]?: number\n  isComponent?: boolean\n  originalClassName?: string\n  new (...args: any[]): T\n}\n\n/**\n * @public\n */\nexport interface DisposableComponentConstructor<\n  T extends DisposableComponentLike\n> {\n  // @internal\n  [componentSymbol]?: string\n  // @internal\n  [componentClassIdSymbol]?: number\n  isComponent?: boolean\n  isDisposableComponent?: true\n  originalClassName?: string\n  new (...args: any[]): T\n}\n\n/**\n * @public\n */\n@EventConstructor()\nexport class DisposableComponentCreated {\n  constructor(\n    public componentId: string,\n    public componentName: string,\n    public classId: number\n  ) {\n    // stub\n  }\n}\n\n/**\n * @public\n */\n@EventConstructor()\nexport class DisposableComponentRemoved {\n  constructor(public componentId: string) {\n    // stub\n  }\n}\n\n/**\n * @public\n */\n@EventConstructor()\nexport class DisposableComponentUpdated {\n  constructor(\n    public componentId: string,\n    public component: DisposableComponentLike\n  ) {\n    // stub\n  }\n}\n\n/**\n * @public\n */\nexport function Component(componentName: string, classId?: number) {\n  return function <TFunction extends ComponentConstructor<any>>(\n    target: TFunction\n  ): TFunction | void {\n    if (target.isComponent) {\n      throw new TypeError(\n        `You cannot extend a component. Trying to extend ${target.originalClassName} with: ${componentName}`\n      )\n    }\n\n    const extendedClass = target as any\n\n    const RegisteredComponent: any = function RegisteredComponent() {\n      // eslint-disable-next-line prefer-rest-params\n      const args = Array.prototype.slice.call(arguments)\n      const ret = new extendedClass(...args)\n\n      Object.defineProperty(ret, componentSymbol, {\n        enumerable: false,\n        writable: false,\n        configurable: false,\n        value: componentName\n      })\n\n      if (classId !== undefined) {\n        Object.defineProperty(ret, componentClassIdSymbol, {\n          enumerable: false,\n          writable: false,\n          configurable: false,\n          value: classId\n        })\n      }\n\n      return ret\n    }\n\n    if (classId !== undefined) {\n      RegisteredComponent[componentClassIdSymbol] = classId\n    }\n\n    RegisteredComponent[componentSymbol] = componentName\n    RegisteredComponent.isComponent = true\n    RegisteredComponent.originalClassName = componentName\n\n    RegisteredComponent.prototype = target.prototype\n    RegisteredComponent.prototype.constructor = target\n\n    return RegisteredComponent as TFunction\n  }\n}\n\n/**\n * @public\n */\n\nexport function DisposableComponent(componentName: string, classId: number) {\n  return function <TFunction extends DisposableComponentConstructor<any>>(\n    target: TFunction\n  ): TFunction | void {\n    if (target.isComponent) {\n      throw new TypeError(\n        `You cannot extend a component. Trying to extend ${target.originalClassName} with: ${componentName}`\n      )\n    }\n\n    if (typeof (classId as any) !== 'number' || isNaN(classId)) {\n      throw new Error(`classId: ${classId} is an invalid integer`)\n    }\n\n    const extendedClass = target\n\n    const RegisteredComponent: any = function RegisteredComponent() {\n      if (!DisposableComponent.engine) {\n        throw new Error(\n          'You need to set a DisposableComponent.engine before creating disposable components'\n        )\n      }\n\n      // eslint-disable-next-line prefer-rest-params\n      const args = Array.prototype.slice.call(arguments)\n      const ret = new extendedClass(...(args as any))\n      const id = newId('C')\n\n      Object.defineProperty(ret, componentSymbol, {\n        enumerable: false,\n        writable: false,\n        configurable: false,\n        value: componentName\n      })\n\n      Object.defineProperty(ret, componentIdSymbol, {\n        enumerable: false,\n        writable: false,\n        configurable: false,\n        value: id\n      })\n\n      if ((classId as any) !== undefined) {\n        Object.defineProperty(ret, componentClassIdSymbol, {\n          enumerable: false,\n          writable: false,\n          configurable: false,\n          value: classId\n        })\n      }\n\n      if (DisposableComponent.engine) {\n        DisposableComponent.engine.registerComponent(ret)\n      }\n\n      return ret\n    }\n\n    if ((classId as any) !== undefined) {\n      RegisteredComponent[componentClassIdSymbol] = classId\n    }\n\n    RegisteredComponent[componentSymbol] = componentName\n    RegisteredComponent.isComponent = true\n    RegisteredComponent.isDisposableComponent = true\n    RegisteredComponent.originalClassName = componentName\n\n    RegisteredComponent.prototype = target.prototype\n    RegisteredComponent.prototype.constructor = target\n\n    return RegisteredComponent as TFunction\n  }\n}\n\n/** @internal */\nexport namespace DisposableComponent {\n  /** @internal */\n  // eslint-disable-next-line prefer-const\n  export let engine: any = null\n}\n\n/**\n * @public\n */\nexport function getComponentName<T extends Record<any, any> = any>(\n  component: T | ComponentConstructor<T>\n): string {\n  if (!component) {\n    throw new TypeError(component + ' is not a component.')\n  }\n  if (component[componentSymbol]) {\n    return component[componentSymbol] as string\n  }\n  throw new TypeError(component + ' is not a registered component.')\n}\n\n/**\n * @public\n */\nexport function getComponentClassId<T extends Record<any, any> = any>(\n  component: T | ComponentConstructor<T>\n): number | null {\n  if (!component) {\n    throw new TypeError(component + ' is not a component.')\n  }\n  if (component[componentClassIdSymbol]) {\n    return component[componentClassIdSymbol] as number\n  }\n  if (!component[componentSymbol]) {\n    throw new TypeError(component + ' is not a registered component.')\n  }\n\n  return null\n}\n\n/**\n * @public\n */\nexport function getComponentId<T extends DisposableComponentLike>(\n  component: T\n): string {\n  if (!component) {\n    throw new TypeError(component + ' is not a component.')\n  }\n  if (component[componentIdSymbol]) {\n    return component[componentIdSymbol] as any as string\n  }\n  throw new TypeError(component + ' is not a registered disposable component.')\n}\n\n/** @public */\nexport type ObservableComponentSubscription = (\n  key: string,\n  newVal: any,\n  oldVal: any\n) => void\n\n/**\n * @public\n */\nexport class ObservableComponent {\n  // @internal\n  dirty: boolean = false\n  // @internal\n  data: any = {}\n  private subscriptions: Array<ObservableComponentSubscription> = []\n\n  static component(target: ObservableComponent, propertyKey: string) {\n    if (delete (target as any)[propertyKey]) {\n      const componentSymbol = propertyKey + '_' + Math.random()\n      ;(target as any)[componentSymbol] = undefined\n\n      Object.defineProperty(target, componentSymbol, {\n        ...Object.getOwnPropertyDescriptor(target, componentSymbol),\n        enumerable: false\n      })\n\n      Object.defineProperty(target, propertyKey.toString(), {\n        get: function () {\n          return this[componentSymbol]\n        },\n        set: function (value) {\n          const oldValue = this[componentSymbol]\n\n          if (value) {\n            this.data[propertyKey] = getComponentId(value)\n          } else {\n            this.data[propertyKey] = null\n          }\n\n          this[componentSymbol] = value\n\n          if (value !== oldValue) {\n            this.dirty = true\n\n            for (let i = 0; i < this.subscriptions.length; i++) {\n              this.subscriptions[i](propertyKey, value, oldValue)\n            }\n          }\n        },\n        enumerable: true\n      })\n    }\n  }\n\n  static field(target: ObservableComponent, propertyKey: string) {\n    if (delete (target as any)[propertyKey]) {\n      Object.defineProperty(target, propertyKey.toString(), {\n        get: function (this: ObservableComponent) {\n          return this.data[propertyKey]\n        },\n        set: function (this: ObservableComponent, value) {\n          const oldValue = this.data[propertyKey]\n          this.data[propertyKey] = value\n\n          if (value !== oldValue) {\n            this.dirty = true\n\n            for (let i = 0; i < this.subscriptions.length; i++) {\n              this.subscriptions[i](propertyKey, value, oldValue)\n            }\n          }\n        },\n        enumerable: true\n      })\n    }\n  }\n\n  static uiValue(target: ObservableComponent, propertyKey: string) {\n    if (delete (target as any)[propertyKey]) {\n      Object.defineProperty(target, propertyKey.toString(), {\n        get: function (this: ObservableComponent): string | number {\n          return this.data[propertyKey].toString()\n        },\n        set: function (this: ObservableComponent, value: string | number) {\n          const oldValue = this.data[propertyKey]\n\n          const finalValue = new UIValue(value)\n\n          this.data[propertyKey] = finalValue\n\n          if (finalValue !== oldValue) {\n            this.dirty = true\n\n            for (let i = 0; i < this.subscriptions.length; i++) {\n              this.subscriptions[i](propertyKey, finalValue, oldValue)\n            }\n          }\n        },\n        enumerable: true\n      })\n    }\n  }\n\n  static readonly(target: ObservableComponent, propertyKey: string) {\n    if (delete (target as any)[propertyKey]) {\n      Object.defineProperty(target, propertyKey.toString(), {\n        get: function (this: ObservableComponent) {\n          if (propertyKey in this.data === false) {\n            throw new Error(`The field ${propertyKey} is uninitialized`)\n          }\n          return this.data[propertyKey]\n        },\n        set: function (this: ObservableComponent, value) {\n          if (propertyKey in this.data) {\n            throw new Error(`The field ${propertyKey} is readonly`)\n          }\n          this.data[propertyKey] = value\n          this.dirty = true\n        },\n        enumerable: true,\n        configurable: false\n      })\n    }\n  }\n\n  onChange(fn: ObservableComponentSubscription) {\n    this.subscriptions.push(fn)\n    return this\n  }\n\n  toJSON() {\n    return this.data\n  }\n}\n\n/**\n * @public\n */\nexport function isDisposableComponent(component: ComponentLike) {\n  return componentIdSymbol in component\n}\n","import { getComponentName, ComponentConstructor } from './Component'\nimport { IEntity } from './IEntity'\n\n/**\n * @public\n */\nexport class ComponentGroup {\n  readonly entities: ReadonlyArray<IEntity> = []\n  readonly requires!: ReadonlyArray<ComponentConstructor<any>>\n  readonly requiresNames!: ReadonlyArray<string>\n\n  active: boolean = false\n\n  private _requiresNames: string[] = []\n\n  constructor(...requires: ComponentConstructor<any>[]) {\n    // validate requires list\n    if (!requires) {\n      throw new Error('ComponentGroup: Could not load the requires list')\n    }\n    if (!(requires instanceof Array)) {\n      throw new Error('ComponentGroup: requires list is not an Array')\n    }\n\n    Object.defineProperty(this, 'requires', {\n      get: function () {\n        return requires.slice()\n      }\n    })\n\n    Object.defineProperty(this, 'requiresNames', {\n      get: function () {\n        return this._requiresNames.slice()\n      }\n    })\n\n    for (let ix = 0; ix < requires.length; ix++) {\n      const component = requires[ix]\n      let name: string | null = null\n\n      if (!component) {\n        throw new Error(\n          `ComponentGroup: the required component at location ${ix} is invalid`\n        )\n      }\n\n      try {\n        name = getComponentName(component)\n      } catch (e) {\n        throw new Error(\n          `ComponentGroup: the required component at location ${ix} is not registered as a @Component. Remember to provide the class of the component, not the name`\n        )\n      }\n\n      if (this._requiresNames.some(($) => $ === name)) {\n        throw new Error(\n          `ComponentGroup: the required component list has a repeated name ${name}`\n        )\n      }\n\n      this._requiresNames.push(name)\n    }\n  }\n\n  hasEntity(entity: IEntity): boolean {\n    if (!entity.isAddedToEngine()) return false\n\n    return this.entities.indexOf(entity) !== -1\n  }\n\n  // @internal\n  addEntity(entity: IEntity) {\n    if (!entity.isAddedToEngine()) {\n      throw new TypeError(\n        'ComponentGroup: Cannot add a entity that is not added to the engine'\n      )\n    }\n\n    if (this.entities.indexOf(entity) === -1) {\n      ;(this.entities as IEntity[]).push(entity)\n    }\n  }\n\n  // @internal\n  removeEntity(entity: IEntity) {\n    const id = this.entities.indexOf(entity)\n\n    if (id !== -1) {\n      ;(this.entities as IEntity[]).splice(id, 1)\n    }\n  }\n\n  // @internal\n  componentRemoved(entity: IEntity, component: string) {\n    if (this._requiresNames.indexOf(component) !== -1) {\n      this.removeEntity(entity)\n    }\n  }\n\n  // @internal\n  meetsRequirements(entity: IEntity) {\n    for (let i = 0; i < this._requiresNames.length; i++) {\n      const componentName = this._requiresNames[i]\n      if (!(componentName in entity.components)) {\n        return false\n      }\n    }\n    return true\n  }\n}\n","import {\n  getComponentName,\n  ComponentConstructor,\n  getComponentClassId,\n  ComponentLike\n} from './Component'\nimport {\n  IEngine,\n  IEntity,\n  ComponentAdded,\n  ComponentRemoved,\n  ParentChanged\n} from './IEntity'\nimport { EventManager } from './EventManager'\nimport { newId, log } from './helpers'\nimport { Attachable } from './Attachable'\n\n/**\n * @public\n */\nexport class Entity implements IEntity {\n  public children: Record<string, IEntity> = {}\n  public eventManager: EventManager | null = null\n  public alive: boolean = false\n\n  public readonly uuid: string = newId('E')\n  public readonly components: Record<string, any> = {}\n\n  // @internal\n  public engine: IEngine | null = null\n\n  // @internal\n  private _parent: IEntity | null = null\n\n  constructor(public name?: string) {\n    // stub\n  }\n\n  /**\n   * Adds or replaces a component in the entity.\n   * @param component - component instance.\n   */\n  addComponentOrReplace<T extends object>(component: T): T {\n    if (typeof component === 'function') {\n      throw new Error(\n        'You passed a function or class as a component, an instance of component is expected'\n      )\n    }\n\n    if (typeof component !== 'object') {\n      throw new Error(\n        `You passed a ${typeof component}, an instance of component is expected`\n      )\n    }\n\n    const componentName = getComponentName(component)\n\n    if (this.components[componentName]) {\n      if (this.components[componentName] === component) {\n        return component\n      }\n      this.removeComponent(this.components[componentName], false)\n    }\n\n    return this.addComponent(component)\n  }\n\n  /**\n   * Returns a boolean indicating if a component is present in the entity.\n   * @param component - component class, instance or name\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  hasComponent<T = any>(component: string): boolean\n  hasComponent<T>(component: ComponentConstructor<T>): boolean\n  hasComponent<T extends object>(component: T): boolean\n  hasComponent<T>(component: ComponentConstructor<T> | string): boolean {\n    const typeOfComponent = typeof component\n\n    if (\n      typeOfComponent !== 'string' &&\n      typeOfComponent !== 'object' &&\n      typeOfComponent !== 'function'\n    ) {\n      throw new Error(\n        'Entity#has(component): component is not a class, name or instance'\n      )\n    }\n\n    if ((component as any) === null) return false\n\n    const componentName =\n      typeOfComponent === 'string'\n        ? (component as string)\n        : getComponentName(component as any)\n\n    const storedComponent = this.components[componentName]\n\n    if (!storedComponent) {\n      return false\n    }\n\n    if (typeOfComponent === 'object') {\n      return storedComponent === component\n    }\n\n    if (typeOfComponent === 'function') {\n      return storedComponent instanceof (component as ComponentConstructor<T>)\n    }\n\n    return true\n  }\n\n  /**\n   * Gets a component, if it doesn't exist, it throws an Error.\n   * @param component - component class or name\n   */\n  getComponent<T = any>(component: string): T\n  getComponent<T>(component: ComponentConstructor<T>): T\n  getComponent<T>(component: ComponentConstructor<T> | string): T {\n    const typeOfComponent = typeof component\n\n    if (typeOfComponent !== 'string' && typeOfComponent !== 'function') {\n      throw new Error('Entity#get(component): component is not a class or name')\n    }\n\n    const componentName =\n      typeOfComponent === 'string'\n        ? (component as string)\n        : getComponentName(component as any)\n\n    const storedComponent = this.components[componentName]\n\n    if (!storedComponent) {\n      throw new Error(\n        `Can not get component \"${componentName}\" from entity \"${this.identifier}\"`\n      )\n    }\n\n    if (typeOfComponent === 'function') {\n      if (storedComponent instanceof (component as ComponentConstructor<T>)) {\n        return storedComponent\n      } else {\n        throw new Error(\n          `Can not get component \"${componentName}\" from entity \"${this.identifier}\" (by instance)`\n        )\n      }\n    }\n\n    return storedComponent\n  }\n\n  /**\n   * Gets a component, if it doesn't exist, it returns null.\n   * @param component - component class or name\n   */\n  getComponentOrNull<T = any>(component: string): T | null\n  getComponentOrNull<T>(component: ComponentConstructor<T>): T | null\n  getComponentOrNull<T>(component: ComponentConstructor<T> | string): T | null {\n    const typeOfComponent = typeof component\n\n    if (typeOfComponent !== 'string' && typeOfComponent !== 'function') {\n      throw new Error(\n        'Entity#getOrNull(component): component is not a class or name'\n      )\n    }\n\n    const componentName =\n      typeOfComponent === 'string'\n        ? (component as string)\n        : getComponentName(component as any)\n\n    const storedComponent = this.components[componentName]\n\n    if (!storedComponent) {\n      return null\n    }\n\n    if (typeOfComponent === 'function') {\n      if (storedComponent instanceof (component as ComponentConstructor<T>)) {\n        return storedComponent\n      } else {\n        return null\n      }\n    }\n\n    return storedComponent\n  }\n\n  /**\n   * Gets a component, if it doesn't exist, it creates the component and returns it.\n   * @param component - component class\n   */\n  getComponentOrCreate<T>(\n    component: ComponentConstructor<T> & { new (): T }\n  ): T {\n    if (typeof (component as any) !== 'function') {\n      throw new Error('Entity#getOrCreate(component): component is not a class')\n    }\n\n    let ret = this.getComponentOrNull(component)\n\n    if (!ret) {\n      ret = new component()\n      // Safe-guard to only add registered components to entities\n      getComponentName(ret)\n      this.addComponentOrReplace(ret as any)\n    }\n\n    return ret\n  }\n\n  /**\n   * Adds a component. If the component already exist, it throws an Error.\n   * @param component - component instance.\n   */\n  addComponent<T extends object>(component: T): T {\n    if (typeof component !== 'object') {\n      throw new Error(\n        'Entity#add(component): You passed a function or class as a component, an instance of component is expected'\n      )\n    }\n\n    const componentName = getComponentName(component)\n    const classId = getComponentClassId(component)\n\n    if (this.components[componentName]) {\n      throw new Error(\n        `A component of type \"${componentName}\" is already present in entity \"${this.identifier}\"`\n      )\n    }\n\n    this.components[componentName] = component\n\n    if (this.eventManager) {\n      this.eventManager.fireEvent(\n        new ComponentAdded(this, componentName, classId)\n      )\n    }\n\n    const storedComponent = component as ComponentLike\n\n    if (typeof storedComponent.addedToEntity === 'function') {\n      storedComponent.addedToEntity(this)\n    }\n    return component\n  }\n\n  /**\n   * Removes a component instance from the entity.\n   * @param component - component instance to remove\n   * @param triggerRemovedEvent - should this action trigger an event?\n   */\n  removeComponent(component: string, triggerRemovedEvent?: boolean): void\n  removeComponent<T extends object>(\n    component: T,\n    triggerRemovedEvent?: boolean\n  ): void\n  removeComponent(\n    component: ComponentConstructor<any>,\n    triggerRemovedEvent?: boolean\n  ): void\n  removeComponent(\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    component: object | string | Function,\n    triggerRemovedEvent = true\n  ): void {\n    const typeOfComponent = typeof component\n\n    if (\n      typeOfComponent !== 'string' &&\n      typeOfComponent !== 'function' &&\n      typeOfComponent !== 'object'\n    ) {\n      throw new Error(\n        'Entity#remove(component): component is not a class, class or name'\n      )\n    }\n\n    const componentName =\n      typeOfComponent === 'string'\n        ? (component as string)\n        : getComponentName(component as any)\n\n    const storedComponent = this.components[\n      componentName\n    ] as ComponentLike | void\n\n    if (!storedComponent) {\n      log(\n        `Entity Warning: Trying to remove inexisting component \"${componentName}\" from entity \"${this.identifier}\"`\n      )\n      return\n    }\n\n    if (typeOfComponent === 'function') {\n      if (storedComponent instanceof (component as ComponentConstructor<any>)) {\n        delete this.components[componentName]\n\n        if (storedComponent) {\n          if (triggerRemovedEvent && this.eventManager) {\n            this.eventManager.fireEvent(\n              new ComponentRemoved(this, componentName, storedComponent)\n            )\n          }\n\n          if (typeof storedComponent.removedFromEntity === 'function') {\n            storedComponent.removedFromEntity(this)\n          }\n        }\n        return\n      } else {\n        log(\n          `Entity Warning: Trying to remove wrong (by constructor) component \"${componentName}\" from entity \"${this.identifier}\"`\n        )\n        return\n      }\n    }\n\n    delete this.components[componentName]\n\n    if (storedComponent) {\n      if (triggerRemovedEvent && this.eventManager) {\n        this.eventManager.fireEvent(\n          new ComponentRemoved(this, componentName, storedComponent)\n        )\n      }\n\n      if (typeof storedComponent.removedFromEntity === 'function') {\n        storedComponent.removedFromEntity(this)\n      }\n    }\n\n    return\n  }\n\n  /**\n   * Returns true if the entity is already added to the engine.\n   * Returns false if no engine was defined.\n   */\n  isAddedToEngine(): boolean {\n    if (\n      this.engine &&\n      (this.uuid in this.engine.entities || this.engine.rootEntity === this)\n    ) {\n      return true\n    }\n\n    return false\n  }\n\n  /**\n   * Sets the parent entity\n   */\n  setParent(_parent: IEntity | Attachable | null): IEntity {\n    let newParent: IEntity | null\n\n    // Check if parent is of type Attachable\n    if (_parent && 'getEntityRepresentation' in _parent) {\n      if (!this.engine) {\n        throw new Error(\n          `In order to set an attachable as parent, you first need to add the entity to the engine.`\n        )\n      }\n      newParent = _parent.getEntityRepresentation(this.engine)\n    } else {\n      newParent = !_parent && this.engine ? this.engine.rootEntity : _parent\n    }\n    const currentParent = this.getParent()\n\n    if (newParent === this) {\n      throw new Error(\n        `Failed to set parent for entity \"${this.identifier}\": An entity can't set itself as a its own parent`\n      )\n    }\n\n    if (newParent === currentParent) {\n      return this\n    }\n\n    const circularAncestor = this.getCircularAncestor(newParent)\n\n    if (circularAncestor) {\n      throw new Error(\n        `Failed to set parent for entity \"${this.identifier}\": Circular parent references are not allowed (See entity \"${circularAncestor}\")`\n      )\n    }\n\n    if (currentParent) {\n      delete currentParent.children[this.uuid]\n    }\n\n    // Make sure that the parent and child are both on the engine, or off the engine, together\n    if (newParent !== null && newParent.uuid !== '0') {\n      if (!newParent.isAddedToEngine() && this.isAddedToEngine()) {\n        this.engine!.removeEntity(this)\n      }\n      if (newParent.isAddedToEngine() && !this.isAddedToEngine()) {\n        ;(newParent as Entity).engine!.addEntity(this)\n      }\n    }\n\n    this._parent = newParent || null\n    this.registerAsChild()\n\n    if (this.eventManager && this.engine) {\n      this.eventManager.fireEvent(new ParentChanged(this, newParent))\n    }\n\n    return this\n  }\n\n  /**\n   * Gets the parent entity\n   */\n  getParent(): IEntity | null {\n    return this._parent\n  }\n\n  private get identifier() {\n    return this.name || this.uuid\n  }\n\n  private getCircularAncestor(ent: IEntity | null): string | null {\n    const root = this.engine ? this.engine.rootEntity : null\n    let e: IEntity | null = ent\n\n    while (e && e !== root) {\n      const parent: IEntity | null = e.getParent()\n      if (parent === this) {\n        return e.uuid\n      }\n      e = parent\n    }\n\n    return null\n  }\n\n  private registerAsChild() {\n    const parent = this.getParent()\n\n    if (this.uuid && parent) {\n      parent.children[this.uuid] = this\n    }\n  }\n}\n","import {\n  IEngine,\n  ISystem,\n  IEntity,\n  ComponentAdded,\n  ComponentRemoved\n} from './IEntity'\n\nimport {\n  getComponentName,\n  getComponentId,\n  DisposableComponentUpdated,\n  DisposableComponentLike,\n  ComponentConstructor,\n  DisposableComponentCreated,\n  DisposableComponentRemoved,\n  getComponentClassId\n} from './Component'\nimport { EventManager } from './EventManager'\nimport { ComponentGroup } from './ComponentGroup'\n\nimport { log, error } from './helpers'\nimport { Entity } from './Entity'\n\n/**\n * @internal\n */\ntype SystemEntry = { system: ISystem; priority: number }\n\n/**\n * @public\n */\nexport class Engine implements IEngine {\n  readonly eventManager: EventManager = new EventManager()\n  readonly rootEntity: IEntity\n  readonly firstPersonCameraEntity: IEntity\n  readonly avatarEntity: IEntity\n\n  // @internal\n  readonly systems: SystemEntry[] = []\n\n  // @internal\n  readonly entityLists: Record<string, Record<string, IEntity>> = {}\n\n  // @internal\n  readonly addedSystems: ISystem[] = []\n\n  private readonly _entities: Record<string, IEntity> = {}\n  private readonly _disposableComponents: Record<\n    string,\n    DisposableComponentLike\n  > = {}\n  private readonly _componentGroups: Record<string, ComponentGroup[]> = {}\n\n  // systems that doesn't require any component or handle their own logic\n  private readonly simpleSystems: ISystem[] = []\n\n  get entities() {\n    return this._entities as Readonly<Record<string, IEntity>>\n  }\n\n  get disposableComponents() {\n    return this._disposableComponents as Readonly<\n      Record<string, DisposableComponentLike>\n    >\n  }\n\n  constructor(rootEntity: IEntity) {\n    this.eventManager.addListener(\n      ComponentAdded,\n      this,\n      this.componentAddedHandler\n    )\n    this.eventManager.addListener(\n      ComponentRemoved,\n      this,\n      this.componentRemovedHandler\n    )\n    this.rootEntity = rootEntity\n    this.firstPersonCameraEntity = new Entity()\n    ;(this.firstPersonCameraEntity as any).uuid =\n      'FirstPersonCameraEntityReference'\n    this.addEntity(this.firstPersonCameraEntity)\n    this.avatarEntity = new Entity()\n    ;(this.avatarEntity as any).uuid = 'AvatarEntityReference'\n    this.addEntity(this.avatarEntity)\n  }\n\n  addEntity(entity: IEntity): IEntity {\n    const parent = entity.getParent()\n\n    if (entity.isAddedToEngine()) {\n      return entity\n    }\n\n    entity.eventManager = this.eventManager\n    ;(entity as Entity).engine = this\n\n    this._entities[entity.uuid] = entity\n\n    this.checkRequirementsAndAdd(entity)\n\n    if (!parent) {\n      entity.setParent(this.rootEntity)\n    } else {\n      if (!parent.isAddedToEngine() && parent !== this.rootEntity) {\n        log(\n          'Engine: warning, added an entity with a parent not present in the engine. Parent id: ' +\n            parent.uuid\n        )\n      }\n    }\n\n    entity.alive = true\n\n    for (const i in entity.children) {\n      const child = entity.children[i]\n      if (child) {\n        if (!child.isAddedToEngine()) {\n          this.addEntity(child)\n        }\n      }\n    }\n\n    return entity\n  }\n\n  removeEntity(entity: IEntity): boolean {\n    const id = entity.uuid\n\n    if (entity.isAddedToEngine()) {\n      for (const componentName in entity.components) {\n        const componentGroups = this._componentGroups[componentName]\n\n        if (componentGroups) {\n          for (const groupIndex in componentGroups) {\n            componentGroups[groupIndex].removeEntity(entity)\n          }\n        }\n\n        delete this.entityLists[componentName][id]\n      }\n\n      for (let i = 0; i < this.simpleSystems.length; i++) {\n        const system = this.simpleSystems[i]\n\n        if (system.onRemoveEntity) {\n          system.onRemoveEntity(entity)\n        }\n      }\n\n      for (const i in entity.children) {\n        const child = entity.children[i]\n        if (child) {\n          this.removeEntity(child)\n        }\n      }\n\n      entity.alive = false\n      entity.eventManager = null\n\n      delete this._entities[id]\n\n      return true\n    } else {\n      log('Engine: Trying to remove non existent entity from engine.')\n      if (!entity.isAddedToEngine()) {\n        log(\n          `Engine: Entity \"${entity.uuid}\" has not been added to any engine yet.`\n        )\n      } else {\n        log('Engine: Entity id: ' + id)\n      }\n      log(\"Engine: Entity's components:\")\n      for (const componentName in entity.components) {\n        log(componentName)\n      }\n      return false\n    }\n  }\n\n  addSystem(system: ISystem, priority: number = 0) {\n    if (this.addedSystems.indexOf(system) !== -1) {\n      log('Engine: Trying to add a system that is already added. Aborting')\n      return system\n    }\n\n    if (this.systems.length > 0) {\n      for (let i = 0; i < this.systems.length; i++) {\n        const entry = this.systems[i]\n        const isLast = i === this.systems.length - 1\n\n        if (entry.priority > priority) {\n          this.addedSystems.push(system)\n          this.systems.splice(i, 0, { system, priority })\n          break\n        } else if (isLast) {\n          this.addedSystems.push(system)\n          this.systems.splice(i + 1, 0, { system, priority })\n          break\n        }\n      }\n    } else {\n      this.addedSystems.push(system)\n      this.systems.splice(1, 0, { system, priority })\n    }\n\n    this.registerSystem(system)\n\n    return system\n  }\n\n  removeSystem(system: ISystem) {\n    const idx = this.addedSystems.indexOf(system)\n\n    if (idx !== -1) {\n      system.active = false\n\n      if (system.deactivate) {\n        system.deactivate()\n      }\n\n      this.addedSystems.splice(idx, 1)\n\n      for (let i = 0; i < this.systems.length; i++) {\n        const sys = this.systems[i].system\n        if (sys === system) {\n          this.systems.splice(i, 1)\n        }\n      }\n      return true\n    }\n    return false\n  }\n\n  update(dt: number) {\n    for (const i in this.systems) {\n      const system = this.systems[i].system\n      if (system.active && system.update) {\n        try {\n          system.update(dt)\n        } catch (e) {\n          // TODO: e may not be an Error\n          error(e as any)\n        }\n      }\n    }\n    return this\n  }\n\n  getEntitiesWithComponent(component: string): Record<string, any>\n  getEntitiesWithComponent(\n    component: ComponentConstructor<any>\n  ): Record<string, IEntity>\n  getEntitiesWithComponent(\n    component: ComponentConstructor<any> | string\n  ): Record<string, IEntity> {\n    const componentName =\n      typeof component === 'string' ? component : getComponentName(component)\n\n    if (componentName in this.entityLists) {\n      return this.entityLists[componentName]\n    } else {\n      return (this.entityLists[componentName] = {})\n    }\n  }\n\n  registerComponent(component: DisposableComponentLike) {\n    const id = getComponentId(component)\n    const name = getComponentName(component)\n    const classId = getComponentClassId(component)\n    this._disposableComponents[id] = component\n    if (classId !== null) {\n      this.eventManager.fireEvent(\n        new DisposableComponentCreated(id, name, classId)\n      )\n      this.eventManager.fireEvent(new DisposableComponentUpdated(id, component))\n    }\n  }\n\n  disposeComponent(component: DisposableComponentLike) {\n    const id = getComponentId(component)\n\n    if (delete this._disposableComponents[id]) {\n      this.eventManager.fireEvent(new DisposableComponentRemoved(id))\n\n      if (component.onDispose) {\n        component.onDispose()\n      }\n      return true\n    }\n    return false\n  }\n\n  updateComponent(component: DisposableComponentLike) {\n    this.eventManager.fireEvent(\n      new DisposableComponentUpdated(getComponentId(component), component)\n    )\n  }\n\n  getComponentGroup(...requires: ComponentConstructor<any>[]) {\n    let componentGroup = undefined\n\n    // Return an already created component-group if it already exists\n    if (requires.length > 0) {\n      // 1. get component groups for first require\n      const componentGroups =\n        this._componentGroups[getComponentName(requires[0])]\n\n      if (componentGroups) {\n        const components = requires.slice()\n\n        // 2. search for a component group that has all the same requirements\n        for (let i = 0; i < componentGroups.length; i++) {\n          const traversedComponentGroup = componentGroups[i]\n\n          if (components.length === traversedComponentGroup.requires.length) {\n            for (let j = 0; j < components.length; j++) {\n              if (\n                traversedComponentGroup.requires.indexOf(components[j]) === -1\n              )\n                break\n\n              if (j === components.length - 1) {\n                componentGroup = traversedComponentGroup\n              }\n            }\n\n            if (componentGroup) break\n          }\n        }\n      }\n    }\n\n    if (componentGroup) {\n      // 3. Found an existent component group with the exact same requirements\n      return componentGroup\n    }\n\n    // Otherwise create and store it\n    componentGroup = new ComponentGroup(...requires)\n\n    componentGroup.active = true\n\n    const requiresNames = componentGroup.requiresNames\n\n    for (let i = 0; i < requiresNames.length; i++) {\n      const componentName = requiresNames[i]\n\n      let componentGroups = this._componentGroups[componentName]\n\n      if (!componentGroups) {\n        this._componentGroups[componentName] = componentGroups = []\n      }\n\n      if (componentGroups.indexOf(componentGroup) === -1) {\n        componentGroups.push(componentGroup)\n      }\n    }\n\n    for (const entityId in this._entities) {\n      this.checkRequirements(this._entities[entityId], componentGroup)\n    }\n\n    return componentGroup\n  }\n\n  removeComponentGroup(componentGroup: ComponentGroup) {\n    if (componentGroup.active) {\n      componentGroup.active = false\n      const requiresNames = componentGroup.requiresNames\n      for (let i = 0; i < requiresNames.length; i++) {\n        const componentName = requiresNames[i]\n\n        const componentGroups = this._componentGroups[componentName]\n\n        if (componentGroups) {\n          const idx = componentGroups.indexOf(componentGroup)\n          if (idx !== -1) {\n            componentGroups.splice(idx, 1)\n          }\n        }\n      }\n      return true\n    }\n    return false\n  }\n\n  private registerSystem(system: ISystem) {\n    system.active = true\n\n    if (system.activate) {\n      system.activate(this)\n    }\n\n    this.simpleSystems.push(system)\n  }\n\n  private checkRequirementsAndAdd(entity: IEntity) {\n    if (!entity.isAddedToEngine()) return\n\n    for (const componentName in entity.components) {\n      if (!(componentName in this.entityLists)) {\n        this.entityLists[componentName] = {}\n      }\n\n      this.entityLists[componentName][entity.uuid] = entity\n\n      const componentGroups = this._componentGroups[componentName]\n\n      if (componentGroups) {\n        for (const systemIndex in componentGroups) {\n          this.checkRequirements(entity, componentGroups[systemIndex])\n        }\n      }\n    }\n\n    for (let i = 0; i < this.simpleSystems.length; i++) {\n      const system = this.simpleSystems[i]\n\n      if (system.onAddEntity) {\n        system.onAddEntity(entity)\n      }\n    }\n  }\n\n  private checkRequirements(entity: IEntity, system: ComponentGroup) {\n    if (system.meetsRequirements(entity)) {\n      if (!system.hasEntity(entity)) {\n        system.addEntity(entity)\n      }\n    } else {\n      if (system.hasEntity(entity)) {\n        system.removeEntity(entity)\n      }\n    }\n  }\n\n  private componentAddedHandler(event: ComponentAdded) {\n    const { entity, componentName } = event\n\n    if (!entity.isAddedToEngine()) return\n\n    if (!this.entityLists[componentName]) {\n      this.entityLists[componentName] = { [entity.uuid]: entity }\n    } else {\n      this.entityLists[componentName][entity.uuid] = entity\n    }\n\n    const componentGroups = this._componentGroups[componentName]\n\n    if (componentGroups) {\n      for (const i in componentGroups) {\n        this.checkRequirements(entity, componentGroups[i])\n      }\n    }\n  }\n\n  private componentRemovedHandler(event: ComponentRemoved) {\n    // In case a single component gets removed from an entity, we inform\n    // all systems that this entity lost this specific component.\n    const { entity, componentName } = event\n\n    if (!entity.isAddedToEngine()) return\n\n    delete this.entityLists[componentName][entity.uuid]\n\n    const componentGroups = this._componentGroups[componentName]\n\n    if (componentGroups) {\n      for (const i in componentGroups) {\n        this.checkRequirements(entity, componentGroups[i])\n      }\n    }\n  }\n}\n","import { error } from './helpers'\n\ndeclare let Promise: any\n\n/** @public */\nexport type TaskResult<T> = Promise<T> & {\n  isComplete: boolean\n  didFail?: boolean\n  error?: Error\n  result?: T\n}\n\nconst _defer = Promise.resolve().then.bind(Promise.resolve())\n\n/**\n * Executes an asynchronous task\n * @param task - the task to execute\n * @public\n */\nexport function executeTask<T>(task: () => Promise<T>): TaskResult<T> {\n  const result: TaskResult<T> = _defer(task)\n\n  result.isComplete = false\n\n  result\n    .then(($) => {\n      result.isComplete = true\n      result.result = $\n      result.didFail = false\n    })\n    .catch(($) => {\n      result.isComplete = true\n      result.error = $\n      result.didFail = true\n      error('executeTask: FAILED ' + $.toString(), $)\n    })\n\n  return result\n}\n","let modulePromise: any\n\n/**\n * teleport player to a destination\n * @param destination - \"coordX,coordY\", \"magic\", \"crowd\"\n * @public\n */\nexport function teleportTo(destination: string) {\n  // error(`teleportTo(destination) was deprecated. Please use:\n\n  // import {requestTeleport} from '@decentraland/UserActionModule'\n  // executeTask(async () => {\n  //   await requestTeleport(destination)\n  // })`)\n  callModuleRpc('requestTeleport', [destination])\n}\n\nfunction ensureModule(): boolean {\n  if (typeof modulePromise === 'undefined' && typeof dcl !== 'undefined') {\n    modulePromise = dcl.loadModule('@decentraland/UserActionModule', {})\n  }\n  return typeof modulePromise !== 'undefined' && typeof dcl !== 'undefined'\n}\n\nfunction callModuleRpc(methodName: string, args: any[]): void {\n  if (ensureModule()) {\n    modulePromise.then(($: any) => {\n      void dcl.callRpc($.rpcHandle, methodName, args)\n    })\n  }\n}\n","import { executeTask } from './Task'\n\ndeclare let Promise: any\n\n/**\n * A class serves as a medium between the observable and its observers\n * @public\n */\nexport class ObserverEventState {\n  /**\n   * An Observer can set this property to true to prevent subsequent observers of being notified\n   */\n  public skipNextObservers!: boolean\n\n  /**\n   * Get the mask value that were used to trigger the event corresponding to this EventState object\n   */\n  public mask!: number\n\n  /**\n   * The object that originally notified the event\n   */\n  public target?: any\n\n  /**\n   * The current object in the bubbling phase\n   */\n  public currentTarget?: any\n\n  /**\n   * This will be populated with the return value of the last function that was executed.\n   * If it is the first function in the callback chain it will be the event data.\n   */\n  public lastReturnValue?: any\n\n  /**\n   * Create a new EventState\n   * @param mask - defines the mask associated with this state\n   * @param skipNextObservers - defines a flag which will instruct the observable to skip following observers when set to true\n   * @param target - defines the original target of the state\n   * @param currentTarget - defines the current target of the state\n   */\n  constructor(\n    mask: number,\n    skipNextObservers = false,\n    target?: any,\n    currentTarget?: any\n  ) {\n    this.initalize(mask, skipNextObservers, target, currentTarget)\n  }\n\n  /**\n   * Initialize the current event state\n   * @param mask - defines the mask associated with this state\n   * @param skipNextObservers - defines a flag which will instruct the observable to skip following observers when set to true\n   * @param target - defines the original target of the state\n   * @param currentTarget - defines the current target of the state\n   * @returns the current event state\n   */\n  public initalize(\n    mask: number,\n    skipNextObservers = false,\n    target?: any,\n    currentTarget?: any\n  ): ObserverEventState {\n    this.mask = mask\n    this.skipNextObservers = skipNextObservers\n    this.target = target\n    this.currentTarget = currentTarget\n    return this\n  }\n}\n\n/**\n * Represent an Observer registered to a given Observable object.\n * @public\n */\nexport class Observer<T> {\n  /**\n   * Gets or sets a property defining that the observer as to be unregistered after the next notification\n   */\n  public unregisterOnNextCall = false\n\n  /** For internal usage */\n  public _willBeUnregistered = false\n\n  /**\n   * Creates a new observer\n   * @param callback - defines the callback to call when the observer is notified\n   * @param mask - defines the mask of the observer (used to filter notifications)\n   * @param scope - defines the current scope used to restore the JS context\n   */\n  constructor(\n    /**\n     * Defines the callback to call when the observer is notified\n     */\n    public callback: (eventData: T, eventState: ObserverEventState) => void,\n    /**\n     * Defines the mask of the observer (used to filter notifications)\n     */\n    public mask: number,\n    /**\n     * Defines the current scope used to restore the JS context\n     */\n    public scope: any = null\n  ) {}\n}\n\n/**\n * Represent a list of observers registered to multiple Observables object.\n * @public\n */\nexport class MultiObserver<T> {\n  private _observers: Observer<T>[] | null = null\n  private _observables: Observable<T>[] | null = null\n\n  /**\n   * Raise a callback when one of the observable will notify\n   * @param observables - defines a list of observables to watch\n   * @param callback - defines the callback to call on notification\n   * @param mask - defines the mask used to filter notifications\n   * @param scope - defines the current scope used to restore the JS context\n   * @returns the new MultiObserver\n   */\n  public static Watch<T>(\n    observables: Observable<T>[],\n    callback: (eventData: T, eventState: ObserverEventState) => void,\n    mask: number = -1,\n    scope: any = null\n  ): MultiObserver<T> {\n    const result = new MultiObserver<T>()\n\n    result._observers = new Array<Observer<T>>()\n    result._observables = observables\n\n    for (const observable of observables) {\n      const observer = observable.add(callback, mask, false, scope)\n      if (observer) {\n        result._observers.push(observer)\n      }\n    }\n\n    return result\n  }\n\n  /**\n   * Release associated resources\n   */\n  public dispose(): void {\n    if (this._observers && this._observables) {\n      for (let index = 0; index < this._observers.length; index++) {\n        this._observables[index].remove(this._observers[index])\n      }\n    }\n\n    this._observers = null\n    this._observables = null\n  }\n}\n\n/**\n * The Observable class is a simple implementation of the Observable pattern.\n *\n * There's one slight particularity though: a given Observable can notify its observer using a particular mask value, only the Observers registered with this mask value will be notified.\n * This enable a more fine grained execution without having to rely on multiple different Observable objects.\n * For instance you may have a given Observable that have four different types of notifications: Move (mask = 0x01), Stop (mask = 0x02), Turn Right (mask = 0X04), Turn Left (mask = 0X08).\n * A given observer can register itself with only Move and Stop (mask = 0x03), then it will only be notified when one of these two occurs and will never be for Turn Left/Right.\n *\n * @public\n */\nexport class Observable<T> {\n  private _observers = new Array<Observer<T>>()\n\n  private _eventState: ObserverEventState\n\n  private _onObserverAdded: null | ((observer: Observer<T>) => void) = null\n\n  /**\n   * Creates a new observable\n   * @param onObserverAdded - defines a callback to call when a new observer is added\n   */\n  constructor(onObserverAdded?: (observer: Observer<T>) => void) {\n    this._eventState = new ObserverEventState(0)\n\n    if (onObserverAdded) {\n      this._onObserverAdded = onObserverAdded\n    }\n  }\n\n  /**\n   * Create a new Observer with the specified callback\n   * @param callback - the callback that will be executed for that Observer\n   * @param mask - the mask used to filter observers\n   * @param insertFirst - if true the callback will be inserted at the first position, hence executed before the others ones. If false (default behavior) the callback will be inserted at the last position, executed after all the others already present.\n   * @param scope - optional scope for the callback to be called from\n   * @param unregisterOnFirstCall - defines if the observer as to be unregistered after the next notification\n   * @returns the new observer created for the callback\n   */\n  public add(\n    callback: (eventData: T, eventState: ObserverEventState) => void,\n    mask: number = -1,\n    insertFirst = false,\n    scope: any = null,\n    unregisterOnFirstCall = false\n  ): null | Observer<T> {\n    if (!callback) {\n      return null\n    }\n\n    const observer = new Observer(callback, mask, scope)\n    observer.unregisterOnNextCall = unregisterOnFirstCall\n\n    if (insertFirst) {\n      this._observers.unshift(observer)\n    } else {\n      this._observers.push(observer)\n    }\n\n    if (this._onObserverAdded) {\n      this._onObserverAdded(observer)\n    }\n\n    return observer\n  }\n\n  /**\n   * Create a new Observer with the specified callback and unregisters after the next notification\n   * @param callback - the callback that will be executed for that Observer\n   * @returns the new observer created for the callback\n   */\n  public addOnce(\n    callback: (eventData: T, eventState: ObserverEventState) => void\n  ): null | Observer<T> {\n    return this.add(callback, undefined, undefined, undefined, true)\n  }\n\n  /**\n   * Remove an Observer from the Observable object\n   * @param observer - the instance of the Observer to remove\n   * @returns false if it doesn't belong to this Observable\n   */\n  public remove(observer: null | Observer<T>): boolean {\n    if (!observer) {\n      return false\n    }\n\n    const index = this._observers.indexOf(observer)\n\n    if (index !== -1) {\n      this._deferUnregister(observer)\n      return true\n    }\n\n    return false\n  }\n\n  /**\n   * Remove a callback from the Observable object\n   * @param callback - the callback to remove\n   * @param scope - optional scope. If used only the callbacks with this scope will be removed\n   * @returns false if it doesn't belong to this Observable\n   */\n  public removeCallback(\n    callback: (eventData: T, eventState: ObserverEventState) => void,\n    scope?: any\n  ): boolean {\n    for (let index = 0; index < this._observers.length; index++) {\n      if (\n        this._observers[index].callback === callback &&\n        (!scope || scope === this._observers[index].scope)\n      ) {\n        this._deferUnregister(this._observers[index])\n        return true\n      }\n    }\n\n    return false\n  }\n\n  /**\n   * Notify all Observers by calling their respective callback with the given data\n   * Will return true if all observers were executed, false if an observer set skipNextObservers to true, then prevent the subsequent ones to execute\n   * @param eventData - defines the data to send to all observers\n   * @param mask - defines the mask of the current notification (observers with incompatible mask (ie mask & observer.mask === 0) will not be notified)\n   * @param target - defines the original target of the state\n   * @param currentTarget - defines the current target of the state\n   * @returns false if the complete observer chain was not processed (because one observer set the skipNextObservers to true)\n   */\n  public notifyObservers(\n    eventData: T,\n    mask: number = -1,\n    target?: any,\n    currentTarget?: any\n  ): boolean {\n    if (!this._observers.length) {\n      return true\n    }\n\n    const state = this._eventState\n    state.mask = mask\n    state.target = target\n    state.currentTarget = currentTarget\n    state.skipNextObservers = false\n    state.lastReturnValue = eventData\n\n    for (const obs of this._observers) {\n      if (obs._willBeUnregistered) {\n        continue\n      }\n\n      if (obs.mask & mask) {\n        if (obs.scope) {\n          state.lastReturnValue = obs.callback.apply(obs.scope, [\n            eventData,\n            state\n          ])\n        } else {\n          state.lastReturnValue = obs.callback(eventData, state)\n        }\n\n        if (obs.unregisterOnNextCall) {\n          this._deferUnregister(obs)\n        }\n      }\n      if (state.skipNextObservers) {\n        return false\n      }\n    }\n    return true\n  }\n\n  /**\n   * Calling this will execute each callback, expecting it to be a promise or return a value.\n   * If at any point in the chain one function fails, the promise will fail and the execution will not continue.\n   * This is useful when a chain of events (sometimes async events) is needed to initialize a certain object\n   * and it is crucial that all callbacks will be executed.\n   * The order of the callbacks is kept, callbacks are not executed parallel.\n   *\n   * @param eventData - The data to be sent to each callback\n   * @param mask - is used to filter observers defaults to -1\n   * @param target - defines the callback target (see EventState)\n   * @param currentTarget - defines he current object in the bubbling phase\n   * @returns will return a Promise than resolves when all callbacks executed successfully.\n   */\n  public notifyObserversWithPromise(\n    eventData: T,\n    mask: number = -1,\n    target?: any,\n    currentTarget?: any\n  ): Promise<T> {\n    // create an empty promise\n    let p: Promise<any> = Promise.resolve(eventData)\n\n    // no observers? return this promise.\n    if (!this._observers.length) {\n      return p\n    }\n\n    const state = this._eventState\n    state.mask = mask\n    state.target = target\n    state.currentTarget = currentTarget\n    state.skipNextObservers = false\n\n    // execute one callback after another (not using Promise.all, the order is important)\n    this._observers.forEach((obs) => {\n      if (state.skipNextObservers) {\n        return\n      }\n      if (obs._willBeUnregistered) {\n        return\n      }\n      if (obs.mask & mask) {\n        if (obs.scope) {\n          p = p.then((lastReturnedValue) => {\n            state.lastReturnValue = lastReturnedValue\n            return obs.callback.apply(obs.scope, [eventData, state])\n          })\n        } else {\n          p = p.then((lastReturnedValue) => {\n            state.lastReturnValue = lastReturnedValue\n            return obs.callback(eventData, state)\n          })\n        }\n        if (obs.unregisterOnNextCall) {\n          this._deferUnregister(obs)\n        }\n      }\n    })\n\n    // return the eventData\n    return p.then(() => {\n      return eventData\n    })\n  }\n\n  /**\n   * Notify a specific observer\n   * @param observer - defines the observer to notify\n   * @param eventData - defines the data to be sent to each callback\n   * @param mask - is used to filter observers defaults to -1\n   */\n  public notifyObserver(\n    observer: Observer<T>,\n    eventData: T,\n    mask: number = -1\n  ): void {\n    const state = this._eventState\n    state.mask = mask\n    state.skipNextObservers = false\n\n    observer.callback(eventData, state)\n  }\n\n  /**\n   * Gets a boolean indicating if the observable has at least one observer\n   * @returns true is the Observable has at least one Observer registered\n   */\n  public hasObservers(): boolean {\n    return this._observers.length > 0\n  }\n\n  /**\n   * Clear the list of observers\n   */\n  public clear(): void {\n    this._observers = new Array<Observer<T>>()\n    this._onObserverAdded = null\n  }\n\n  /**\n   * Clone the current observable\n   * @returns a new observable\n   */\n  public clone(): Observable<T> {\n    const result = new Observable<T>()\n\n    result._observers = this._observers.slice(0)\n\n    return result\n  }\n\n  /**\n   * Does this observable handles observer registered with a given mask\n   * @param mask - defines the mask to be tested\n   * @returns whether or not one observer registered with the given mask is handeled\n   */\n  public hasSpecificMask(mask: number = -1): boolean {\n    for (const obs of this._observers) {\n      if (obs.mask & mask || obs.mask === mask) {\n        return true\n      }\n    }\n    return false\n  }\n\n  private _deferUnregister(observer: Observer<T>): void {\n    observer.unregisterOnNextCall = false\n    observer._willBeUnregistered = true\n    void executeTask(async () => this._remove(observer))\n  }\n\n  // This should only be called when not iterating over _observers to avoid callback skipping.\n  // Removes an observer from the _observer Array.\n  private _remove(observer: null | Observer<T>): boolean {\n    if (!observer) {\n      return false\n    }\n\n    const index = this._observers.indexOf(observer)\n\n    if (index !== -1) {\n      this._observers.splice(index, 1)\n      return true\n    }\n\n    return false\n  }\n}\n","import { EventConstructor } from '../ecs/EventManager'\nimport { Observable } from '../ecs/Observable'\nimport { VideoTexture } from './Components'\nimport { DisposableComponent } from '../ecs/Component'\n\n/**\n * @public\n */\n@EventConstructor()\nexport class UUIDEvent<T = any> {\n  constructor(public readonly uuid: string, public readonly payload: T) {}\n}\n\n/**\n * @public\n */\n@EventConstructor()\nexport class RaycastResponse<T> {\n  constructor(public readonly payload: RaycastResponsePayload<T>) {}\n}\n\n/**\n * @public\n */\n@EventConstructor()\nexport class PointerEvent<GlobalInputEventResult> {\n  constructor(public readonly payload: GlobalInputEventResult) {}\n}\n\nlet internalDcl: DecentralandInterface | void\n\n/**\n * @internal\n * This function generates a callback that is passed to the Observable\n * constructor to subscribe to the events of the DecentralandInterface\n */\nfunction createSubscriber(eventName: keyof IEvents) {\n  return () => {\n    if (internalDcl) {\n      internalDcl.subscribe(eventName)\n    }\n  }\n}\n\n/**\n * This event is triggered when you change your camera between 1st and 3rd person\n * @public\n */\nexport const onCameraModeChangedObservable = new Observable<\n  IEvents['cameraModeChanged']\n>(createSubscriber('cameraModeChanged'))\n\n/**\n * This event is triggered when you change your camera between 1st and 3rd person\n * @public\n */\nexport const onIdleStateChangedObservable = new Observable<\n  IEvents['idleStateChanged']\n>(createSubscriber('idleStateChanged'))\n\n/**\n * These events are triggered after your character enters the scene.\n * @public\n */\nexport const onEnterSceneObservable = new Observable<IEvents['onEnterScene']>(\n  createSubscriber('onEnterScene')\n)\n\n/** @public @deprecated Use onEnterSceneObservable instead. */\nexport const onEnterScene = onEnterSceneObservable\n\n/**\n * These events are triggered after your character leaves the scene.\n * @public\n */\nexport const onLeaveSceneObservable = new Observable<IEvents['onLeaveScene']>(\n  createSubscriber('onLeaveScene')\n)\n\n/** @public @deprecated Use onLeaveSceneObservable instead. */\nexport const onLeaveScene = onLeaveSceneObservable\n\n/**\n * This event is triggered after all the resources of the scene were loaded (models, textures, etc...)\n * @public\n */\nexport const onSceneReadyObservable = new Observable<IEvents['sceneStart']>(\n  createSubscriber('sceneStart')\n)\n\n/**\n * @public\n */\nexport const onPlayerExpressionObservable = new Observable<\n  IEvents['playerExpression']\n>(createSubscriber('playerExpression'))\n\n/**\n * @public\n */\nexport const onPointerLockedStateChange = new Observable<\n  IEvents['onPointerLock']\n>(createSubscriber('onPointerLock'))\n\n/**\n * @public\n */\nexport const onVideoEvent = new Observable<IEvents['videoEvent']>(\n  createSubscriber('videoEvent')\n)\n\n/**\n * @public\n */\nexport const onProfileChanged = new Observable<IEvents['profileChanged']>(\n  createSubscriber('profileChanged')\n)\n\n/**\n * @public\n */\nexport const onPlayerConnectedObservable = new Observable<\n  IEvents['playerConnected']\n>(createSubscriber('playerConnected'))\n\n/**\n * @public\n */\nexport const onPlayerDisconnectedObservable = new Observable<\n  IEvents['playerDisconnected']\n>(createSubscriber('playerDisconnected'))\n\n/**\n * @public\n */\nexport const onRealmChangedObservable = new Observable<\n  IEvents['onRealmChanged']\n>(createSubscriber('onRealmChanged'))\n\n/**\n * @public\n */\nexport const onPlayerClickedObservable = new Observable<\n  IEvents['playerClicked']\n>(createSubscriber('playerClicked'))\n\n/**\n * @internal\n * This function adds _one_ listener to the onEvent event of dcl interface.\n * Leveraging a switch to route events to the Observable handlers.\n */\nexport function _initEventObservables(dcl: DecentralandInterface) {\n  // store internal reference to dcl, it is going to be used to subscribe to the events\n  internalDcl = dcl\n\n  if (internalDcl) {\n    internalDcl.onEvent((event) => {\n      switch (event.type) {\n        case 'onEnterScene': {\n          onEnterSceneObservable.notifyObservers(\n            event.data as IEvents['onEnterScene']\n          )\n          return\n        }\n        case 'onLeaveScene': {\n          onLeaveSceneObservable.notifyObservers(\n            event.data as IEvents['onLeaveScene']\n          )\n          return\n        }\n        case 'cameraModeChanged': {\n          onCameraModeChangedObservable.notifyObservers(\n            event.data as IEvents['cameraModeChanged']\n          )\n          return\n        }\n        case 'idleStateChanged': {\n          onIdleStateChangedObservable.notifyObservers(\n            event.data as IEvents['idleStateChanged']\n          )\n          return\n        }\n        case 'sceneStart': {\n          onSceneReadyObservable.notifyObservers(\n            event.data as IEvents['sceneStart']\n          )\n          return\n        }\n        case 'playerExpression': {\n          onPlayerExpressionObservable.notifyObservers(\n            event.data as IEvents['playerExpression']\n          )\n          return\n        }\n        case 'videoEvent': {\n          const videoData = event.data as IEvents['videoEvent']\n          const component = DisposableComponent.engine.disposableComponents[\n            videoData.componentId\n          ] as VideoTexture\n          if (component) {\n            component.update(videoData)\n          }\n          onVideoEvent.notifyObservers(videoData)\n          return\n        }\n        case 'profileChanged': {\n          onProfileChanged.notifyObservers(\n            event.data as IEvents['profileChanged']\n          )\n          return\n        }\n        case 'onPointerLock': {\n          onPointerLockedStateChange.notifyObservers(\n            event.data as IEvents['onPointerLock']\n          )\n          return\n        }\n        case 'playerConnected': {\n          onPlayerConnectedObservable.notifyObservers(\n            event.data as IEvents['playerConnected']\n          )\n          return\n        }\n        case 'playerDisconnected': {\n          onPlayerDisconnectedObservable.notifyObservers(\n            event.data as IEvents['playerDisconnected']\n          )\n          return\n        }\n        case 'onRealmChanged': {\n          onRealmChangedObservable.notifyObservers(\n            event.data as IEvents['onRealmChanged']\n          )\n          return\n        }\n        case 'playerClicked': {\n          onPlayerClickedObservable.notifyObservers(\n            event.data as IEvents['playerClicked']\n          )\n          return\n        }\n      }\n    })\n  }\n}\n","import {\n  DisposableComponentCreated,\n  DisposableComponentRemoved,\n  DisposableComponentUpdated,\n  getComponentClassId,\n  getComponentId,\n  isDisposableComponent,\n  ObservableComponent\n} from '../ecs/Component'\nimport { Engine } from '../ecs/Engine'\nimport {\n  ComponentAdded,\n  ComponentRemoved,\n  IEntity,\n  ISystem,\n  ParentChanged\n} from '../ecs/IEntity'\nimport { UUIDEvent, PointerEvent, RaycastResponse } from './Events'\nimport { RaycastHitEntities, RaycastHitEntity } from './PhysicsCast'\n\n// This number is defined in the protocol ECS.SetEntityParent.3\nconst ROOT_ENTITY_ID = '0'\n\nexport class DecentralandSynchronizationSystem implements ISystem {\n  cachedComponents: Record<string, Record<string, string>> = {}\n  engine!: Engine\n\n  constructor(public dcl: DecentralandInterface) {}\n\n  activate(engine: Engine) {\n    this.engine = engine\n    engine.eventManager.addListener(ComponentAdded, this, this.componentAdded)\n    engine.eventManager.addListener(\n      ComponentRemoved,\n      this,\n      this.componentRemoved\n    )\n    engine.eventManager.addListener(\n      DisposableComponentCreated,\n      this,\n      this.disposableComponentCreated\n    )\n    engine.eventManager.addListener(\n      DisposableComponentRemoved,\n      this,\n      this.disposableComponentRemoved\n    )\n    engine.eventManager.addListener(\n      DisposableComponentUpdated,\n      this,\n      this.disposableComponentUpdated\n    )\n    engine.eventManager.addListener(ParentChanged, this, this.parentChanged)\n\n    const rootId = engine.rootEntity.uuid\n\n    this.dcl.addEntity(rootId)\n\n    // TODO(agus): send disposableComponents if exist\n\n    this.dcl.onUpdate((dt) => {\n      engine.update(dt)\n      this.presentEntities()\n    })\n\n    this.dcl.onEvent((event) => {\n      const data = event.data as any\n      switch (event.type) {\n        case 'uuidEvent':\n          engine.eventManager.fireEvent(new UUIDEvent(data.uuid, data.payload))\n          break\n        case 'raycastResponse':\n          if (data.queryType === 'HitFirst') {\n            engine.eventManager.fireEvent(\n              new RaycastResponse<RaycastHitEntity>(data)\n            )\n          } else if (data.queryType === 'HitAll') {\n            engine.eventManager.fireEvent(\n              new RaycastResponse<RaycastHitEntities>(data)\n            )\n          }\n          break\n        case 'actionButtonEvent':\n          engine.eventManager.fireEvent(new PointerEvent(data.payload))\n          break\n      }\n    })\n  }\n\n  /**\n   * system.onAddEntity is called by the engine when a entity is added to the\n   * engine.\n   */\n  onAddEntity(entity: IEntity) {\n    if (entity && entity.isAddedToEngine()) {\n      const entityId = entity.uuid\n      const parent = entity.getParent()\n\n      this.dcl.addEntity(entityId)\n\n      if (parent) {\n        // If the entity has a parent, we send the the enparenting signal\n        // otherwise the engine will know the entity is set as a child of\n        // engine.rootEntity by default\n        this.dcl.setParent(entityId, parent.uuid)\n      }\n\n      // This creates a cache dictionary to avoid send redundant information to\n      // the engine in order to avoid unnecessary work in the main thread.\n      this.cachedComponents[entityId] = {}\n\n      // this iterator sends the current components of te engine at the moment\n      // of addition\n      for (const componentName in entity.components) {\n        const component = entity.components[componentName]\n        const classId = getComponentClassId(component)\n\n        if (classId !== null) {\n          if (isDisposableComponent(component)) {\n            // Send the attach component signal\n            this.dcl.attachEntityComponent(\n              entity.uuid,\n              componentName,\n              getComponentId(component)\n            )\n          } else {\n            const componentJson: string = JSON.stringify(component)\n\n            // Send the updated component\n            this.dcl.updateEntityComponent(\n              entityId,\n              componentName,\n              classId,\n              componentJson\n            )\n\n            // Update the cached copy of the sent component\n            this.cachedComponents[entityId][componentName] = componentJson\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * system.onRemoveEntity is called by the engine when a entity gets removed\n   * from the engine.\n   */\n  onRemoveEntity(entity: IEntity) {\n    if (entity.isAddedToEngine()) {\n      const entityId = entity.uuid\n\n      // Send the removeEntity signal\n      this.dcl.removeEntity(entityId)\n\n      // Remove the caches from local memory\n      delete this.cachedComponents[entityId]\n    }\n  }\n\n  /**\n   * This method is called at the end of every update cycle.\n   * It finds and sends updates in components of the engine entities.\n   */\n  private presentEntities() {\n    for (const i in this.engine.entities) {\n      const entity = this.engine.entities[i]\n\n      for (const componentName in entity.components) {\n        const component = entity.components[componentName]\n        const classId = getComponentClassId(component)\n\n        if (classId !== null && !isDisposableComponent(component)) {\n          const jsonRepresentation = this.getJsonIfDirty(\n            entity.uuid,\n            componentName,\n            component\n          )\n          if (jsonRepresentation) {\n            // Send the updated component\n            this.dcl.updateEntityComponent(\n              entity.uuid,\n              componentName,\n              classId,\n              jsonRepresentation\n            )\n            this.clearDirty(\n              entity.uuid,\n              componentName,\n              component,\n              jsonRepresentation\n            )\n          }\n        }\n      }\n    }\n\n    for (const id in this.engine.disposableComponents) {\n      const component = this.engine.disposableComponents[id]\n      if (component instanceof ObservableComponent && component.dirty) {\n        this.dcl.componentUpdated(id, JSON.stringify(component))\n        component.dirty = false\n      }\n    }\n  }\n\n  /**\n   * This method is called after a component is added to an entity. The event\n   * (param 1) contains the necessary information to notify the engine about the\n   * component that was added and the entity.\n   */\n  private componentAdded(event: ComponentAdded) {\n    if (event.entity.isAddedToEngine()) {\n      const component = event.entity.components[event.componentName]\n\n      if (isDisposableComponent(component)) {\n        this.dcl.attachEntityComponent(\n          event.entity.uuid,\n          event.componentName,\n          getComponentId(component)\n        )\n      } else if (event.classId !== null) {\n        const componentJson: string = JSON.stringify(component)\n\n        // Send the updated component\n        this.dcl.updateEntityComponent(\n          event.entity.uuid,\n          event.componentName,\n          event.classId,\n          componentJson\n        )\n\n        // Update the cached copy of the sent component\n        this.cachedComponents[event.entity.uuid][event.componentName] =\n          componentJson\n      }\n    }\n  }\n\n  /**\n   * This method is called when a component is removed from an entity.\n   */\n  private componentRemoved(event: ComponentRemoved) {\n    if (event.entity.isAddedToEngine()) {\n      this.dcl.removeEntityComponent(event.entity.uuid, event.componentName)\n\n      // Remove the cached component so we can send it again when re-adding\n      delete this.cachedComponents[event.entity.uuid][event.componentName]\n    }\n  }\n\n  /**\n   * This method is called after a disposableComponent is created.\n   * It instantiates the component in the engine, the event that updates the\n   * created component is fired immediatly after.\n   */\n  private disposableComponentCreated(event: DisposableComponentCreated) {\n    this.dcl.componentCreated(\n      event.componentId,\n      event.componentName,\n      event.classId\n    )\n  }\n\n  /**\n   * This method is called after a disposableComponent is updated, once per\n   * update cycle and once after creation.\n   */\n  private disposableComponentRemoved(event: DisposableComponentRemoved) {\n    this.dcl.componentDisposed(event.componentId)\n  }\n\n  /**\n   * This method is called right after a diposableComponent gets disposed. That\n   * process is manual.\n   *\n   * TODO(menduz,dani): What happens if a disposableComponent gets disposed and\n   * it remains attached to some entities?\n   */\n  private disposableComponentUpdated(event: DisposableComponentUpdated) {\n    this.dcl.componentUpdated(\n      event.componentId,\n      JSON.stringify(event.component)\n    )\n  }\n\n  /**\n   * This method is called when a parent changes in an entity.\n   */\n  private parentChanged(event: ParentChanged) {\n    this.dcl.setParent(\n      event.entity.uuid,\n      event.parent ? event.parent.uuid : ROOT_ENTITY_ID\n    )\n  }\n\n  private getJsonIfDirty(\n    entityId: string,\n    componentName: string,\n    component: any\n  ): false | string {\n    const jsonRepresentation = JSON.stringify(component)\n    return (\n      jsonRepresentation !== this.cachedComponents[entityId][componentName] &&\n      jsonRepresentation\n    )\n  }\n\n  private clearDirty(\n    entityId: string,\n    componentName: string,\n    component: any,\n    jsonRepresentation: string\n  ) {\n    this.cachedComponents[entityId][componentName] = jsonRepresentation\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RAD2DEG = exports.DEG2RAD = exports.Epsilon = exports.ToLinearSpace = exports.ToGammaSpace = exports.Space = exports.Orientation = void 0;\n/**\n * Defines potential orientation for back face culling\n * @public\n */\nvar Orientation;\n(function (Orientation) {\n    /**\n     * Clockwise\n     */\n    Orientation[Orientation[\"CW\"] = 0] = \"CW\";\n    /** Counter clockwise */\n    Orientation[Orientation[\"CCW\"] = 1] = \"CCW\";\n})(Orientation = exports.Orientation || (exports.Orientation = {}));\n/**\n * Defines supported spaces\n * @public\n */\nvar Space;\n(function (Space) {\n    /** Local (object) space */\n    Space[Space[\"LOCAL\"] = 0] = \"LOCAL\";\n    /** World space */\n    Space[Space[\"WORLD\"] = 1] = \"WORLD\";\n    /** Bone space */\n    Space[Space[\"BONE\"] = 2] = \"BONE\";\n})(Space = exports.Space || (exports.Space = {}));\n/**\n * Constant used to convert a value to gamma space\n * @public\n */\nexports.ToGammaSpace = 1 / 2.2;\n/**\n * Constant used to convert a value to linear space\n * @public\n */\nexports.ToLinearSpace = 2.2;\n/**\n * Constant used to define the minimal number value in Babylon.js\n * @public\n */\nexports.Epsilon = 0.000001;\n/**\n * Constant used to convert from Euler degrees to radians\n * @public\n */\nexports.DEG2RAD = Math.PI / 180;\n/**\n * Constant used to convert from radians to Euler degrees\n * @public\n */\nexports.RAD2DEG = 360 / (Math.PI * 2);\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildArray = void 0;\n/**\n * @internal\n * Returns an array of the given size filled with element built from the given constructor and the paramters\n * @param size - the number of element to construct and put in the array\n * @param itemBuilder - a callback responsible for creating new instance of item. Called once per array entry.\n * @returns a new array filled with new objects\n * @internal\n */\nfunction buildArray(size, itemBuilder) {\n    const a = [];\n    for (let i = 0; i < size; ++i) {\n        a.push(itemBuilder());\n    }\n    return a;\n}\nexports.buildArray = buildArray;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Scalar = void 0;\n/**\n * Scalar computation library\n * @public\n */\nclass Scalar {\n    /**\n     * Boolean : true if the absolute difference between a and b is lower than epsilon (default = 1.401298E-45)\n     * @param a - number\n     * @param b - number\n     * @param epsilon - (default = 1.401298E-45)\n     * @returns true if the absolute difference between a and b is lower than epsilon (default = 1.401298E-45)\n     */\n    static WithinEpsilon(a, b, epsilon = 1.401298e-45) {\n        const num = a - b;\n        return -epsilon <= num && num <= epsilon;\n    }\n    /**\n     * Returns a string : the upper case translation of the number i to hexadecimal.\n     * @param i - number\n     * @returns the upper case translation of the number i to hexadecimal.\n     */\n    static ToHex(i) {\n        const str = i.toString(16);\n        if (i <= 15) {\n            return ('0' + str).toUpperCase();\n        }\n        return str.toUpperCase();\n    }\n    /**\n     * Returns -1 if value is negative and +1 is value is positive.\n     * @param _value - the value\n     * @returns the value itself if it's equal to zero.\n     */\n    static Sign(value) {\n        const _value = +value; // convert to a number\n        if (_value === 0 || isNaN(_value)) {\n            return _value;\n        }\n        return _value > 0 ? 1 : -1;\n    }\n    /**\n     * Returns the value itself if it's between min and max.\n     * Returns min if the value is lower than min.\n     * Returns max if the value is greater than max.\n     * @param value - the value to clmap\n     * @param min - the min value to clamp to (default: 0)\n     * @param max - the max value to clamp to (default: 1)\n     * @returns the clamped value\n     */\n    static Clamp(value, min = 0, max = 1) {\n        return Math.min(max, Math.max(min, value));\n    }\n    /**\n     * the log2 of value.\n     * @param value - the value to compute log2 of\n     * @returns the log2 of value.\n     */\n    static Log2(value) {\n        return Math.log(value) * Math.LOG2E;\n    }\n    /**\n     * Loops the value, so that it is never larger than length and never smaller than 0.\n     *\n     * This is similar to the modulo operator but it works with floating point numbers.\n     * For example, using 3.0 for t and 2.5 for length, the result would be 0.5.\n     * With t = 5 and length = 2.5, the result would be 0.0.\n     * Note, however, that the behaviour is not defined for negative numbers as it is for the modulo operator\n     * @param value - the value\n     * @param length - the length\n     * @returns the looped value\n     */\n    static Repeat(value, length) {\n        return value - Math.floor(value / length) * length;\n    }\n    /**\n     * Normalize the value between 0.0 and 1.0 using min and max values\n     * @param value - value to normalize\n     * @param min - max to normalize between\n     * @param max - min to normalize between\n     * @returns the normalized value\n     */\n    static Normalize(value, min, max) {\n        return (value - min) / (max - min);\n    }\n    /**\n     * Denormalize the value from 0.0 and 1.0 using min and max values\n     * @param normalized - value to denormalize\n     * @param min - max to denormalize between\n     * @param max - min to denormalize between\n     * @returns the denormalized value\n     */\n    static Denormalize(normalized, min, max) {\n        return normalized * (max - min) + min;\n    }\n    /**\n     * Calculates the shortest difference between two given angles given in degrees.\n     * @param current - current angle in degrees\n     * @param target - target angle in degrees\n     * @returns the delta\n     */\n    static DeltaAngle(current, target) {\n        let num = Scalar.Repeat(target - current, 360.0);\n        if (num > 180.0) {\n            num -= 360.0;\n        }\n        return num;\n    }\n    /**\n     * PingPongs the value t, so that it is never larger than length and never smaller than 0.\n     * @param tx - value\n     * @param length - length\n     * @returns The returned value will move back and forth between 0 and length\n     */\n    static PingPong(tx, length) {\n        const t = Scalar.Repeat(tx, length * 2.0);\n        return length - Math.abs(t - length);\n    }\n    /**\n     * Interpolates between min and max with smoothing at the limits.\n     *\n     * This function interpolates between min and max in a similar way to Lerp. However, the interpolation will gradually speed up\n     * from the start and slow down toward the end. This is useful for creating natural-looking animation, fading and other transitions.\n     * @param from - from\n     * @param to - to\n     * @param tx - value\n     * @returns the smooth stepped value\n     */\n    static SmoothStep(from, to, tx) {\n        let t = Scalar.Clamp(tx);\n        t = -2.0 * t * t * t + 3.0 * t * t;\n        return to * t + from * (1.0 - t);\n    }\n    /**\n     * Moves a value current towards target.\n     *\n     * This is essentially the same as Mathf.Lerp but instead the function will ensure that the speed never exceeds maxDelta.\n     * Negative values of maxDelta pushes the value away from target.\n     * @param current - current value\n     * @param target - target value\n     * @param maxDelta - max distance to move\n     * @returns resulting value\n     */\n    static MoveTowards(current, target, maxDelta) {\n        let result = 0;\n        if (Math.abs(target - current) <= maxDelta) {\n            result = target;\n        }\n        else {\n            result = current + Scalar.Sign(target - current) * maxDelta;\n        }\n        return result;\n    }\n    /**\n     * Same as MoveTowards but makes sure the values interpolate correctly when they wrap around 360 degrees.\n     *\n     * Variables current and target are assumed to be in degrees. For optimization reasons, negative values of maxDelta\n     *  are not supported and may cause oscillation. To push current away from a target angle, add 180 to that angle instead.\n     * @param current - current value\n     * @param target - target value\n     * @param maxDelta - max distance to move\n     * @returns resulting angle\n     */\n    static MoveTowardsAngle(current, target, maxDelta) {\n        const num = Scalar.DeltaAngle(current, target);\n        let result = 0;\n        if (-maxDelta < num && num < maxDelta) {\n            result = target;\n        }\n        else {\n            result = Scalar.MoveTowards(current, current + num, maxDelta);\n        }\n        return result;\n    }\n    /**\n     * Creates a new scalar with values linearly interpolated of \"amount\" between the start scalar and the end scalar.\n     * @param start - start value\n     * @param end - target value\n     * @param amount - amount to lerp between\n     * @returns the lerped value\n     */\n    static Lerp(start, end, amount) {\n        return start + (end - start) * amount;\n    }\n    /**\n     * Same as Lerp but makes sure the values interpolate correctly when they wrap around 360 degrees.\n     * The parameter t is clamped to the range [0, 1]. Variables a and b are assumed to be in degrees.\n     * @param start - start value\n     * @param end - target value\n     * @param amount - amount to lerp between\n     * @returns the lerped value\n     */\n    static LerpAngle(start, end, amount) {\n        let num = Scalar.Repeat(end - start, 360.0);\n        if (num > 180.0) {\n            num -= 360.0;\n        }\n        return start + num * Scalar.Clamp(amount);\n    }\n    /**\n     * Calculates the linear parameter t that produces the interpolant value within the range [a, b].\n     * @param a - start value\n     * @param b - target value\n     * @param value - value between a and b\n     * @returns the inverseLerp value\n     */\n    static InverseLerp(a, b, value) {\n        let result = 0;\n        if (a !== b) {\n            result = Scalar.Clamp((value - a) / (b - a));\n        }\n        else {\n            result = 0.0;\n        }\n        return result;\n    }\n    /**\n     * Returns a new scalar located for \"amount\" (float) on the Hermite spline defined by the scalars \"value1\", \"value3\", \"tangent1\", \"tangent2\".\n     * {@link http://mathworld.wolfram.com/HermitePolynomial.html}\n     * @param value1 - spline value\n     * @param tangent1 - spline value\n     * @param value2 - spline value\n     * @param tangent2 - spline value\n     * @param amount - input value\n     * @returns hermite result\n     */\n    static Hermite(value1, tangent1, value2, tangent2, amount) {\n        const squared = amount * amount;\n        const cubed = amount * squared;\n        const part1 = 2.0 * cubed - 3.0 * squared + 1.0;\n        const part2 = -2.0 * cubed + 3.0 * squared;\n        const part3 = cubed - 2.0 * squared + amount;\n        const part4 = cubed - squared;\n        return value1 * part1 + value2 * part2 + tangent1 * part3 + tangent2 * part4;\n    }\n    /**\n     * Returns a random float number between and min and max values\n     * @param min - min value of random\n     * @param max - max value of random\n     * @returns random value\n     */\n    static RandomRange(min, max) {\n        if (min === max) {\n            return min;\n        }\n        return Math.random() * (max - min) + min;\n    }\n    /**\n     * This function returns percentage of a number in a given range.\n     *\n     * RangeToPercent(40,20,60) will return 0.5 (50%)\n     * RangeToPercent(34,0,100) will return 0.34 (34%)\n     * @param num - to convert to percentage\n     * @param min - min range\n     * @param max - max range\n     * @returns the percentage\n     */\n    static RangeToPercent(num, min, max) {\n        return (num - min) / (max - min);\n    }\n    /**\n     * This function returns number that corresponds to the percentage in a given range.\n     *\n     * PercentToRange(0.34,0,100) will return 34.\n     * @param percent - to convert to number\n     * @param min - min range\n     * @param max - max range\n     * @returns the number\n     */\n    static PercentToRange(percent, min, max) {\n        return (max - min) * percent + min;\n    }\n    /**\n     * Returns the angle converted to equivalent value between -Math.PI and Math.PI radians.\n     * @param angle - The angle to normalize in radian.\n     * @returns The converted angle.\n     */\n    static NormalizeRadians(angle) {\n        // More precise but slower version kept for reference.\n        // tslint:disable:no-commented-out-code\n        /*\n          // angle = angle % Tools.TwoPi;\n          // angle = (angle + Tools.TwoPi) % Tools.TwoPi;\n    \n          //if (angle > Math.PI) {\n          //\tangle -= Tools.TwoPi;\n          //}\n           */\n        return angle - Scalar.TwoPi * Math.floor((angle + Math.PI) / Scalar.TwoPi);\n    }\n}\nexports.Scalar = Scalar;\n/**\n * Two pi constants convenient for computation.\n */\nScalar.TwoPi = Math.PI * 2;\n//# sourceMappingURL=Scalar.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Vector4 = void 0;\nconst types_1 = require(\"./types\");\nconst Scalar_1 = require(\"./Scalar\");\nconst Vector3_1 = require(\"./Vector3\");\n/**\n * Vector4 class created for EulerAngle class conversion to Quaternion\n * @public\n */\nclass Vector4 {\n    /**\n     * Creates a Vector4 object from the given floats.\n     * @param x - x value of the vector\n     * @param y - y value of the vector\n     * @param z - z value of the vector\n     * @param w - w value of the vector\n     */\n    constructor(\n    /** x value of the vector */\n    x, \n    /** y value of the vector */\n    y, \n    /** z value of the vector */\n    z, \n    /** w value of the vector */\n    w) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n    // Statics\n    /**\n     * Returns a new Vector4 as the result of the addition of the two given vectors.\n     * @param vector1 - the first vector\n     * @param vector2 - the second vector\n     * @returns the resulting vector\n     */\n    static Add(vector1, vector2) {\n        return new Vector4(vector1.x, vector1.y, vector1.z, vector1.w).addInPlace(vector2);\n    }\n    /**\n     * Returns a new Vector4 set from the starting index of the given array.\n     * @param array - the array to pull values from\n     * @param offset - the offset into the array to start at\n     * @returns the new vector\n     */\n    static FromArray(array, offset = 0) {\n        return new Vector4(array[offset], array[offset + 1], array[offset + 2], array[offset + 3]);\n    }\n    /**\n     * Updates the given vector \"result\" from the starting index of the given array.\n     * @param array - the array to pull values from\n     * @param offset - the offset into the array to start at\n     * @param result - the vector to store the result in\n     */\n    static FromArrayToRef(array, offset, result) {\n        result.x = array[offset];\n        result.y = array[offset + 1];\n        result.z = array[offset + 2];\n        result.w = array[offset + 3];\n    }\n    /**\n     * Updates the given vector \"result\" from the starting index of the given FloatArray.\n     * @param array - the array to pull values from\n     * @param offset - the offset into the array to start at\n     * @param result - the vector to store the result in\n     */\n    static FromFloatArrayToRef(array, offset, result) {\n        Vector4.FromArrayToRef(array, offset, result);\n    }\n    /**\n     * Updates the given vector \"result\" coordinates from the given floats.\n     * @param x - float to set from\n     * @param y - float to set from\n     * @param z - float to set from\n     * @param w - float to set from\n     * @param result - the vector to the floats in\n     */\n    static FromFloatsToRef(x, y, z, w, result) {\n        result.x = x;\n        result.y = y;\n        result.z = z;\n        result.w = w;\n    }\n    /**\n     * Returns a new Vector4 set to (0.0, 0.0, 0.0, 0.0)\n     * @returns the new vector\n     */\n    static Zero() {\n        return new Vector4(0.0, 0.0, 0.0, 0.0);\n    }\n    /**\n     * Returns a new Vector4 set to (1.0, 1.0, 1.0, 1.0)\n     * @returns the new vector\n     */\n    static One() {\n        return new Vector4(1.0, 1.0, 1.0, 1.0);\n    }\n    /**\n     * Returns a new normalized Vector4 from the given one.\n     * @param vector - the vector to normalize\n     * @returns the vector\n     */\n    static Normalize(vector) {\n        const result = Vector4.Zero();\n        Vector4.NormalizeToRef(vector, result);\n        return result;\n    }\n    /**\n     * Updates the given vector \"result\" from the normalization of the given one.\n     * @param vector - the vector to normalize\n     * @param result - the vector to store the result in\n     */\n    static NormalizeToRef(vector, result) {\n        result.copyFrom(vector);\n        result.normalize();\n    }\n    /**\n     * Returns a vector with the minimum values from the left and right vectors\n     * @param left - left vector to minimize\n     * @param right - right vector to minimize\n     * @returns a new vector with the minimum of the left and right vector values\n     */\n    static Minimize(left, right) {\n        const min = new Vector4(left.x, left.y, left.z, left.w);\n        min.minimizeInPlace(right);\n        return min;\n    }\n    /**\n     * Returns a vector with the maximum values from the left and right vectors\n     * @param left - left vector to maximize\n     * @param right - right vector to maximize\n     * @returns a new vector with the maximum of the left and right vector values\n     */\n    static Maximize(left, right) {\n        const max = new Vector4(left.x, left.y, left.z, left.w);\n        max.maximizeInPlace(right);\n        return max;\n    }\n    /**\n     * Returns the distance (float) between the vectors \"value1\" and \"value2\".\n     * @param value1 - value to calulate the distance between\n     * @param value2 - value to calulate the distance between\n     * @returns the distance between the two vectors\n     */\n    static Distance(value1, value2) {\n        return Math.sqrt(Vector4.DistanceSquared(value1, value2));\n    }\n    /**\n     * Returns the squared distance (float) between the vectors \"value1\" and \"value2\".\n     * @param value1 - value to calulate the distance between\n     * @param value2 - value to calulate the distance between\n     * @returns the distance between the two vectors squared\n     */\n    static DistanceSquared(value1, value2) {\n        const x = value1.x - value2.x;\n        const y = value1.y - value2.y;\n        const z = value1.z - value2.z;\n        const w = value1.w - value2.w;\n        return x * x + y * y + z * z + w * w;\n    }\n    /**\n     * Returns a new Vector4 located at the center between the vectors \"value1\" and \"value2\".\n     * @param value1 - value to calulate the center between\n     * @param value2 - value to calulate the center between\n     * @returns the center between the two vectors\n     */\n    static Center(value1, value2) {\n        const center = Vector4.Add(value1, value2);\n        center.scaleInPlace(0.5);\n        return center;\n    }\n    /**\n     * Returns a new Vector4 set with the result of the normal transformation by the given matrix of the given vector.\n     * This methods computes transformed normalized direction vectors only.\n     * @param vector - the vector to transform\n     * @param transformation - the transformation matrix to apply\n     * @returns the new vector\n     */\n    static TransformNormal(vector, transformation) {\n        const result = Vector4.Zero();\n        Vector4.TransformNormalToRef(vector, transformation, result);\n        return result;\n    }\n    /**\n     * Sets the given vector \"result\" with the result of the normal transformation by the given matrix of the given vector.\n     * This methods computes transformed normalized direction vectors only.\n     * @param vector - the vector to transform\n     * @param transformation - the transformation matrix to apply\n     * @param result - the vector to store the result in\n     */\n    static TransformNormalToRef(vector, transformation, result) {\n        const m = transformation.m;\n        const x = vector.x * m[0] + vector.y * m[4] + vector.z * m[8];\n        const y = vector.x * m[1] + vector.y * m[5] + vector.z * m[9];\n        const z = vector.x * m[2] + vector.y * m[6] + vector.z * m[10];\n        result.x = x;\n        result.y = y;\n        result.z = z;\n        result.w = vector.w;\n    }\n    /**\n     * Sets the given vector \"result\" with the result of the normal transformation by the given matrix of the given floats (x, y, z, w).\n     * This methods computes transformed normalized direction vectors only.\n     * @param x - value to transform\n     * @param y - value to transform\n     * @param z - value to transform\n     * @param w - value to transform\n     * @param transformation - the transformation matrix to apply\n     * @param result - the vector to store the results in\n     */\n    static TransformNormalFromFloatsToRef(x, y, z, w, transformation, result) {\n        const m = transformation.m;\n        result.x = x * m[0] + y * m[4] + z * m[8];\n        result.y = x * m[1] + y * m[5] + z * m[9];\n        result.z = x * m[2] + y * m[6] + z * m[10];\n        result.w = w;\n    }\n    /**\n     * Returns the string with the Vector4 coordinates.\n     * @returns a string containing all the vector values\n     */\n    toString() {\n        return ('{X: ' + this.x + ' Y:' + this.y + ' Z:' + this.z + ' W:' + this.w + '}');\n    }\n    /**\n     * Returns the string \"Vector4\".\n     * @returns \"Vector4\"\n     */\n    getClassName() {\n        return 'Vector4';\n    }\n    /**\n     * Returns the Vector4 hash code.\n     * @returns a unique hash code\n     */\n    getHashCode() {\n        let hash = this.x || 0;\n        hash = (hash * 397) ^ (this.y || 0);\n        hash = (hash * 397) ^ (this.z || 0);\n        hash = (hash * 397) ^ (this.w || 0);\n        return hash;\n    }\n    // Operators\n    /**\n     * Returns a new array populated with 4 elements : the Vector4 coordinates.\n     * @returns the resulting array\n     */\n    asArray() {\n        const result = new Array();\n        this.toArray(result, 0);\n        return result;\n    }\n    /**\n     * Populates the given array from the given index with the Vector4 coordinates.\n     * @param array - array to populate\n     * @param index - index of the array to start at (default: 0)\n     * @returns the Vector4.\n     */\n    toArray(array, index = 0) {\n        array[index] = this.x;\n        array[index + 1] = this.y;\n        array[index + 2] = this.z;\n        array[index + 3] = this.w;\n        return this;\n    }\n    /**\n     * Adds the given vector to the current Vector4.\n     * @param otherVector - the vector to add\n     * @returns the updated Vector4.\n     */\n    addInPlace(otherVector) {\n        this.x += otherVector.x;\n        this.y += otherVector.y;\n        this.z += otherVector.z;\n        this.w += otherVector.w;\n        return this;\n    }\n    /**\n     * Returns a new Vector4 as the result of the addition of the current Vector4 and the given one.\n     * @param otherVector - the vector to add\n     * @returns the resulting vector\n     */\n    add(otherVector) {\n        return new Vector4(this.x + otherVector.x, this.y + otherVector.y, this.z + otherVector.z, this.w + otherVector.w);\n    }\n    /**\n     * Updates the given vector \"result\" with the result of the addition of the current Vector4 and the given one.\n     * @param otherVector - the vector to add\n     * @param result - the vector to store the result\n     * @returns the current Vector4.\n     */\n    addToRef(otherVector, result) {\n        result.x = this.x + otherVector.x;\n        result.y = this.y + otherVector.y;\n        result.z = this.z + otherVector.z;\n        result.w = this.w + otherVector.w;\n        return this;\n    }\n    /**\n     * Subtract in place the given vector from the current Vector4.\n     * @param otherVector - the vector to subtract\n     * @returns the updated Vector4.\n     */\n    subtractInPlace(otherVector) {\n        this.x -= otherVector.x;\n        this.y -= otherVector.y;\n        this.z -= otherVector.z;\n        this.w -= otherVector.w;\n        return this;\n    }\n    /**\n     * Returns a new Vector4 with the result of the subtraction of the given vector from the current Vector4.\n     * @param otherVector - the vector to add\n     * @returns the new vector with the result\n     */\n    subtract(otherVector) {\n        return new Vector4(this.x - otherVector.x, this.y - otherVector.y, this.z - otherVector.z, this.w - otherVector.w);\n    }\n    /**\n     * Sets the given vector \"result\" with the result of the subtraction of the given vector from the current Vector4.\n     * @param otherVector - the vector to subtract\n     * @param result - the vector to store the result\n     * @returns the current Vector4.\n     */\n    subtractToRef(otherVector, result) {\n        result.x = this.x - otherVector.x;\n        result.y = this.y - otherVector.y;\n        result.z = this.z - otherVector.z;\n        result.w = this.w - otherVector.w;\n        return this;\n    }\n    /**\n     * Returns a new Vector4 set with the result of the subtraction of the given floats from the current Vector4 coordinates.\n     */\n    /**\n     * Returns a new Vector4 set with the result of the subtraction of the given floats from the current Vector4 coordinates.\n     * @param x - value to subtract\n     * @param y - value to subtract\n     * @param z - value to subtract\n     * @param w - value to subtract\n     * @returns new vector containing the result\n     */\n    subtractFromFloats(x, y, z, w) {\n        return new Vector4(this.x - x, this.y - y, this.z - z, this.w - w);\n    }\n    /**\n     * Sets the given vector \"result\" set with the result of the subtraction of the given floats from the current Vector4 coordinates.\n     * @param x - value to subtract\n     * @param y - value to subtract\n     * @param z - value to subtract\n     * @param w - value to subtract\n     * @param result - the vector to store the result in\n     * @returns the current Vector4.\n     */\n    subtractFromFloatsToRef(x, y, z, w, result) {\n        result.x = this.x - x;\n        result.y = this.y - y;\n        result.z = this.z - z;\n        result.w = this.w - w;\n        return this;\n    }\n    /**\n     * Returns a new Vector4 set with the current Vector4 negated coordinates.\n     * @returns a new vector with the negated values\n     */\n    negate() {\n        return new Vector4(-this.x, -this.y, -this.z, -this.w);\n    }\n    /**\n     * Multiplies the current Vector4 coordinates by scale (float).\n     * @param scale - the number to scale with\n     * @returns the updated Vector4.\n     */\n    scaleInPlace(scale) {\n        this.x *= scale;\n        this.y *= scale;\n        this.z *= scale;\n        this.w *= scale;\n        return this;\n    }\n    /**\n     * Returns a new Vector4 set with the current Vector4 coordinates multiplied by scale (float).\n     * @param scale - the number to scale with\n     * @returns a new vector with the result\n     */\n    scale(scale) {\n        return new Vector4(this.x * scale, this.y * scale, this.z * scale, this.w * scale);\n    }\n    /**\n     * Sets the given vector \"result\" with the current Vector4 coordinates multiplied by scale (float).\n     * @param scale - the number to scale with\n     * @param result - a vector to store the result in\n     * @returns the current Vector4.\n     */\n    scaleToRef(scale, result) {\n        result.x = this.x * scale;\n        result.y = this.y * scale;\n        result.z = this.z * scale;\n        result.w = this.w * scale;\n        return this;\n    }\n    /**\n     * Scale the current Vector4 values by a factor and add the result to a given Vector4\n     * @param scale - defines the scale factor\n     * @param result - defines the Vector4 object where to store the result\n     * @returns the unmodified current Vector4\n     */\n    scaleAndAddToRef(scale, result) {\n        result.x += this.x * scale;\n        result.y += this.y * scale;\n        result.z += this.z * scale;\n        result.w += this.w * scale;\n        return this;\n    }\n    /**\n     * Boolean : True if the current Vector4 coordinates are stricly equal to the given ones.\n     * @param otherVector - the vector to compare against\n     * @returns true if they are equal\n     */\n    equals(otherVector) {\n        return (otherVector &&\n            this.x === otherVector.x &&\n            this.y === otherVector.y &&\n            this.z === otherVector.z &&\n            this.w === otherVector.w);\n    }\n    /**\n     * Boolean : True if the current Vector4 coordinates are each beneath the distance \"epsilon\" from the given vector ones.\n     * @param otherVector - vector to compare against\n     * @param epsilon - (Default: very small number)\n     * @returns true if they are equal\n     */\n    equalsWithEpsilon(otherVector, epsilon = types_1.Epsilon) {\n        return (otherVector &&\n            Scalar_1.Scalar.WithinEpsilon(this.x, otherVector.x, epsilon) &&\n            Scalar_1.Scalar.WithinEpsilon(this.y, otherVector.y, epsilon) &&\n            Scalar_1.Scalar.WithinEpsilon(this.z, otherVector.z, epsilon) &&\n            Scalar_1.Scalar.WithinEpsilon(this.w, otherVector.w, epsilon));\n    }\n    /**\n     * Boolean : True if the given floats are strictly equal to the current Vector4 coordinates.\n     * @param x - x value to compare against\n     * @param y - y value to compare against\n     * @param z - z value to compare against\n     * @param w - w value to compare against\n     * @returns true if equal\n     */\n    equalsToFloats(x, y, z, w) {\n        return this.x === x && this.y === y && this.z === z && this.w === w;\n    }\n    /**\n     * Multiplies in place the current Vector4 by the given one.\n     * @param otherVector - vector to multiple with\n     * @returns the updated Vector4.\n     */\n    multiplyInPlace(otherVector) {\n        this.x *= otherVector.x;\n        this.y *= otherVector.y;\n        this.z *= otherVector.z;\n        this.w *= otherVector.w;\n        return this;\n    }\n    /**\n     * Returns a new Vector4 set with the multiplication result of the current Vector4 and the given one.\n     * @param otherVector - vector to multiple with\n     * @returns resulting new vector\n     */\n    multiply(otherVector) {\n        return new Vector4(this.x * otherVector.x, this.y * otherVector.y, this.z * otherVector.z, this.w * otherVector.w);\n    }\n    /**\n     * Updates the given vector \"result\" with the multiplication result of the current Vector4 and the given one.\n     * @param otherVector - vector to multiple with\n     * @param result - vector to store the result\n     * @returns the current Vector4.\n     */\n    multiplyToRef(otherVector, result) {\n        result.x = this.x * otherVector.x;\n        result.y = this.y * otherVector.y;\n        result.z = this.z * otherVector.z;\n        result.w = this.w * otherVector.w;\n        return this;\n    }\n    /**\n     * Returns a new Vector4 set with the multiplication result of the given floats and the current Vector4 coordinates.\n     * @param x - x value multiply with\n     * @param y - y value multiply with\n     * @param z - z value multiply with\n     * @param w - w value multiply with\n     * @returns resulting new vector\n     */\n    multiplyByFloats(x, y, z, w) {\n        return new Vector4(this.x * x, this.y * y, this.z * z, this.w * w);\n    }\n    /**\n     * Returns a new Vector4 set with the division result of the current Vector4 by the given one.\n     * @param otherVector - vector to devide with\n     * @returns resulting new vector\n     */\n    divide(otherVector) {\n        return new Vector4(this.x / otherVector.x, this.y / otherVector.y, this.z / otherVector.z, this.w / otherVector.w);\n    }\n    /**\n     * Updates the given vector \"result\" with the division result of the current Vector4 by the given one.\n     * @param otherVector - vector to devide with\n     * @param result - vector to store the result\n     * @returns the current Vector4.\n     */\n    divideToRef(otherVector, result) {\n        result.x = this.x / otherVector.x;\n        result.y = this.y / otherVector.y;\n        result.z = this.z / otherVector.z;\n        result.w = this.w / otherVector.w;\n        return this;\n    }\n    /**\n     * Divides the current Vector3 coordinates by the given ones.\n     * @param otherVector - vector to devide with\n     * @returns the updated Vector3.\n     */\n    divideInPlace(otherVector) {\n        return this.divideToRef(otherVector, this);\n    }\n    /**\n     * Updates the Vector4 coordinates with the minimum values between its own and the given vector ones\n     * @param other - defines the second operand\n     * @returns the current updated Vector4\n     */\n    minimizeInPlace(other) {\n        if (other.x < this.x) {\n            this.x = other.x;\n        }\n        if (other.y < this.y) {\n            this.y = other.y;\n        }\n        if (other.z < this.z) {\n            this.z = other.z;\n        }\n        if (other.w < this.w) {\n            this.w = other.w;\n        }\n        return this;\n    }\n    /**\n     * Updates the Vector4 coordinates with the maximum values between its own and the given vector ones\n     * @param other - defines the second operand\n     * @returns the current updated Vector4\n     */\n    maximizeInPlace(other) {\n        if (other.x > this.x) {\n            this.x = other.x;\n        }\n        if (other.y > this.y) {\n            this.y = other.y;\n        }\n        if (other.z > this.z) {\n            this.z = other.z;\n        }\n        if (other.w > this.w) {\n            this.w = other.w;\n        }\n        return this;\n    }\n    /**\n     * Gets a new Vector4 from current Vector4 floored values\n     * @returns a new Vector4\n     */\n    floor() {\n        return new Vector4(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z), Math.floor(this.w));\n    }\n    /**\n     * Gets a new Vector4 from current Vector3 floored values\n     * @returns a new Vector4\n     */\n    fract() {\n        return new Vector4(this.x - Math.floor(this.x), this.y - Math.floor(this.y), this.z - Math.floor(this.z), this.w - Math.floor(this.w));\n    }\n    // Properties\n    /**\n     * Returns the Vector4 length (float).\n     * @returns the length\n     */\n    length() {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    }\n    /**\n     * Returns the Vector4 squared length (float).\n     * @returns the length squared\n     */\n    lengthSquared() {\n        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n    }\n    // Methods\n    /**\n     * Normalizes in place the Vector4.\n     * @returns the updated Vector4.\n     */\n    normalize() {\n        const len = this.length();\n        if (len === 0) {\n            return this;\n        }\n        return this.scaleInPlace(1.0 / len);\n    }\n    /**\n     * Returns a new Vector3 from the Vector4 (x, y, z) coordinates.\n     * @returns this converted to a new vector3\n     */\n    toVector3() {\n        return new Vector3_1.Vector3(this.x, this.y, this.z);\n    }\n    /**\n     * Returns a new Vector4 copied from the current one.\n     * @returns the new cloned vector\n     */\n    clone() {\n        return new Vector4(this.x, this.y, this.z, this.w);\n    }\n    /**\n     * Updates the current Vector4 with the given one coordinates.\n     * @param source - the source vector to copy from\n     * @returns the updated Vector4.\n     */\n    copyFrom(source) {\n        this.x = source.x;\n        this.y = source.y;\n        this.z = source.z;\n        this.w = source.w;\n        return this;\n    }\n    /**\n     * Updates the current Vector4 coordinates with the given floats.\n     * @param x - float to copy from\n     * @param y - float to copy from\n     * @param z - float to copy from\n     * @param w - float to copy from\n     * @returns the updated Vector4.\n     */\n    copyFromFloats(x, y, z, w) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n        return this;\n    }\n    /**\n     * Updates the current Vector4 coordinates with the given floats.\n     * @param x - float to set from\n     * @param y - float to set from\n     * @param z - float to set from\n     * @param w - float to set from\n     * @returns the updated Vector4.\n     */\n    set(x, y, z, w) {\n        return this.copyFromFloats(x, y, z, w);\n    }\n    /**\n     * Copies the given float to the current Vector3 coordinates\n     * @param v - defines the x, y, z and w coordinates of the operand\n     * @returns the current updated Vector3\n     */\n    setAll(v) {\n        this.x = this.y = this.z = this.w = v;\n        return this;\n    }\n}\nexports.Vector4 = Vector4;\n//# sourceMappingURL=Vector4.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Matrix = void 0;\nconst Vector3_1 = require(\"./Vector3\");\nconst Quaternion_1 = require(\"./Quaternion\");\nconst preallocatedVariables_1 = require(\"./preallocatedVariables\");\nconst Vector4_1 = require(\"./Vector4\");\n/**\n * Class used to store matrix data (4x4)\n * @public\n */\nclass Matrix {\n    /**\n     * Creates an empty matrix (filled with zeros)\n     */\n    constructor() {\n        this._isIdentity = false;\n        this._isIdentityDirty = true;\n        this._isIdentity3x2 = true;\n        this._isIdentity3x2Dirty = true;\n        this._m = [\n            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n        ];\n        this._updateIdentityStatus(false);\n    }\n    /**\n     * Gets the internal data of the matrix\n     */\n    get m() {\n        return this._m;\n    }\n    /**\n     * Gets an identity matrix that must not be updated\n     */\n    static get IdentityReadOnly() {\n        return Matrix._identityReadOnly;\n    }\n    // Statics\n    /**\n     * Creates a matrix from an array\n     * @param array - defines the source array\n     * @param offset - defines an offset in the source array\n     * @returns a new Matrix set from the starting index of the given array\n     */\n    static FromArray(array, offset = 0) {\n        const result = new Matrix();\n        Matrix.FromArrayToRef(array, offset, result);\n        return result;\n    }\n    /**\n     * Copy the content of an array into a given matrix\n     * @param array - defines the source array\n     * @param offset - defines an offset in the source array\n     * @param result - defines the target matrix\n     */\n    static FromArrayToRef(array, offset, result) {\n        for (let index = 0; index < 16; index++) {\n            result._m[index] = array[index + offset];\n        }\n        result._markAsUpdated();\n    }\n    /**\n     * Stores an array into a matrix after having multiplied each component by a given factor\n     * @param array - defines the source array\n     * @param offset - defines the offset in the source array\n     * @param scale - defines the scaling factor\n     * @param result - defines the target matrix\n     */\n    static FromFloatArrayToRefScaled(array, offset, scale, result) {\n        for (let index = 0; index < 16; index++) {\n            result._m[index] = array[index + offset] * scale;\n        }\n        result._markAsUpdated();\n    }\n    /**\n     * Stores a list of values (16) inside a given matrix\n     * @param initialM11 - defines 1st value of 1st row\n     * @param initialM12 - defines 2nd value of 1st row\n     * @param initialM13 - defines 3rd value of 1st row\n     * @param initialM14 - defines 4th value of 1st row\n     * @param initialM21 - defines 1st value of 2nd row\n     * @param initialM22 - defines 2nd value of 2nd row\n     * @param initialM23 - defines 3rd value of 2nd row\n     * @param initialM24 - defines 4th value of 2nd row\n     * @param initialM31 - defines 1st value of 3rd row\n     * @param initialM32 - defines 2nd value of 3rd row\n     * @param initialM33 - defines 3rd value of 3rd row\n     * @param initialM34 - defines 4th value of 3rd row\n     * @param initialM41 - defines 1st value of 4th row\n     * @param initialM42 - defines 2nd value of 4th row\n     * @param initialM43 - defines 3rd value of 4th row\n     * @param initialM44 - defines 4th value of 4th row\n     * @param result - defines the target matrix\n     */\n    static FromValuesToRef(initialM11, initialM12, initialM13, initialM14, initialM21, initialM22, initialM23, initialM24, initialM31, initialM32, initialM33, initialM34, initialM41, initialM42, initialM43, initialM44, result) {\n        const m = result._m;\n        m[0] = initialM11;\n        m[1] = initialM12;\n        m[2] = initialM13;\n        m[3] = initialM14;\n        m[4] = initialM21;\n        m[5] = initialM22;\n        m[6] = initialM23;\n        m[7] = initialM24;\n        m[8] = initialM31;\n        m[9] = initialM32;\n        m[10] = initialM33;\n        m[11] = initialM34;\n        m[12] = initialM41;\n        m[13] = initialM42;\n        m[14] = initialM43;\n        m[15] = initialM44;\n        result._markAsUpdated();\n    }\n    /**\n     * Creates new matrix from a list of values (16)\n     * @param initialM11 - defines 1st value of 1st row\n     * @param initialM12 - defines 2nd value of 1st row\n     * @param initialM13 - defines 3rd value of 1st row\n     * @param initialM14 - defines 4th value of 1st row\n     * @param initialM21 - defines 1st value of 2nd row\n     * @param initialM22 - defines 2nd value of 2nd row\n     * @param initialM23 - defines 3rd value of 2nd row\n     * @param initialM24 - defines 4th value of 2nd row\n     * @param initialM31 - defines 1st value of 3rd row\n     * @param initialM32 - defines 2nd value of 3rd row\n     * @param initialM33 - defines 3rd value of 3rd row\n     * @param initialM34 - defines 4th value of 3rd row\n     * @param initialM41 - defines 1st value of 4th row\n     * @param initialM42 - defines 2nd value of 4th row\n     * @param initialM43 - defines 3rd value of 4th row\n     * @param initialM44 - defines 4th value of 4th row\n     * @returns the new matrix\n     */\n    static FromValues(initialM11, initialM12, initialM13, initialM14, initialM21, initialM22, initialM23, initialM24, initialM31, initialM32, initialM33, initialM34, initialM41, initialM42, initialM43, initialM44) {\n        const result = new Matrix();\n        const m = result._m;\n        m[0] = initialM11;\n        m[1] = initialM12;\n        m[2] = initialM13;\n        m[3] = initialM14;\n        m[4] = initialM21;\n        m[5] = initialM22;\n        m[6] = initialM23;\n        m[7] = initialM24;\n        m[8] = initialM31;\n        m[9] = initialM32;\n        m[10] = initialM33;\n        m[11] = initialM34;\n        m[12] = initialM41;\n        m[13] = initialM42;\n        m[14] = initialM43;\n        m[15] = initialM44;\n        result._markAsUpdated();\n        return result;\n    }\n    /**\n     * Creates a new matrix composed by merging scale (vector3), rotation (quaternion) and translation (vector3)\n     * @param scale - defines the scale vector3\n     * @param rotation - defines the rotation quaternion\n     * @param translation - defines the translation vector3\n     * @returns a new matrix\n     */\n    static Compose(scale, rotation, translation) {\n        const result = new Matrix();\n        Matrix.ComposeToRef(scale, rotation, translation, result);\n        return result;\n    }\n    /**\n     * Sets a matrix to a value composed by merging scale (vector3), rotation (quaternion) and translation (vector3)\n     * @param scale - defines the scale vector3\n     * @param rotation - defines the rotation quaternion\n     * @param translation - defines the translation vector3\n     * @param result - defines the target matrix\n     */\n    static ComposeToRef(scale, rotation, translation, result) {\n        Matrix.ScalingToRef(scale.x, scale.y, scale.z, preallocatedVariables_1.MathTmp.Matrix[1]);\n        rotation.toRotationMatrix(preallocatedVariables_1.MathTmp.Matrix[0]);\n        preallocatedVariables_1.MathTmp.Matrix[1].multiplyToRef(preallocatedVariables_1.MathTmp.Matrix[0], result);\n        result.setTranslation(translation);\n    }\n    /**\n     * Creates a new identity matrix\n     * @returns a new identity matrix\n     */\n    static Identity() {\n        const identity = Matrix.FromValues(1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0);\n        identity._updateIdentityStatus(true);\n        return identity;\n    }\n    /**\n     * Creates a new identity matrix and stores the result in a given matrix\n     * @param result - defines the target matrix\n     */\n    static IdentityToRef(result) {\n        Matrix.FromValuesToRef(1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, result);\n        result._updateIdentityStatus(true);\n    }\n    /**\n     * Creates a new zero matrix\n     * @returns a new zero matrix\n     */\n    static Zero() {\n        const zero = Matrix.FromValues(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0);\n        zero._updateIdentityStatus(false);\n        return zero;\n    }\n    /**\n     * Creates a new rotation matrix for \"angle\" radians around the X axis\n     * @param angle - defines the angle (in radians) to use\n     * @returns the new matrix\n     */\n    static RotationX(angle) {\n        const result = new Matrix();\n        Matrix.RotationXToRef(angle, result);\n        return result;\n    }\n    /**\n     * Creates a new matrix as the invert of a given matrix\n     * @param source - defines the source matrix\n     * @returns the new matrix\n     */\n    static Invert(source) {\n        const result = new Matrix();\n        source.invertToRef(result);\n        return result;\n    }\n    /**\n     * Creates a new rotation matrix for \"angle\" radians around the X axis and stores it in a given matrix\n     * @param angle - defines the angle (in radians) to use\n     * @param result - defines the target matrix\n     */\n    static RotationXToRef(angle, result) {\n        const s = Math.sin(angle);\n        const c = Math.cos(angle);\n        Matrix.FromValuesToRef(1.0, 0.0, 0.0, 0.0, 0.0, c, s, 0.0, 0.0, -s, c, 0.0, 0.0, 0.0, 0.0, 1.0, result);\n        result._updateIdentityStatus(c === 1 && s === 0);\n    }\n    /**\n     * Creates a new rotation matrix for \"angle\" radians around the Y axis\n     * @param angle - defines the angle (in radians) to use\n     * @returns the new matrix\n     */\n    static RotationY(angle) {\n        const result = new Matrix();\n        Matrix.RotationYToRef(angle, result);\n        return result;\n    }\n    /**\n     * Creates a new rotation matrix for \"angle\" radians around the Y axis and stores it in a given matrix\n     * @param angle - defines the angle (in radians) to use\n     * @param result - defines the target matrix\n     */\n    static RotationYToRef(angle, result) {\n        const s = Math.sin(angle);\n        const c = Math.cos(angle);\n        Matrix.FromValuesToRef(c, 0.0, -s, 0.0, 0.0, 1.0, 0.0, 0.0, s, 0.0, c, 0.0, 0.0, 0.0, 0.0, 1.0, result);\n        result._updateIdentityStatus(c === 1 && s === 0);\n    }\n    /**\n     * Creates a new rotation matrix for \"angle\" radians around the Z axis\n     * @param angle - defines the angle (in radians) to use\n     * @returns the new matrix\n     */\n    static RotationZ(angle) {\n        const result = new Matrix();\n        Matrix.RotationZToRef(angle, result);\n        return result;\n    }\n    /**\n     * Creates a new rotation matrix for \"angle\" radians around the Z axis and stores it in a given matrix\n     * @param angle - defines the angle (in radians) to use\n     * @param result - defines the target matrix\n     */\n    static RotationZToRef(angle, result) {\n        const s = Math.sin(angle);\n        const c = Math.cos(angle);\n        Matrix.FromValuesToRef(c, s, 0.0, 0.0, -s, c, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, result);\n        result._updateIdentityStatus(c === 1 && s === 0);\n    }\n    /**\n     * Creates a new rotation matrix for \"angle\" radians around the given axis\n     * @param axis - defines the axis to use\n     * @param angle - defines the angle (in radians) to use\n     * @returns the new matrix\n     */\n    static RotationAxis(axis, angle) {\n        const result = new Matrix();\n        Matrix.RotationAxisToRef(axis, angle, result);\n        return result;\n    }\n    /**\n     * Creates a new rotation matrix for \"angle\" radians around the given axis and stores it in a given matrix\n     * @param axis - defines the axis to use\n     * @param angle - defines the angle (in radians) to use\n     * @param result - defines the target matrix\n     */\n    static RotationAxisToRef(axis, angle, result) {\n        const s = Math.sin(-angle);\n        const c = Math.cos(-angle);\n        const c1 = 1 - c;\n        axis.normalize();\n        const m = result._m;\n        m[0] = axis.x * axis.x * c1 + c;\n        m[1] = axis.x * axis.y * c1 - axis.z * s;\n        m[2] = axis.x * axis.z * c1 + axis.y * s;\n        m[3] = 0.0;\n        m[4] = axis.y * axis.x * c1 + axis.z * s;\n        m[5] = axis.y * axis.y * c1 + c;\n        m[6] = axis.y * axis.z * c1 - axis.x * s;\n        m[7] = 0.0;\n        m[8] = axis.z * axis.x * c1 - axis.y * s;\n        m[9] = axis.z * axis.y * c1 + axis.x * s;\n        m[10] = axis.z * axis.z * c1 + c;\n        m[11] = 0.0;\n        m[12] = 0.0;\n        m[13] = 0.0;\n        m[14] = 0.0;\n        m[15] = 1.0;\n        result._markAsUpdated();\n    }\n    /**\n     * Creates a rotation matrix\n     * @param yaw - defines the yaw angle in radians (Y axis)\n     * @param pitch - defines the pitch angle in radians (X axis)\n     * @param roll - defines the roll angle in radians (X axis)\n     * @returns the new rotation matrix\n     */\n    static RotationYawPitchRoll(yaw, pitch, roll) {\n        const result = new Matrix();\n        Matrix.RotationYawPitchRollToRef(yaw, pitch, roll, result);\n        return result;\n    }\n    /**\n     * Creates a rotation matrix and stores it in a given matrix\n     * @param yaw - defines the yaw angle in radians (Y axis)\n     * @param pitch - defines the pitch angle in radians (X axis)\n     * @param roll - defines the roll angle in radians (X axis)\n     * @param result - defines the target matrix\n     */\n    static RotationYawPitchRollToRef(yaw, pitch, roll, result) {\n        Quaternion_1.Quaternion.RotationYawPitchRollToRef(yaw, pitch, roll, preallocatedVariables_1.MathTmp.Quaternion[0]);\n        preallocatedVariables_1.MathTmp.Quaternion[0].toRotationMatrix(result);\n    }\n    /**\n     * Creates a scaling matrix\n     * @param x - defines the scale factor on X axis\n     * @param y - defines the scale factor on Y axis\n     * @param z - defines the scale factor on Z axis\n     * @returns the new matrix\n     */\n    static Scaling(x, y, z) {\n        const result = new Matrix();\n        Matrix.ScalingToRef(x, y, z, result);\n        return result;\n    }\n    /**\n     * Creates a scaling matrix and stores it in a given matrix\n     * @param x - defines the scale factor on X axis\n     * @param y - defines the scale factor on Y axis\n     * @param z - defines the scale factor on Z axis\n     * @param result - defines the target matrix\n     */\n    static ScalingToRef(x, y, z, result) {\n        Matrix.FromValuesToRef(x, 0.0, 0.0, 0.0, 0.0, y, 0.0, 0.0, 0.0, 0.0, z, 0.0, 0.0, 0.0, 0.0, 1.0, result);\n        result._updateIdentityStatus(x === 1 && y === 1 && z === 1);\n    }\n    /**\n     * Creates a translation matrix\n     * @param x - defines the translation on X axis\n     * @param y - defines the translation on Y axis\n     * @param z - defines the translationon Z axis\n     * @returns the new matrix\n     */\n    static Translation(x, y, z) {\n        const result = new Matrix();\n        Matrix.TranslationToRef(x, y, z, result);\n        return result;\n    }\n    /**\n     * Creates a translation matrix and stores it in a given matrix\n     * @param x - defines the translation on X axis\n     * @param y - defines the translation on Y axis\n     * @param z - defines the translationon Z axis\n     * @param result - defines the target matrix\n     */\n    static TranslationToRef(x, y, z, result) {\n        Matrix.FromValuesToRef(1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, x, y, z, 1.0, result);\n        result._updateIdentityStatus(x === 0 && y === 0 && z === 0);\n    }\n    /**\n     * Returns a new Matrix whose values are the interpolated values for \"gradient\" (float) between the ones of the matrices \"startValue\" and \"endValue\".\n     * @param startValue - defines the start value\n     * @param endValue - defines the end value\n     * @param gradient - defines the gradient factor\n     * @returns the new matrix\n     */\n    static Lerp(startValue, endValue, gradient) {\n        const result = new Matrix();\n        Matrix.LerpToRef(startValue, endValue, gradient, result);\n        return result;\n    }\n    /**\n     * Set the given matrix \"result\" as the interpolated values for \"gradient\" (float) between the ones of the matrices \"startValue\" and \"endValue\".\n     * @param startValue - defines the start value\n     * @param endValue - defines the end value\n     * @param gradient - defines the gradient factor\n     * @param result - defines the Matrix object where to store data\n     */\n    static LerpToRef(startValue, endValue, gradient, result) {\n        for (let index = 0; index < 16; index++) {\n            result._m[index] =\n                startValue._m[index] * (1.0 - gradient) + endValue._m[index] * gradient;\n        }\n        result._markAsUpdated();\n    }\n    /**\n     * Builds a new matrix whose values are computed by:\n     * * decomposing the the \"startValue\" and \"endValue\" matrices into their respective scale, rotation and translation matrices\n     * * interpolating for \"gradient\" (float) the values between each of these decomposed matrices between the start and the end\n     * * recomposing a new matrix from these 3 interpolated scale, rotation and translation matrices\n     * @param startValue - defines the first matrix\n     * @param endValue - defines the second matrix\n     * @param gradient - defines the gradient between the two matrices\n     * @returns the new matrix\n     */\n    static DecomposeLerp(startValue, endValue, gradient) {\n        const result = new Matrix();\n        Matrix.DecomposeLerpToRef(startValue, endValue, gradient, result);\n        return result;\n    }\n    /**\n     * Update a matrix to values which are computed by:\n     * * decomposing the the \"startValue\" and \"endValue\" matrices into their respective scale, rotation and translation matrices\n     * * interpolating for \"gradient\" (float) the values between each of these decomposed matrices between the start and the end\n     * * recomposing a new matrix from these 3 interpolated scale, rotation and translation matrices\n     * @param startValue - defines the first matrix\n     * @param endValue - defines the second matrix\n     * @param gradient - defines the gradient between the two matrices\n     * @param result - defines the target matrix\n     */\n    static DecomposeLerpToRef(startValue, endValue, gradient, result) {\n        const startScale = preallocatedVariables_1.MathTmp.Vector3[0];\n        const startRotation = preallocatedVariables_1.MathTmp.Quaternion[0];\n        const startTranslation = preallocatedVariables_1.MathTmp.Vector3[1];\n        startValue.decompose(startScale, startRotation, startTranslation);\n        const endScale = preallocatedVariables_1.MathTmp.Vector3[2];\n        const endRotation = preallocatedVariables_1.MathTmp.Quaternion[1];\n        const endTranslation = preallocatedVariables_1.MathTmp.Vector3[3];\n        endValue.decompose(endScale, endRotation, endTranslation);\n        const resultScale = preallocatedVariables_1.MathTmp.Vector3[4];\n        Vector3_1.Vector3.LerpToRef(startScale, endScale, gradient, resultScale);\n        const resultRotation = preallocatedVariables_1.MathTmp.Quaternion[2];\n        Quaternion_1.Quaternion.SlerpToRef(startRotation, endRotation, gradient, resultRotation);\n        const resultTranslation = preallocatedVariables_1.MathTmp.Vector3[5];\n        Vector3_1.Vector3.LerpToRef(startTranslation, endTranslation, gradient, resultTranslation);\n        Matrix.ComposeToRef(resultScale, resultRotation, resultTranslation, result);\n    }\n    /**\n     * Gets a new rotation matrix used to rotate an entity so as it looks at the target vector3, from the eye vector3 position, the up vector3 being oriented like \"up\"\n     * This function works in left handed mode\n     * @param eye - defines the final position of the entity\n     * @param target - defines where the entity should look at\n     * @param up - defines the up vector for the entity\n     * @returns the new matrix\n     */\n    static LookAtLH(eye, target, up) {\n        const result = new Matrix();\n        Matrix.LookAtLHToRef(eye, target, up, result);\n        return result;\n    }\n    /**\n     * Sets the given \"result\" Matrix to a rotation matrix used to rotate an entity so that it looks at the target vector3, from the eye vector3 position, the up vector3 being oriented like \"up\".\n     * This function works in left handed mode\n     * @param eye - defines the final position of the entity\n     * @param target - defines where the entity should look at\n     * @param up - defines the up vector for the entity\n     * @param result - defines the target matrix\n     */\n    static LookAtLHToRef(eye, target, up, result) {\n        const xAxis = preallocatedVariables_1.MathTmp.Vector3[0];\n        const yAxis = preallocatedVariables_1.MathTmp.Vector3[1];\n        const zAxis = preallocatedVariables_1.MathTmp.Vector3[2];\n        // Z axis\n        target.subtractToRef(eye, zAxis);\n        zAxis.normalize();\n        // X axis\n        Vector3_1.Vector3.CrossToRef(up, zAxis, xAxis);\n        const xSquareLength = xAxis.lengthSquared();\n        if (xSquareLength === 0) {\n            xAxis.x = 1.0;\n        }\n        else {\n            xAxis.normalizeFromLength(Math.sqrt(xSquareLength));\n        }\n        // Y axis\n        Vector3_1.Vector3.CrossToRef(zAxis, xAxis, yAxis);\n        yAxis.normalize();\n        // Eye angles\n        const ex = -Vector3_1.Vector3.Dot(xAxis, eye);\n        const ey = -Vector3_1.Vector3.Dot(yAxis, eye);\n        const ez = -Vector3_1.Vector3.Dot(zAxis, eye);\n        Matrix.FromValuesToRef(xAxis.x, yAxis.x, zAxis.x, 0.0, xAxis.y, yAxis.y, zAxis.y, 0.0, xAxis.z, yAxis.z, zAxis.z, 0.0, ex, ey, ez, 1.0, result);\n    }\n    /**\n     * Gets a new rotation matrix used to rotate an entity so as it looks at the target vector3, from the eye vector3 position, the up vector3 being oriented like \"up\"\n     * This function works in right handed mode\n     * @param eye - defines the final position of the entity\n     * @param target - defines where the entity should look at\n     * @param up - defines the up vector for the entity\n     * @returns the new matrix\n     */\n    static LookAtRH(eye, target, up) {\n        const result = new Matrix();\n        Matrix.LookAtRHToRef(eye, target, up, result);\n        return result;\n    }\n    /**\n     * Sets the given \"result\" Matrix to a rotation matrix used to rotate an entity so that it looks at the target vector3, from the eye vector3 position, the up vector3 being oriented like \"up\".\n     * This function works in right handed mode\n     * @param eye - defines the final position of the entity\n     * @param target - defines where the entity should look at\n     * @param up - defines the up vector for the entity\n     * @param result - defines the target matrix\n     */\n    static LookAtRHToRef(eye, target, up, result) {\n        const xAxis = preallocatedVariables_1.MathTmp.Vector3[0];\n        const yAxis = preallocatedVariables_1.MathTmp.Vector3[1];\n        const zAxis = preallocatedVariables_1.MathTmp.Vector3[2];\n        // Z axis\n        eye.subtractToRef(target, zAxis);\n        zAxis.normalize();\n        // X axis\n        Vector3_1.Vector3.CrossToRef(up, zAxis, xAxis);\n        const xSquareLength = xAxis.lengthSquared();\n        if (xSquareLength === 0) {\n            xAxis.x = 1.0;\n        }\n        else {\n            xAxis.normalizeFromLength(Math.sqrt(xSquareLength));\n        }\n        // Y axis\n        Vector3_1.Vector3.CrossToRef(zAxis, xAxis, yAxis);\n        yAxis.normalize();\n        // Eye angles\n        const ex = -Vector3_1.Vector3.Dot(xAxis, eye);\n        const ey = -Vector3_1.Vector3.Dot(yAxis, eye);\n        const ez = -Vector3_1.Vector3.Dot(zAxis, eye);\n        Matrix.FromValuesToRef(xAxis.x, yAxis.x, zAxis.x, 0.0, xAxis.y, yAxis.y, zAxis.y, 0.0, xAxis.z, yAxis.z, zAxis.z, 0.0, ex, ey, ez, 1.0, result);\n    }\n    /**\n     * Create a left-handed orthographic projection matrix\n     * @param width - defines the viewport width\n     * @param height - defines the viewport height\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @returns a new matrix as a left-handed orthographic projection matrix\n     */\n    static OrthoLH(width, height, znear, zfar) {\n        const matrix = new Matrix();\n        Matrix.OrthoLHToRef(width, height, znear, zfar, matrix);\n        return matrix;\n    }\n    /**\n     * Store a left-handed orthographic projection to a given matrix\n     * @param width - defines the viewport width\n     * @param height - defines the viewport height\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @param result - defines the target matrix\n     */\n    static OrthoLHToRef(width, height, znear, zfar, result) {\n        const n = znear;\n        const f = zfar;\n        const a = 2.0 / width;\n        const b = 2.0 / height;\n        const c = 2.0 / (f - n);\n        const d = -(f + n) / (f - n);\n        Matrix.FromValuesToRef(a, 0.0, 0.0, 0.0, 0.0, b, 0.0, 0.0, 0.0, 0.0, c, 0.0, 0.0, 0.0, d, 1.0, result);\n        result._updateIdentityStatus(a === 1 && b === 1 && c === 1 && d === 0);\n    }\n    /**\n     * Create a left-handed orthographic projection matrix\n     * @param left - defines the viewport left coordinate\n     * @param right - defines the viewport right coordinate\n     * @param bottom - defines the viewport bottom coordinate\n     * @param top - defines the viewport top coordinate\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @returns a new matrix as a left-handed orthographic projection matrix\n     */\n    static OrthoOffCenterLH(left, right, bottom, top, znear, zfar) {\n        const matrix = new Matrix();\n        Matrix.OrthoOffCenterLHToRef(left, right, bottom, top, znear, zfar, matrix);\n        return matrix;\n    }\n    /**\n     * Stores a left-handed orthographic projection into a given matrix\n     * @param left - defines the viewport left coordinate\n     * @param right - defines the viewport right coordinate\n     * @param bottom - defines the viewport bottom coordinate\n     * @param top - defines the viewport top coordinate\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @param result - defines the target matrix\n     */\n    static OrthoOffCenterLHToRef(left, right, bottom, top, znear, zfar, result) {\n        const n = znear;\n        const f = zfar;\n        const a = 2.0 / (right - left);\n        const b = 2.0 / (top - bottom);\n        const c = 2.0 / (f - n);\n        const d = -(f + n) / (f - n);\n        const i0 = (left + right) / (left - right);\n        const i1 = (top + bottom) / (bottom - top);\n        Matrix.FromValuesToRef(a, 0.0, 0.0, 0.0, 0.0, b, 0.0, 0.0, 0.0, 0.0, c, 0.0, i0, i1, d, 1.0, result);\n        result._markAsUpdated();\n    }\n    /**\n     * Creates a right-handed orthographic projection matrix\n     * @param left - defines the viewport left coordinate\n     * @param right - defines the viewport right coordinate\n     * @param bottom - defines the viewport bottom coordinate\n     * @param top - defines the viewport top coordinate\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @returns a new matrix as a right-handed orthographic projection matrix\n     */\n    static OrthoOffCenterRH(left, right, bottom, top, znear, zfar) {\n        const matrix = new Matrix();\n        Matrix.OrthoOffCenterRHToRef(left, right, bottom, top, znear, zfar, matrix);\n        return matrix;\n    }\n    /**\n     * Stores a right-handed orthographic projection into a given matrix\n     * @param left - defines the viewport left coordinate\n     * @param right - defines the viewport right coordinate\n     * @param bottom - defines the viewport bottom coordinate\n     * @param top - defines the viewport top coordinate\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @param result - defines the target matrix\n     */\n    static OrthoOffCenterRHToRef(left, right, bottom, top, znear, zfar, result) {\n        Matrix.OrthoOffCenterLHToRef(left, right, bottom, top, znear, zfar, result);\n        result._m[10] *= -1; // No need to call _markAsUpdated as previous function already called it and let _isIdentityDirty to true\n    }\n    /**\n     * Creates a left-handed perspective projection matrix\n     * @param width - defines the viewport width\n     * @param height - defines the viewport height\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @returns a new matrix as a left-handed perspective projection matrix\n     */\n    static PerspectiveLH(width, height, znear, zfar) {\n        const matrix = new Matrix();\n        const n = znear;\n        const f = zfar;\n        const a = (2.0 * n) / width;\n        const b = (2.0 * n) / height;\n        const c = (f + n) / (f - n);\n        const d = (-2.0 * f * n) / (f - n);\n        Matrix.FromValuesToRef(a, 0.0, 0.0, 0.0, 0.0, b, 0.0, 0.0, 0.0, 0.0, c, 1.0, 0.0, 0.0, d, 0.0, matrix);\n        matrix._updateIdentityStatus(false);\n        return matrix;\n    }\n    /**\n     * Creates a left-handed perspective projection matrix\n     * @param fov - defines the horizontal field of view\n     * @param aspect - defines the aspect ratio\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @returns a new matrix as a left-handed perspective projection matrix\n     */\n    static PerspectiveFovLH(fov, aspect, znear, zfar) {\n        const matrix = new Matrix();\n        Matrix.PerspectiveFovLHToRef(fov, aspect, znear, zfar, matrix);\n        return matrix;\n    }\n    /**\n     * Stores a left-handed perspective projection into a given matrix\n     * @param fov - defines the horizontal field of view\n     * @param aspect - defines the aspect ratio\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @param result - defines the target matrix\n     * @param isVerticalFovFixed - defines it the fov is vertically fixed (default) or horizontally\n     */\n    static PerspectiveFovLHToRef(fov, aspect, znear, zfar, result, isVerticalFovFixed = true) {\n        const n = znear;\n        const f = zfar;\n        const t = 1.0 / Math.tan(fov * 0.5);\n        const a = isVerticalFovFixed ? t / aspect : t;\n        const b = isVerticalFovFixed ? t : t * aspect;\n        const c = (f + n) / (f - n);\n        const d = (-2.0 * f * n) / (f - n);\n        Matrix.FromValuesToRef(a, 0.0, 0.0, 0.0, 0.0, b, 0.0, 0.0, 0.0, 0.0, c, 1.0, 0.0, 0.0, d, 0.0, result);\n        result._updateIdentityStatus(false);\n    }\n    /**\n     * Creates a right-handed perspective projection matrix\n     * @param fov - defines the horizontal field of view\n     * @param aspect - defines the aspect ratio\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @returns a new matrix as a right-handed perspective projection matrix\n     */\n    static PerspectiveFovRH(fov, aspect, znear, zfar) {\n        const matrix = new Matrix();\n        Matrix.PerspectiveFovRHToRef(fov, aspect, znear, zfar, matrix);\n        return matrix;\n    }\n    /**\n     * Stores a right-handed perspective projection into a given matrix\n     * @param fov - defines the horizontal field of view\n     * @param aspect - defines the aspect ratio\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @param result - defines the target matrix\n     * @param isVerticalFovFixed - defines it the fov is vertically fixed (default) or horizontally\n     */\n    static PerspectiveFovRHToRef(fov, aspect, znear, zfar, result, isVerticalFovFixed = true) {\n        /* alternatively this could be expressed as:\n        //    m = PerspectiveFovLHToRef\n        //    m[10] *= -1.0;\n        //    m[11] *= -1.0;\n        */\n        const n = znear;\n        const f = zfar;\n        const t = 1.0 / Math.tan(fov * 0.5);\n        const a = isVerticalFovFixed ? t / aspect : t;\n        const b = isVerticalFovFixed ? t : t * aspect;\n        const c = -(f + n) / (f - n);\n        const d = (-2 * f * n) / (f - n);\n        Matrix.FromValuesToRef(a, 0.0, 0.0, 0.0, 0.0, b, 0.0, 0.0, 0.0, 0.0, c, -1.0, 0.0, 0.0, d, 0.0, result);\n        result._updateIdentityStatus(false);\n    }\n    /**\n     * Stores a perspective projection for WebVR info a given matrix\n     * @param fov - defines the field of view\n     * @param znear - defines the near clip plane\n     * @param zfar - defines the far clip plane\n     * @param result - defines the target matrix\n     * @param rightHanded - defines if the matrix must be in right-handed mode (false by default)\n     */\n    static PerspectiveFovWebVRToRef(fov, znear, zfar, result, rightHanded = false) {\n        const rightHandedFactor = rightHanded ? -1 : 1;\n        const upTan = Math.tan((fov.upDegrees * Math.PI) / 180.0);\n        const downTan = Math.tan((fov.downDegrees * Math.PI) / 180.0);\n        const leftTan = Math.tan((fov.leftDegrees * Math.PI) / 180.0);\n        const rightTan = Math.tan((fov.rightDegrees * Math.PI) / 180.0);\n        const xScale = 2.0 / (leftTan + rightTan);\n        const yScale = 2.0 / (upTan + downTan);\n        const m = result._m;\n        m[0] = xScale;\n        m[1] = m[2] = m[3] = m[4] = 0.0;\n        m[5] = yScale;\n        m[6] = m[7] = 0.0;\n        m[8] = (leftTan - rightTan) * xScale * 0.5;\n        m[9] = -((upTan - downTan) * yScale * 0.5);\n        m[10] = -zfar / (znear - zfar);\n        m[11] = 1.0 * rightHandedFactor;\n        m[12] = m[13] = m[15] = 0.0;\n        m[14] = -(2.0 * zfar * znear) / (zfar - znear);\n        result._markAsUpdated();\n    }\n    /**\n     * Extracts a 2x2 matrix from a given matrix and store the result in a FloatArray\n     * @param matrix - defines the matrix to use\n     * @returns a new FloatArray array with 4 elements : the 2x2 matrix extracted from the given matrix\n     */\n    static GetAsMatrix2x2(matrix) {\n        return [matrix._m[0], matrix._m[1], matrix._m[4], matrix._m[5]];\n    }\n    /**\n     * Extracts a 3x3 matrix from a given matrix and store the result in a FloatArray\n     * @param matrix - defines the matrix to use\n     * @returns a new FloatArray array with 9 elements : the 3x3 matrix extracted from the given matrix\n     */\n    static GetAsMatrix3x3(matrix) {\n        return [\n            matrix._m[0],\n            matrix._m[1],\n            matrix._m[2],\n            matrix._m[4],\n            matrix._m[5],\n            matrix._m[6],\n            matrix._m[8],\n            matrix._m[9],\n            matrix._m[10]\n        ];\n    }\n    /**\n     * Compute the transpose of a given matrix\n     * @param matrix - defines the matrix to transpose\n     * @returns the new matrix\n     */\n    static Transpose(matrix) {\n        const result = new Matrix();\n        Matrix.TransposeToRef(matrix, result);\n        return result;\n    }\n    /**\n     * Compute the transpose of a matrix and store it in a target matrix\n     * @param matrix - defines the matrix to transpose\n     * @param result - defines the target matrix\n     */\n    static TransposeToRef(matrix, result) {\n        const rm = result._m;\n        const mm = matrix._m;\n        rm[0] = mm[0];\n        rm[1] = mm[4];\n        rm[2] = mm[8];\n        rm[3] = mm[12];\n        rm[4] = mm[1];\n        rm[5] = mm[5];\n        rm[6] = mm[9];\n        rm[7] = mm[13];\n        rm[8] = mm[2];\n        rm[9] = mm[6];\n        rm[10] = mm[10];\n        rm[11] = mm[14];\n        rm[12] = mm[3];\n        rm[13] = mm[7];\n        rm[14] = mm[11];\n        rm[15] = mm[15];\n        // identity-ness does not change when transposing\n        result._updateIdentityStatus(matrix._isIdentity, matrix._isIdentityDirty);\n    }\n    /**\n     * Computes a reflection matrix from a plane\n     * @param plane - defines the reflection plane\n     * @returns a new matrix\n     */\n    static Reflection(plane) {\n        const matrix = new Matrix();\n        Matrix.ReflectionToRef(plane, matrix);\n        return matrix;\n    }\n    /**\n     * Computes a reflection matrix from a plane\n     * @param plane - defines the reflection plane\n     * @param result - defines the target matrix\n     */\n    static ReflectionToRef(plane, result) {\n        plane.normalize();\n        const x = plane.normal.x;\n        const y = plane.normal.y;\n        const z = plane.normal.z;\n        const temp = -2 * x;\n        const temp2 = -2 * y;\n        const temp3 = -2 * z;\n        Matrix.FromValuesToRef(temp * x + 1, temp2 * x, temp3 * x, 0.0, temp * y, temp2 * y + 1, temp3 * y, 0.0, temp * z, temp2 * z, temp3 * z + 1, 0.0, temp * plane.d, temp2 * plane.d, temp3 * plane.d, 1.0, result);\n    }\n    /**\n     * Sets the given matrix as a rotation matrix composed from the 3 left handed axes\n     * @param xaxis - defines the value of the 1st axis\n     * @param yaxis - defines the value of the 2nd axis\n     * @param zaxis - defines the value of the 3rd axis\n     * @param result - defines the target matrix\n     */\n    static FromXYZAxesToRef(xaxis, yaxis, zaxis, result) {\n        Matrix.FromValuesToRef(xaxis.x, xaxis.y, xaxis.z, 0.0, yaxis.x, yaxis.y, yaxis.z, 0.0, zaxis.x, zaxis.y, zaxis.z, 0.0, 0.0, 0.0, 0.0, 1.0, result);\n    }\n    /**\n     * Creates a rotation matrix from a quaternion and stores it in a target matrix\n     * @param quat - defines the quaternion to use\n     * @param result - defines the target matrix\n     */\n    static FromQuaternionToRef(quat, result) {\n        const xx = quat.x * quat.x;\n        const yy = quat.y * quat.y;\n        const zz = quat.z * quat.z;\n        const xy = quat.x * quat.y;\n        const zw = quat.z * quat.w;\n        const zx = quat.z * quat.x;\n        const yw = quat.y * quat.w;\n        const yz = quat.y * quat.z;\n        const xw = quat.x * quat.w;\n        result._m[0] = 1.0 - 2.0 * (yy + zz);\n        result._m[1] = 2.0 * (xy + zw);\n        result._m[2] = 2.0 * (zx - yw);\n        result._m[3] = 0.0;\n        result._m[4] = 2.0 * (xy - zw);\n        result._m[5] = 1.0 - 2.0 * (zz + xx);\n        result._m[6] = 2.0 * (yz + xw);\n        result._m[7] = 0.0;\n        result._m[8] = 2.0 * (zx + yw);\n        result._m[9] = 2.0 * (yz - xw);\n        result._m[10] = 1.0 - 2.0 * (yy + xx);\n        result._m[11] = 0.0;\n        result._m[12] = 0.0;\n        result._m[13] = 0.0;\n        result._m[14] = 0.0;\n        result._m[15] = 1.0;\n        result._markAsUpdated();\n    }\n    /** @internal */\n    _markAsUpdated() {\n        this.updateFlag = Matrix._updateFlagSeed++;\n        this._isIdentity = false;\n        this._isIdentity3x2 = false;\n        this._isIdentityDirty = true;\n        this._isIdentity3x2Dirty = true;\n    }\n    // Properties\n    /**\n     * Check if the current matrix is identity\n     * @returns true is the matrix is the identity matrix\n     */\n    isIdentity() {\n        if (this._isIdentityDirty) {\n            this._isIdentityDirty = false;\n            const m = this._m;\n            this._isIdentity =\n                m[0] === 1.0 &&\n                    m[1] === 0.0 &&\n                    m[2] === 0.0 &&\n                    m[3] === 0.0 &&\n                    m[4] === 0.0 &&\n                    m[5] === 1.0 &&\n                    m[6] === 0.0 &&\n                    m[7] === 0.0 &&\n                    m[8] === 0.0 &&\n                    m[9] === 0.0 &&\n                    m[10] === 1.0 &&\n                    m[11] === 0.0 &&\n                    m[12] === 0.0 &&\n                    m[13] === 0.0 &&\n                    m[14] === 0.0 &&\n                    m[15] === 1.0;\n        }\n        return this._isIdentity;\n    }\n    /**\n     * Check if the current matrix is identity as a texture matrix (3x2 store in 4x4)\n     * @returns true is the matrix is the identity matrix\n     */\n    isIdentityAs3x2() {\n        if (this._isIdentity3x2Dirty) {\n            this._isIdentity3x2Dirty = false;\n            if (this._m[0] !== 1.0 || this._m[5] !== 1.0 || this._m[15] !== 1.0) {\n                this._isIdentity3x2 = false;\n            }\n            else if (this._m[1] !== 0.0 ||\n                this._m[2] !== 0.0 ||\n                this._m[3] !== 0.0 ||\n                this._m[4] !== 0.0 ||\n                this._m[6] !== 0.0 ||\n                this._m[7] !== 0.0 ||\n                this._m[8] !== 0.0 ||\n                this._m[9] !== 0.0 ||\n                this._m[10] !== 0.0 ||\n                this._m[11] !== 0.0 ||\n                this._m[12] !== 0.0 ||\n                this._m[13] !== 0.0 ||\n                this._m[14] !== 0.0) {\n                this._isIdentity3x2 = false;\n            }\n            else {\n                this._isIdentity3x2 = true;\n            }\n        }\n        return this._isIdentity3x2;\n    }\n    /**\n     * Gets the determinant of the matrix\n     * @returns the matrix determinant\n     */\n    determinant() {\n        if (this._isIdentity === true) {\n            return 1;\n        }\n        const m = this._m;\n        // tslint:disable-next-line:one-variable-per-declaration\n        const m00 = m[0], m01 = m[1], m02 = m[2], m03 = m[3];\n        // tslint:disable-next-line:one-variable-per-declaration\n        const m10 = m[4], m11 = m[5], m12 = m[6], m13 = m[7];\n        // tslint:disable-next-line:one-variable-per-declaration\n        const m20 = m[8], m21 = m[9], m22 = m[10], m23 = m[11];\n        // tslint:disable-next-line:one-variable-per-declaration\n        const m30 = m[12], m31 = m[13], m32 = m[14], m33 = m[15];\n        /*\n        // https://en.wikipedia.org/wiki/Laplace_expansion\n        // to compute the deterrminant of a 4x4 Matrix we compute the cofactors of any row or column,\n        // then we multiply each Cofactor by its corresponding matrix value and sum them all to get the determinant\n        // Cofactor(i, j) = sign(i,j) * det(Minor(i, j))\n        // where\n        //  - sign(i,j) = (i+j) % 2 === 0 ? 1 : -1\n        //  - Minor(i, j) is the 3x3 matrix we get by removing row i and column j from current Matrix\n        //\n        // Here we do that for the 1st row.\n        */\n        // tslint:disable:variable-name\n        const det_22_33 = m22 * m33 - m32 * m23;\n        const det_21_33 = m21 * m33 - m31 * m23;\n        const det_21_32 = m21 * m32 - m31 * m22;\n        const det_20_33 = m20 * m33 - m30 * m23;\n        const det_20_32 = m20 * m32 - m22 * m30;\n        const det_20_31 = m20 * m31 - m30 * m21;\n        const cofact_00 = +(m11 * det_22_33 - m12 * det_21_33 + m13 * det_21_32);\n        const cofact_01 = -(m10 * det_22_33 - m12 * det_20_33 + m13 * det_20_32);\n        const cofact_02 = +(m10 * det_21_33 - m11 * det_20_33 + m13 * det_20_31);\n        const cofact_03 = -(m10 * det_21_32 - m11 * det_20_32 + m12 * det_20_31);\n        // tslint:enable:variable-name\n        return m00 * cofact_00 + m01 * cofact_01 + m02 * cofact_02 + m03 * cofact_03;\n    }\n    // Methods\n    /**\n     * Returns the matrix as a FloatArray\n     * @returns the matrix underlying array\n     */\n    toArray() {\n        return this._m;\n    }\n    /**\n     * Returns the matrix as a FloatArray\n     * @returns the matrix underlying array.\n     */\n    asArray() {\n        return this._m;\n    }\n    /**\n     * Inverts the current matrix in place\n     * @returns the current inverted matrix\n     */\n    invert() {\n        this.invertToRef(this);\n        return this;\n    }\n    /**\n     * Sets all the matrix elements to zero\n     * @returns the current matrix\n     */\n    reset() {\n        Matrix.FromValuesToRef(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, this);\n        this._updateIdentityStatus(false);\n        return this;\n    }\n    /**\n     * Adds the current matrix with a second one\n     * @param other - defines the matrix to add\n     * @returns a new matrix as the addition of the current matrix and the given one\n     */\n    add(other) {\n        const result = new Matrix();\n        this.addToRef(other, result);\n        return result;\n    }\n    /**\n     * Sets the given matrix \"result\" to the addition of the current matrix and the given one\n     * @param other - defines the matrix to add\n     * @param result - defines the target matrix\n     * @returns the current matrix\n     */\n    addToRef(other, result) {\n        for (let index = 0; index < 16; index++) {\n            result._m[index] = this._m[index] + other._m[index];\n        }\n        result._markAsUpdated();\n        return this;\n    }\n    /**\n     * Adds in place the given matrix to the current matrix\n     * @param other - defines the second operand\n     * @returns the current updated matrix\n     */\n    addToSelf(other) {\n        for (let index = 0; index < 16; index++) {\n            this._m[index] += other._m[index];\n        }\n        this._markAsUpdated();\n        return this;\n    }\n    /**\n     * Sets the given matrix to the current inverted Matrix\n     * @param other - defines the target matrix\n     * @returns the unmodified current matrix\n     */\n    invertToRef(other) {\n        if (this._isIdentity === true) {\n            Matrix.IdentityToRef(other);\n            return this;\n        }\n        // the inverse of a Matrix is the transpose of cofactor matrix divided by the determinant\n        const m = this._m;\n        // tslint:disable:one-variable-per-declaration\n        const m00 = m[0], m01 = m[1], m02 = m[2], m03 = m[3];\n        const m10 = m[4], m11 = m[5], m12 = m[6], m13 = m[7];\n        const m20 = m[8], m21 = m[9], m22 = m[10], m23 = m[11];\n        const m30 = m[12], m31 = m[13], m32 = m[14], m33 = m[15];\n        // tslint:enable:one-variable-per-declaration\n        // tslint:disable:variable-name\n        const det_22_33 = m22 * m33 - m32 * m23;\n        const det_21_33 = m21 * m33 - m31 * m23;\n        const det_21_32 = m21 * m32 - m31 * m22;\n        const det_20_33 = m20 * m33 - m30 * m23;\n        const det_20_32 = m20 * m32 - m22 * m30;\n        const det_20_31 = m20 * m31 - m30 * m21;\n        const cofact_00 = +(m11 * det_22_33 - m12 * det_21_33 + m13 * det_21_32);\n        const cofact_01 = -(m10 * det_22_33 - m12 * det_20_33 + m13 * det_20_32);\n        const cofact_02 = +(m10 * det_21_33 - m11 * det_20_33 + m13 * det_20_31);\n        const cofact_03 = -(m10 * det_21_32 - m11 * det_20_32 + m12 * det_20_31);\n        const det = m00 * cofact_00 + m01 * cofact_01 + m02 * cofact_02 + m03 * cofact_03;\n        if (det === 0) {\n            // not invertible\n            other.copyFrom(this);\n            return this;\n        }\n        const detInv = 1 / det;\n        const det_12_33 = m12 * m33 - m32 * m13;\n        const det_11_33 = m11 * m33 - m31 * m13;\n        const det_11_32 = m11 * m32 - m31 * m12;\n        const det_10_33 = m10 * m33 - m30 * m13;\n        const det_10_32 = m10 * m32 - m30 * m12;\n        const det_10_31 = m10 * m31 - m30 * m11;\n        const det_12_23 = m12 * m23 - m22 * m13;\n        const det_11_23 = m11 * m23 - m21 * m13;\n        const det_11_22 = m11 * m22 - m21 * m12;\n        const det_10_23 = m10 * m23 - m20 * m13;\n        const det_10_22 = m10 * m22 - m20 * m12;\n        const det_10_21 = m10 * m21 - m20 * m11;\n        const cofact_10 = -(m01 * det_22_33 - m02 * det_21_33 + m03 * det_21_32);\n        const cofact_11 = +(m00 * det_22_33 - m02 * det_20_33 + m03 * det_20_32);\n        const cofact_12 = -(m00 * det_21_33 - m01 * det_20_33 + m03 * det_20_31);\n        const cofact_13 = +(m00 * det_21_32 - m01 * det_20_32 + m02 * det_20_31);\n        const cofact_20 = +(m01 * det_12_33 - m02 * det_11_33 + m03 * det_11_32);\n        const cofact_21 = -(m00 * det_12_33 - m02 * det_10_33 + m03 * det_10_32);\n        const cofact_22 = +(m00 * det_11_33 - m01 * det_10_33 + m03 * det_10_31);\n        const cofact_23 = -(m00 * det_11_32 - m01 * det_10_32 + m02 * det_10_31);\n        const cofact_30 = -(m01 * det_12_23 - m02 * det_11_23 + m03 * det_11_22);\n        const cofact_31 = +(m00 * det_12_23 - m02 * det_10_23 + m03 * det_10_22);\n        const cofact_32 = -(m00 * det_11_23 - m01 * det_10_23 + m03 * det_10_21);\n        const cofact_33 = +(m00 * det_11_22 - m01 * det_10_22 + m02 * det_10_21);\n        Matrix.FromValuesToRef(cofact_00 * detInv, cofact_10 * detInv, cofact_20 * detInv, cofact_30 * detInv, cofact_01 * detInv, cofact_11 * detInv, cofact_21 * detInv, cofact_31 * detInv, cofact_02 * detInv, cofact_12 * detInv, cofact_22 * detInv, cofact_32 * detInv, cofact_03 * detInv, cofact_13 * detInv, cofact_23 * detInv, cofact_33 * detInv, other);\n        // tslint:enable:variable-name\n        return this;\n    }\n    /**\n     * add a value at the specified position in the current Matrix\n     * @param index - the index of the value within the matrix. between 0 and 15.\n     * @param value - the value to be added\n     * @returns the current updated matrix\n     */\n    addAtIndex(index, value) {\n        this._m[index] += value;\n        this._markAsUpdated();\n        return this;\n    }\n    /**\n     * mutiply the specified position in the current Matrix by a value\n     * @param index - the index of the value within the matrix. between 0 and 15.\n     * @param value - the value to be added\n     * @returns the current updated matrix\n     */\n    multiplyAtIndex(index, value) {\n        this._m[index] *= value;\n        this._markAsUpdated();\n        return this;\n    }\n    /**\n     * Inserts the translation vector (using 3 floats) in the current matrix\n     * @param x - defines the 1st component of the translation\n     * @param y - defines the 2nd component of the translation\n     * @param z - defines the 3rd component of the translation\n     * @returns the current updated matrix\n     */\n    setTranslationFromFloats(x, y, z) {\n        this._m[12] = x;\n        this._m[13] = y;\n        this._m[14] = z;\n        this._markAsUpdated();\n        return this;\n    }\n    /**\n     * Inserts the translation vector in the current matrix\n     * @param vector3 - defines the translation to insert\n     * @returns the current updated matrix\n     */\n    setTranslation(vector3) {\n        return this.setTranslationFromFloats(vector3.x, vector3.y, vector3.z);\n    }\n    /**\n     * Gets the translation value of the current matrix\n     * @returns a new Vector3 as the extracted translation from the matrix\n     */\n    getTranslation() {\n        return new Vector3_1.Vector3(this._m[12], this._m[13], this._m[14]);\n    }\n    /**\n     * Fill a Vector3 with the extracted translation from the matrix\n     * @param result - defines the Vector3 where to store the translation\n     * @returns the current matrix\n     */\n    getTranslationToRef(result) {\n        result.x = this._m[12];\n        result.y = this._m[13];\n        result.z = this._m[14];\n        return this;\n    }\n    /**\n     * Remove rotation and scaling part from the matrix\n     * @returns the updated matrix\n     */\n    removeRotationAndScaling() {\n        const m = this.m;\n        Matrix.FromValuesToRef(1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, m[12], m[13], m[14], m[15], this);\n        this._updateIdentityStatus(m[12] === 0 && m[13] === 0 && m[14] === 0 && m[15] === 1);\n        return this;\n    }\n    /**\n     * Multiply two matrices\n     * @param other - defines the second operand\n     * @returns a new matrix set with the multiplication result of the current Matrix and the given one\n     */\n    multiply(other) {\n        const result = new Matrix();\n        this.multiplyToRef(other, result);\n        return result;\n    }\n    /**\n     * Copy the current matrix from the given one\n     * @param other - defines the source matrix\n     * @returns the current updated matrix\n     */\n    copyFrom(other) {\n        other.copyToArray(this._m);\n        const o = other;\n        this._updateIdentityStatus(o._isIdentity, o._isIdentityDirty, o._isIdentity3x2, o._isIdentity3x2Dirty);\n        return this;\n    }\n    /**\n     * Populates the given array from the starting index with the current matrix values\n     * @param array - defines the target array\n     * @param offset - defines the offset in the target array where to start storing values\n     * @returns the current matrix\n     */\n    copyToArray(array, offset = 0) {\n        for (let index = 0; index < 16; index++) {\n            array[offset + index] = this._m[index];\n        }\n        return this;\n    }\n    /**\n     * Sets the given matrix \"result\" with the multiplication result of the current Matrix and the given one\n     * @param other - defines the second operand\n     * @param result - defines the matrix where to store the multiplication\n     * @returns the current matrix\n     */\n    multiplyToRef(other, result) {\n        if (this._isIdentity) {\n            result.copyFrom(other);\n            return this;\n        }\n        if (other._isIdentity) {\n            result.copyFrom(this);\n            return this;\n        }\n        this.multiplyToArray(other, result._m, 0);\n        result._markAsUpdated();\n        return this;\n    }\n    /**\n     * Sets the FloatArray \"result\" from the given index \"offset\" with the multiplication of the current matrix and the given one\n     * @param other - defines the second operand\n     * @param result - defines the array where to store the multiplication\n     * @param offset - defines the offset in the target array where to start storing values\n     * @returns the current matrix\n     */\n    multiplyToArray(other, result, offset) {\n        const m = this._m;\n        const otherM = other.m;\n        // tslint:disable:one-variable-per-declaration\n        const tm0 = m[0], tm1 = m[1], tm2 = m[2], tm3 = m[3];\n        const tm4 = m[4], tm5 = m[5], tm6 = m[6], tm7 = m[7];\n        const tm8 = m[8], tm9 = m[9], tm10 = m[10], tm11 = m[11];\n        const tm12 = m[12], tm13 = m[13], tm14 = m[14], tm15 = m[15];\n        const om0 = otherM[0], om1 = otherM[1], om2 = otherM[2], om3 = otherM[3];\n        const om4 = otherM[4], om5 = otherM[5], om6 = otherM[6], om7 = otherM[7];\n        const om8 = otherM[8], om9 = otherM[9], om10 = otherM[10], om11 = otherM[11];\n        const om12 = otherM[12], om13 = otherM[13], om14 = otherM[14], om15 = otherM[15];\n        // tslint:enable:one-variable-per-declaration\n        result[offset] = tm0 * om0 + tm1 * om4 + tm2 * om8 + tm3 * om12;\n        result[offset + 1] = tm0 * om1 + tm1 * om5 + tm2 * om9 + tm3 * om13;\n        result[offset + 2] = tm0 * om2 + tm1 * om6 + tm2 * om10 + tm3 * om14;\n        result[offset + 3] = tm0 * om3 + tm1 * om7 + tm2 * om11 + tm3 * om15;\n        result[offset + 4] = tm4 * om0 + tm5 * om4 + tm6 * om8 + tm7 * om12;\n        result[offset + 5] = tm4 * om1 + tm5 * om5 + tm6 * om9 + tm7 * om13;\n        result[offset + 6] = tm4 * om2 + tm5 * om6 + tm6 * om10 + tm7 * om14;\n        result[offset + 7] = tm4 * om3 + tm5 * om7 + tm6 * om11 + tm7 * om15;\n        result[offset + 8] = tm8 * om0 + tm9 * om4 + tm10 * om8 + tm11 * om12;\n        result[offset + 9] = tm8 * om1 + tm9 * om5 + tm10 * om9 + tm11 * om13;\n        result[offset + 10] = tm8 * om2 + tm9 * om6 + tm10 * om10 + tm11 * om14;\n        result[offset + 11] = tm8 * om3 + tm9 * om7 + tm10 * om11 + tm11 * om15;\n        result[offset + 12] = tm12 * om0 + tm13 * om4 + tm14 * om8 + tm15 * om12;\n        result[offset + 13] = tm12 * om1 + tm13 * om5 + tm14 * om9 + tm15 * om13;\n        result[offset + 14] = tm12 * om2 + tm13 * om6 + tm14 * om10 + tm15 * om14;\n        result[offset + 15] = tm12 * om3 + tm13 * om7 + tm14 * om11 + tm15 * om15;\n        return this;\n    }\n    /**\n     * Check equality between this matrix and a second one\n     * @param value - defines the second matrix to compare\n     * @returns true is the current matrix and the given one values are strictly equal\n     */\n    equals(value) {\n        const other = value;\n        if (!other) {\n            return false;\n        }\n        if (this._isIdentity || other._isIdentity) {\n            if (!this._isIdentityDirty && !other._isIdentityDirty) {\n                return this._isIdentity && other._isIdentity;\n            }\n        }\n        const m = this.m;\n        const om = other.m;\n        return (m[0] === om[0] &&\n            m[1] === om[1] &&\n            m[2] === om[2] &&\n            m[3] === om[3] &&\n            m[4] === om[4] &&\n            m[5] === om[5] &&\n            m[6] === om[6] &&\n            m[7] === om[7] &&\n            m[8] === om[8] &&\n            m[9] === om[9] &&\n            m[10] === om[10] &&\n            m[11] === om[11] &&\n            m[12] === om[12] &&\n            m[13] === om[13] &&\n            m[14] === om[14] &&\n            m[15] === om[15]);\n    }\n    /**\n     * Clone the current matrix\n     * @returns a new matrix from the current matrix\n     */\n    clone() {\n        const matrix = new Matrix();\n        matrix.copyFrom(this);\n        return matrix;\n    }\n    /**\n     * Returns the name of the current matrix class\n     * @returns the string \"Matrix\"\n     */\n    getClassName() {\n        return 'Matrix';\n    }\n    /**\n     * Gets the hash code of the current matrix\n     * @returns the hash code\n     */\n    getHashCode() {\n        let hash = this._m[0] || 0;\n        for (let i = 1; i < 16; i++) {\n            hash = (hash * 397) ^ (this._m[i] || 0);\n        }\n        return hash;\n    }\n    /**\n     * Decomposes the current Matrix into a translation, rotation and scaling components\n     * @param scale - defines the scale vector3 given as a reference to update\n     * @param rotation - defines the rotation quaternion given as a reference to update\n     * @param translation - defines the translation vector3 given as a reference to update\n     * @returns true if operation was successful\n     */\n    decompose(scale, rotation, translation) {\n        if (this._isIdentity) {\n            if (translation) {\n                translation.setAll(0);\n            }\n            if (scale) {\n                scale.setAll(1);\n            }\n            if (rotation) {\n                rotation.copyFromFloats(0, 0, 0, 1);\n            }\n            return true;\n        }\n        const m = this._m;\n        if (translation) {\n            translation.copyFromFloats(m[12], m[13], m[14]);\n        }\n        const usedScale = scale || preallocatedVariables_1.MathTmp.Vector3[0];\n        usedScale.x = Math.sqrt(m[0] * m[0] + m[1] * m[1] + m[2] * m[2]);\n        usedScale.y = Math.sqrt(m[4] * m[4] + m[5] * m[5] + m[6] * m[6]);\n        usedScale.z = Math.sqrt(m[8] * m[8] + m[9] * m[9] + m[10] * m[10]);\n        if (this.determinant() <= 0) {\n            usedScale.y *= -1;\n        }\n        if (usedScale.x === 0 || usedScale.y === 0 || usedScale.z === 0) {\n            if (rotation) {\n                rotation.copyFromFloats(0.0, 0.0, 0.0, 1.0);\n            }\n            return false;\n        }\n        if (rotation) {\n            // tslint:disable-next-line:one-variable-per-declaration\n            const sx = 1 / usedScale.x, sy = 1 / usedScale.y, sz = 1 / usedScale.z;\n            Matrix.FromValuesToRef(m[0] * sx, m[1] * sx, m[2] * sx, 0.0, m[4] * sy, m[5] * sy, m[6] * sy, 0.0, m[8] * sz, m[9] * sz, m[10] * sz, 0.0, 0.0, 0.0, 0.0, 1.0, preallocatedVariables_1.MathTmp.Matrix[0]);\n            Quaternion_1.Quaternion.FromRotationMatrixToRef(preallocatedVariables_1.MathTmp.Matrix[0], rotation);\n        }\n        return true;\n    }\n    /**\n     * Gets specific row of the matrix\n     * @param index - defines the number of the row to get\n     * @returns the index-th row of the current matrix as a new Vector4\n     */\n    getRow(index) {\n        if (index < 0 || index > 3) {\n            return null;\n        }\n        const i = index * 4;\n        return new Vector4_1.Vector4(this._m[i + 0], this._m[i + 1], this._m[i + 2], this._m[i + 3]);\n    }\n    /**\n     * Sets the index-th row of the current matrix to the vector4 values\n     * @param index - defines the number of the row to set\n     * @param row - defines the target vector4\n     * @returns the updated current matrix\n     */\n    setRow(index, row) {\n        return this.setRowFromFloats(index, row.x, row.y, row.z, row.w);\n    }\n    /**\n     * Compute the transpose of the matrix\n     * @returns the new transposed matrix\n     */\n    transpose() {\n        return Matrix.Transpose(this);\n    }\n    /**\n     * Compute the transpose of the matrix and store it in a given matrix\n     * @param result - defines the target matrix\n     * @returns the current matrix\n     */\n    transposeToRef(result) {\n        Matrix.TransposeToRef(this, result);\n        return this;\n    }\n    /**\n     * Sets the index-th row of the current matrix with the given 4 x float values\n     * @param index - defines the row index\n     * @param x - defines the x component to set\n     * @param y - defines the y component to set\n     * @param z - defines the z component to set\n     * @param w - defines the w component to set\n     * @returns the updated current matrix\n     */\n    setRowFromFloats(index, x, y, z, w) {\n        if (index < 0 || index > 3) {\n            return this;\n        }\n        const i = index * 4;\n        this._m[i + 0] = x;\n        this._m[i + 1] = y;\n        this._m[i + 2] = z;\n        this._m[i + 3] = w;\n        this._markAsUpdated();\n        return this;\n    }\n    /**\n     * Compute a new matrix set with the current matrix values multiplied by scale (float)\n     * @param scale - defines the scale factor\n     * @returns a new matrix\n     */\n    scale(scale) {\n        const result = new Matrix();\n        this.scaleToRef(scale, result);\n        return result;\n    }\n    /**\n     * Scale the current matrix values by a factor to a given result matrix\n     * @param scale - defines the scale factor\n     * @param result - defines the matrix to store the result\n     * @returns the current matrix\n     */\n    scaleToRef(scale, result) {\n        for (let index = 0; index < 16; index++) {\n            result._m[index] = this._m[index] * scale;\n        }\n        result._markAsUpdated();\n        return this;\n    }\n    /**\n     * Scale the current matrix values by a factor and add the result to a given matrix\n     * @param scale - defines the scale factor\n     * @param result - defines the Matrix to store the result\n     * @returns the current matrix\n     */\n    scaleAndAddToRef(scale, result) {\n        for (let index = 0; index < 16; index++) {\n            result._m[index] += this._m[index] * scale;\n        }\n        result._markAsUpdated();\n        return this;\n    }\n    /**\n     * Writes to the given matrix a normal matrix, computed from this one (using values from identity matrix for fourth row and column).\n     * @param ref - matrix to store the result\n     */\n    toNormalMatrix(ref) {\n        const tmp = preallocatedVariables_1.MathTmp.Matrix[0];\n        this.invertToRef(tmp);\n        tmp.transposeToRef(ref);\n        const m = ref._m;\n        Matrix.FromValuesToRef(m[0], m[1], m[2], 0.0, m[4], m[5], m[6], 0.0, m[8], m[9], m[10], 0.0, 0.0, 0.0, 0.0, 1.0, ref);\n    }\n    /**\n     * Gets only rotation part of the current matrix\n     * @returns a new matrix sets to the extracted rotation matrix from the current one\n     */\n    getRotationMatrix() {\n        const result = new Matrix();\n        this.getRotationMatrixToRef(result);\n        return result;\n    }\n    /**\n     * Extracts the rotation matrix from the current one and sets it as the given \"result\"\n     * @param result - defines the target matrix to store data to\n     * @returns the current matrix\n     */\n    getRotationMatrixToRef(result) {\n        const scale = preallocatedVariables_1.MathTmp.Vector3[0];\n        if (!this.decompose(scale)) {\n            Matrix.IdentityToRef(result);\n            return this;\n        }\n        const m = this._m;\n        // tslint:disable-next-line:one-variable-per-declaration\n        const sx = 1 / scale.x, sy = 1 / scale.y, sz = 1 / scale.z;\n        Matrix.FromValuesToRef(m[0] * sx, m[1] * sx, m[2] * sx, 0.0, m[4] * sy, m[5] * sy, m[6] * sy, 0.0, m[8] * sz, m[9] * sz, m[10] * sz, 0.0, 0.0, 0.0, 0.0, 1.0, result);\n        return this;\n    }\n    /**\n     * Toggles model matrix from being right handed to left handed in place and vice versa\n     */\n    toggleModelMatrixHandInPlace() {\n        const m = this._m;\n        m[2] *= -1;\n        m[6] *= -1;\n        m[8] *= -1;\n        m[9] *= -1;\n        m[14] *= -1;\n        this._markAsUpdated();\n    }\n    /**\n     * Toggles projection matrix from being right handed to left handed in place and vice versa\n     */\n    toggleProjectionMatrixHandInPlace() {\n        const m = this._m;\n        m[8] *= -1;\n        m[9] *= -1;\n        m[10] *= -1;\n        m[11] *= -1;\n        this._markAsUpdated();\n    }\n    /** @internal */\n    _updateIdentityStatus(isIdentity, isIdentityDirty = false, isIdentity3x2 = false, isIdentity3x2Dirty = true) {\n        this.updateFlag = Matrix._updateFlagSeed++;\n        this._isIdentity = isIdentity;\n        this._isIdentity3x2 = isIdentity || isIdentity3x2;\n        this._isIdentityDirty = this._isIdentity ? false : isIdentityDirty;\n        this._isIdentity3x2Dirty = this._isIdentity3x2 ? false : isIdentity3x2Dirty;\n    }\n}\nexports.Matrix = Matrix;\nMatrix._updateFlagSeed = 0;\nMatrix._identityReadOnly = Matrix.Identity();\n//# sourceMappingURL=Matrix.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Quaternion = void 0;\nconst Matrix_1 = require(\"./Matrix\");\nconst Vector3_1 = require(\"./Vector3\");\nconst preallocatedVariables_1 = require(\"./preallocatedVariables\");\nconst types_1 = require(\"./types\");\nconst Scalar_1 = require(\"./Scalar\");\n/**\n * Class used to store quaternion data\n * {@link https://en.wikipedia.org/wiki/Quaternion }\n * {@link http://doc.babylonjs.com/features/position,_rotation,_scaling }\n * @public\n */\nclass Quaternion {\n    /**\n     * Creates a new Quaternion from the given floats\n     * @param x - defines the first component (0 by default)\n     * @param y - defines the second component (0 by default)\n     * @param z - defines the third component (0 by default)\n     * @param w - defines the fourth component (1.0 by default)\n     */\n    constructor(\n    /** defines the first component (0 by default) */\n    x = 0.0, \n    /** defines the second component (0 by default) */\n    y = 0.0, \n    /** defines the third component (0 by default) */\n    z = 0.0, \n    /** defines the fourth component (1.0 by default) */\n    w = 1.0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n    // Statics\n    /**\n     * Creates a new quaternion from a rotation matrix\n     * @param matrix - defines the source matrix\n     * @returns a new quaternion created from the given rotation matrix values\n     */\n    static FromRotationMatrix(matrix) {\n        const result = new Quaternion();\n        Quaternion.FromRotationMatrixToRef(matrix, result);\n        return result;\n    }\n    /**\n     * Updates the given quaternion with the given rotation matrix values\n     * @param matrix - defines the source matrix\n     * @param result - defines the target quaternion\n     */\n    static FromRotationMatrixToRef(matrix, result) {\n        const data = matrix.m;\n        // tslint:disable:one-variable-per-declaration\n        const m11 = data[0], m12 = data[4], m13 = data[8];\n        const m21 = data[1], m22 = data[5], m23 = data[9];\n        const m31 = data[2], m32 = data[6], m33 = data[10];\n        // tslint:enable:one-variable-per-declaration\n        const trace = m11 + m22 + m33;\n        let s;\n        if (trace > 0) {\n            s = 0.5 / Math.sqrt(trace + 1.0);\n            result.w = 0.25 / s;\n            result.x = (m32 - m23) * s;\n            result.y = (m13 - m31) * s;\n            result.z = (m21 - m12) * s;\n        }\n        else if (m11 > m22 && m11 > m33) {\n            s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n            result.w = (m32 - m23) / s;\n            result.x = 0.25 * s;\n            result.y = (m12 + m21) / s;\n            result.z = (m13 + m31) / s;\n        }\n        else if (m22 > m33) {\n            s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n            result.w = (m13 - m31) / s;\n            result.x = (m12 + m21) / s;\n            result.y = 0.25 * s;\n            result.z = (m23 + m32) / s;\n        }\n        else {\n            s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n            result.w = (m21 - m12) / s;\n            result.x = (m13 + m31) / s;\n            result.y = (m23 + m32) / s;\n            result.z = 0.25 * s;\n        }\n    }\n    /**\n     * Returns the dot product (float) between the quaternions \"left\" and \"right\"\n     * @param left - defines the left operand\n     * @param right - defines the right operand\n     * @returns the dot product\n     */\n    static Dot(left, right) {\n        return (left.x * right.x + left.y * right.y + left.z * right.z + left.w * right.w);\n    }\n    /**\n     * Checks if the two quaternions are close to each other\n     * @param quat0 - defines the first quaternion to check\n     * @param quat1 - defines the second quaternion to check\n     * @returns true if the two quaternions are close to each other\n     */\n    static AreClose(quat0, quat1) {\n        const dot = Quaternion.Dot(quat0, quat1);\n        return dot >= 0;\n    }\n    /**\n     * Creates an empty quaternion\n     * @returns a new quaternion set to (0.0, 0.0, 0.0)\n     */\n    static Zero() {\n        return new Quaternion(0.0, 0.0, 0.0, 0.0);\n    }\n    /**\n     * Inverse a given quaternion\n     * @param q - defines the source quaternion\n     * @returns a new quaternion as the inverted current quaternion\n     */\n    static Inverse(q) {\n        return new Quaternion(-q.x, -q.y, -q.z, q.w);\n    }\n    /**\n     * Gets a boolean indicating if the given quaternion is identity\n     * @param quaternion - defines the quaternion to check\n     * @returns true if the quaternion is identity\n     */\n    static IsIdentity(quaternion) {\n        return (quaternion &&\n            quaternion.x === 0 &&\n            quaternion.y === 0 &&\n            quaternion.z === 0 &&\n            quaternion.w === 1);\n    }\n    /**\n     * Creates a quaternion from a rotation around an axis\n     * @param axis - defines the axis to use\n     * @param angle - defines the angle to use (in Euler degrees)\n     * @returns a new quaternion created from the given axis (Vector3) and angle in radians (float)\n     */\n    static RotationAxis(axis, angle) {\n        const angleRad = angle * types_1.DEG2RAD;\n        return Quaternion.RotationAxisToRef(axis, angleRad, new Quaternion());\n    }\n    /**\n     * Creates a rotation around an axis and stores it into the given quaternion\n     * @param axis - defines the axis to use\n     * @param angle - defines the angle to use (in Euler degrees)\n     * @param result - defines the target quaternion\n     * @returns the target quaternion\n     */\n    static RotationAxisToRef(axis, angle, result) {\n        const angleRad = angle * types_1.DEG2RAD;\n        const sin = Math.sin(angleRad / 2);\n        axis.normalize();\n        result.w = Math.cos(angleRad / 2);\n        result.x = axis.x * sin;\n        result.y = axis.y * sin;\n        result.z = axis.z * sin;\n        return result;\n    }\n    /**\n     * Creates a new quaternion from data stored into an array\n     * @param array - defines the data source\n     * @param offset - defines the offset in the source array where the data starts\n     * @returns a new quaternion\n     */\n    static FromArray(array, offset = 0) {\n        return new Quaternion(array[offset], array[offset + 1], array[offset + 2], array[offset + 3]);\n    }\n    /**\n     * Creates a new quaternion from a set of euler angles and stores it in the target quaternion\n     */\n    static FromEulerAnglesRef(x, y, z, result) {\n        return Quaternion.RotationYawPitchRollToRef(y * types_1.DEG2RAD, x * types_1.DEG2RAD, z * types_1.DEG2RAD, result);\n    }\n    /**\n     * Creates a new quaternion from the given Euler float angles (y, x, z)\n     * @param yaw - defines the rotation around Y axis\n     * @param pitch - defines the rotation around X axis\n     * @param roll - defines the rotation around Z axis\n     * @returns the new quaternion\n     */\n    static RotationYawPitchRoll(yaw, pitch, roll) {\n        const q = new Quaternion();\n        Quaternion.RotationYawPitchRollToRef(yaw, pitch, roll, q);\n        return q;\n    }\n    /**\n     * Creates a new rotation from the given Euler float angles (y, x, z) and stores it in the target quaternion\n     * @param yaw - defines the rotation around Y axis\n     * @param pitch - defines the rotation around X axis\n     * @param roll - defines the rotation around Z axis\n     * @param result - defines the target quaternion\n     */\n    static RotationYawPitchRollToRef(yaw, pitch, roll, result) {\n        // Implemented unity-based calculations from: https://stackoverflow.com/a/56055813\n        const halfPitch = pitch * 0.5;\n        const halfYaw = yaw * 0.5;\n        const halfRoll = roll * 0.5;\n        const c1 = Math.cos(halfPitch);\n        const c2 = Math.cos(halfYaw);\n        const c3 = Math.cos(halfRoll);\n        const s1 = Math.sin(halfPitch);\n        const s2 = Math.sin(halfYaw);\n        const s3 = Math.sin(halfRoll);\n        result.x = c2 * s1 * c3 + s2 * c1 * s3;\n        result.y = s2 * c1 * c3 - c2 * s1 * s3;\n        result.z = c2 * c1 * s3 - s2 * s1 * c3;\n        result.w = c2 * c1 * c3 + s2 * s1 * s3;\n    }\n    /**\n     * Creates a new quaternion from the given Euler float angles expressed in z-x-z orientation\n     * @param alpha - defines the rotation around first axis\n     * @param beta - defines the rotation around second axis\n     * @param gamma - defines the rotation around third axis\n     * @returns the new quaternion\n     */\n    static RotationAlphaBetaGamma(alpha, beta, gamma) {\n        const result = new Quaternion();\n        Quaternion.RotationAlphaBetaGammaToRef(alpha, beta, gamma, result);\n        return result;\n    }\n    /**\n     * Creates a new quaternion from the given Euler float angles expressed in z-x-z orientation and stores it in the target quaternion\n     * @param alpha - defines the rotation around first axis\n     * @param beta - defines the rotation around second axis\n     * @param gamma - defines the rotation around third axis\n     * @param result - defines the target quaternion\n     */\n    static RotationAlphaBetaGammaToRef(alpha, beta, gamma, result) {\n        // Produces a quaternion from Euler angles in the z-x-z orientation\n        const halfGammaPlusAlpha = (gamma + alpha) * 0.5;\n        const halfGammaMinusAlpha = (gamma - alpha) * 0.5;\n        const halfBeta = beta * 0.5;\n        result.x = Math.cos(halfGammaMinusAlpha) * Math.sin(halfBeta);\n        result.y = Math.sin(halfGammaMinusAlpha) * Math.sin(halfBeta);\n        result.z = Math.sin(halfGammaPlusAlpha) * Math.cos(halfBeta);\n        result.w = Math.cos(halfGammaPlusAlpha) * Math.cos(halfBeta);\n    }\n    /**\n     * Creates a new quaternion containing the rotation value to reach the target (axis1, axis2, axis3) orientation as a rotated XYZ system (axis1, axis2 and axis3 are normalized during this operation)\n     * @param axis1 - defines the first axis\n     * @param axis2 - defines the second axis\n     * @param axis3 - defines the third axis\n     * @returns the new quaternion\n     */\n    static RotationQuaternionFromAxis(axis1, axis2, axis3) {\n        const quat = new Quaternion(0.0, 0.0, 0.0, 0.0);\n        Quaternion.RotationQuaternionFromAxisToRef(axis1, axis2, axis3, quat);\n        return quat;\n    }\n    /**\n     * Creates a rotation value to reach the target (axis1, axis2, axis3) orientation as a rotated XYZ system (axis1, axis2 and axis3 are normalized during this operation) and stores it in the target quaternion\n     * @param axis1 - defines the first axis\n     * @param axis2 - defines the second axis\n     * @param axis3 - defines the third axis\n     * @param ref - defines the target quaternion\n     */\n    static RotationQuaternionFromAxisToRef(axis1, axis2, axis3, ref) {\n        const rotMat = preallocatedVariables_1.MathTmp.Matrix[0];\n        Matrix_1.Matrix.FromXYZAxesToRef(axis1.normalize(), axis2.normalize(), axis3.normalize(), rotMat);\n        Quaternion.FromRotationMatrixToRef(rotMat, ref);\n    }\n    /**\n     * Interpolates between two quaternions\n     * @param left - defines first quaternion\n     * @param right - defines second quaternion\n     * @param amount - defines the gradient to use\n     * @returns the new interpolated quaternion\n     */\n    static Slerp(left, right, amount) {\n        const result = Quaternion.Identity;\n        Quaternion.SlerpToRef(left, right, amount, result);\n        return result;\n    }\n    /**\n     * Interpolates between two quaternions and stores it into a target quaternion\n     * @param left - defines first quaternion\n     * @param right - defines second quaternion\n     * @param amount - defines the gradient to use\n     * @param result - defines the target quaternion\n     */\n    static SlerpToRef(left, right, amount, result) {\n        let num2;\n        let num3;\n        let num4 = left.x * right.x + left.y * right.y + left.z * right.z + left.w * right.w;\n        let flag = false;\n        if (num4 < 0) {\n            flag = true;\n            num4 = -num4;\n        }\n        if (num4 > 0.999999) {\n            num3 = 1 - amount;\n            num2 = flag ? -amount : amount;\n        }\n        else {\n            const num5 = Math.acos(num4);\n            const num6 = 1.0 / Math.sin(num5);\n            num3 = Math.sin((1.0 - amount) * num5) * num6;\n            num2 = flag\n                ? -Math.sin(amount * num5) * num6\n                : Math.sin(amount * num5) * num6;\n        }\n        result.x = num3 * left.x + num2 * right.x;\n        result.y = num3 * left.y + num2 * right.y;\n        result.z = num3 * left.z + num2 * right.z;\n        result.w = num3 * left.w + num2 * right.w;\n    }\n    /**\n     * Interpolate between two quaternions using Hermite interpolation\n     * @param value1 - defines first quaternion\n     * @param tangent1 - defines the incoming tangent\n     * @param value2 - defines second quaternion\n     * @param tangent2 - defines the outgoing tangent\n     * @param amount - defines the target quaternion\n     * @returns the new interpolated quaternion\n     */\n    static Hermite(value1, tangent1, value2, tangent2, amount) {\n        const squared = amount * amount;\n        const cubed = amount * squared;\n        const part1 = 2.0 * cubed - 3.0 * squared + 1.0;\n        const part2 = -2.0 * cubed + 3.0 * squared;\n        const part3 = cubed - 2.0 * squared + amount;\n        const part4 = cubed - squared;\n        const x = value1.x * part1 +\n            value2.x * part2 +\n            tangent1.x * part3 +\n            tangent2.x * part4;\n        const y = value1.y * part1 +\n            value2.y * part2 +\n            tangent1.y * part3 +\n            tangent2.y * part4;\n        const z = value1.z * part1 +\n            value2.z * part2 +\n            tangent1.z * part3 +\n            tangent2.z * part4;\n        const w = value1.w * part1 +\n            value2.w * part2 +\n            tangent1.w * part3 +\n            tangent2.w * part4;\n        return new Quaternion(x, y, z, w);\n    }\n    /**\n     * Creates an identity quaternion\n     * @returns - the identity quaternion\n     */\n    static get Identity() {\n        return new Quaternion(0.0, 0.0, 0.0, 1.0);\n    }\n    /**\n     * Returns the angle in degrees between two rotations a and b.\n     * @param quat1 - defines the first quaternion\n     * @param quat2 - defines the second quaternion\n     */\n    static Angle(quat1, quat2) {\n        const dot = Quaternion.Dot(quat1, quat2);\n        return Math.acos(Math.min(Math.abs(dot), 1)) * 2 * types_1.RAD2DEG;\n    }\n    /**\n     * Returns a rotation that rotates z degrees around the z axis, x degrees around the x axis, and y degrees around the y axis.\n     * @param x - the rotation on the x axis in euler degrees\n     * @param y - the rotation on the y axis in euler degrees\n     * @param z - the rotation on the z axis in euler degrees\n     */\n    static Euler(x, y, z) {\n        return Quaternion.RotationYawPitchRoll(y * types_1.DEG2RAD, x * types_1.DEG2RAD, z * types_1.DEG2RAD);\n    }\n    /**\n     * Creates a rotation with the specified forward and upwards directions.\n     * @param forward - the direction to look in\n     * @param up - the vector that defines in which direction up is\n     */\n    static LookRotation(forward, up = preallocatedVariables_1.MathTmp.staticUp) {\n        const forwardNew = Vector3_1.Vector3.Normalize(forward);\n        const right = Vector3_1.Vector3.Normalize(Vector3_1.Vector3.Cross(up, forwardNew));\n        const upNew = Vector3_1.Vector3.Cross(forwardNew, right);\n        const m00 = right.x;\n        const m01 = right.y;\n        const m02 = right.z;\n        const m10 = upNew.x;\n        const m11 = upNew.y;\n        const m12 = upNew.z;\n        const m20 = forwardNew.x;\n        const m21 = forwardNew.y;\n        const m22 = forwardNew.z;\n        const num8 = m00 + m11 + m22;\n        const quaternion = new Quaternion();\n        if (num8 > 0) {\n            let num = Math.sqrt(num8 + 1);\n            quaternion.w = num * 0.5;\n            num = 0.5 / num;\n            quaternion.x = (m12 - m21) * num;\n            quaternion.y = (m20 - m02) * num;\n            quaternion.z = (m01 - m10) * num;\n            return quaternion;\n        }\n        if (m00 >= m11 && m00 >= m22) {\n            const num7 = Math.sqrt(1 + m00 - m11 - m22);\n            const num4 = 0.5 / num7;\n            quaternion.x = 0.5 * num7;\n            quaternion.y = (m01 + m10) * num4;\n            quaternion.z = (m02 + m20) * num4;\n            quaternion.w = (m12 - m21) * num4;\n            return quaternion;\n        }\n        if (m11 > m22) {\n            const num6 = Math.sqrt(1 + m11 - m00 - m22);\n            const num3 = 0.5 / num6;\n            quaternion.x = (m10 + m01) * num3;\n            quaternion.y = 0.5 * num6;\n            quaternion.z = (m21 + m12) * num3;\n            quaternion.w = (m20 - m02) * num3;\n            return quaternion;\n        }\n        const num5 = Math.sqrt(1 + m22 - m00 - m11);\n        const num2 = 0.5 / num5;\n        quaternion.x = (m20 + m02) * num2;\n        quaternion.y = (m21 + m12) * num2;\n        quaternion.z = 0.5 * num5;\n        quaternion.w = (m01 - m10) * num2;\n        return quaternion;\n    }\n    /**\n     * The from quaternion is rotated towards to by an angular step of maxDegreesDelta.\n     * @param from - defines the first quaternion\n     * @param to - defines the second quaternion\n     * @param maxDegreesDelta - the interval step\n     */\n    static RotateTowards(from, to, maxDegreesDelta) {\n        const num = Quaternion.Angle(from, to);\n        if (num === 0) {\n            return to;\n        }\n        const t = Math.min(1, maxDegreesDelta / num);\n        return Quaternion.Slerp(from, to, t);\n    }\n    /**\n     * Creates a rotation which rotates from fromDirection to toDirection.\n     * @param from - defines the first direction Vector\n     * @param to - defines the target direction Vector\n     */\n    static FromToRotation(from, to, up = preallocatedVariables_1.MathTmp.staticUp) {\n        // Unity-based calculations implemented from https://forum.unity.com/threads/quaternion-lookrotation-around-an-axis.608470/#post-4069888\n        const v0 = from.normalize();\n        const v1 = to.normalize();\n        const a = Vector3_1.Vector3.Cross(v0, v1);\n        const w = Math.sqrt(v0.lengthSquared() * v1.lengthSquared()) + Vector3_1.Vector3.Dot(v0, v1);\n        if (a.lengthSquared() < 0.0001) {\n            // the vectors are parallel, check w to find direction\n            // if w is 0 then values are opposite, and we sould rotate 180 degrees around the supplied axis\n            // otherwise the vectors in the same direction and no rotation should occur\n            return Math.abs(w) < 0.0001\n                ? new Quaternion(up.x, up.y, up.z, 0).normalized\n                : Quaternion.Identity;\n        }\n        else {\n            return new Quaternion(a.x, a.y, a.z, w).normalized;\n        }\n    }\n    /**\n     * Converts this quaternion to one with the same orientation but with a magnitude of 1.\n     */\n    get normalized() {\n        return this.normalize();\n    }\n    /**\n     * Creates a rotation which rotates from fromDirection to toDirection.\n     * @param from - defines the first Vector\n     * @param to - defines the second Vector\n     * @param up - defines the direction\n     */\n    setFromToRotation(from, to, up = preallocatedVariables_1.MathTmp.staticUp) {\n        const result = Quaternion.FromToRotation(from, to, up);\n        this.x = result.x;\n        this.y = result.y;\n        this.z = result.z;\n        this.w = result.w;\n    }\n    set eulerAngles(euler) {\n        this.setEuler(euler.x, euler.y, euler.z);\n    }\n    /**\n     * Gets or sets the euler angle representation of the rotation.\n     * Implemented unity-based calculations from: https://stackoverflow.com/a/56055813\n     */\n    get eulerAngles() {\n        const out = new Vector3_1.Vector3();\n        // if the input quaternion is normalized, this is exactly one. Otherwise, this acts as a correction factor for the quaternion's not-normalizedness\n        const unit = this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n        // this will have a magnitude of 0.5 or greater if and only if this is a singularity case\n        const test = this.x * this.w - this.y * this.z;\n        if (test > 0.4995 * unit) {\n            // singularity at north pole\n            out.x = Math.PI / 2;\n            out.y = 2 * Math.atan2(this.y, this.x);\n            out.z = 0;\n        }\n        else if (test < -0.4995 * unit) {\n            // singularity at south pole\n            out.x = -Math.PI / 2;\n            out.y = -2 * Math.atan2(this.y, this.x);\n            out.z = 0;\n        }\n        else {\n            // no singularity - this is the majority of cases\n            out.x = Math.asin(2 * (this.w * this.x - this.y * this.z));\n            out.y = Math.atan2(2 * this.w * this.y + 2 * this.z * this.x, 1 - 2 * (this.x * this.x + this.y * this.y));\n            out.z = Math.atan2(2 * this.w * this.z + 2 * this.x * this.y, 1 - 2 * (this.z * this.z + this.x * this.x));\n        }\n        out.x *= types_1.RAD2DEG;\n        out.y *= types_1.RAD2DEG;\n        out.z *= types_1.RAD2DEG;\n        // ensure the degree values are between 0 and 360\n        out.x = Scalar_1.Scalar.Repeat(out.x, 360);\n        out.y = Scalar_1.Scalar.Repeat(out.y, 360);\n        out.z = Scalar_1.Scalar.Repeat(out.z, 360);\n        return out;\n    }\n    /**\n     * Gets a string representation for the current quaternion\n     * @returns a string with the Quaternion coordinates\n     */\n    toString() {\n        return `(${this.x}, ${this.y}, ${this.z}, ${this.w})`;\n    }\n    /**\n     * Gets length of current quaternion\n     * @returns the quaternion length (float)\n     */\n    get length() {\n        return Math.sqrt(this.lengthSquared);\n    }\n    /**\n     * Gets length of current quaternion\n     * @returns the quaternion length (float)\n     */\n    get lengthSquared() {\n        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n    }\n    /**\n     * Gets the class name of the quaternion\n     * @returns the string \"Quaternion\"\n     */\n    getClassName() {\n        return 'Quaternion';\n    }\n    /**\n     * Gets a hash code for this quaternion\n     * @returns the quaternion hash code\n     */\n    getHashCode() {\n        let hash = this.x || 0;\n        hash = (hash * 397) ^ (this.y || 0);\n        hash = (hash * 397) ^ (this.z || 0);\n        hash = (hash * 397) ^ (this.w || 0);\n        return hash;\n    }\n    /**\n     * Copy the quaternion to an array\n     * @returns a new array populated with 4 elements from the quaternion coordinates\n     */\n    asArray() {\n        return [this.x, this.y, this.z, this.w];\n    }\n    /**\n     * Check if two quaternions are equals\n     * @param otherQuaternion - defines the second operand\n     * @returns true if the current quaternion and the given one coordinates are strictly equals\n     */\n    equals(otherQuaternion) {\n        return (otherQuaternion &&\n            this.x === otherQuaternion.x &&\n            this.y === otherQuaternion.y &&\n            this.z === otherQuaternion.z &&\n            this.w === otherQuaternion.w);\n    }\n    /**\n     * Clone the current quaternion\n     * @returns a new quaternion copied from the current one\n     */\n    clone() {\n        return new Quaternion(this.x, this.y, this.z, this.w);\n    }\n    /**\n     * Copy a quaternion to the current one\n     * @param other - defines the other quaternion\n     * @returns the updated current quaternion\n     */\n    copyFrom(other) {\n        this.x = other.x;\n        this.y = other.y;\n        this.z = other.z;\n        this.w = other.w;\n        return this;\n    }\n    /**\n     * Updates the current quaternion with the given float coordinates\n     * @param x - defines the x coordinate\n     * @param y - defines the y coordinate\n     * @param z - defines the z coordinate\n     * @param w - defines the w coordinate\n     * @returns the updated current quaternion\n     */\n    copyFromFloats(x, y, z, w) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n        return this;\n    }\n    /**\n     * Updates the current quaternion from the given float coordinates\n     * @param x - defines the x coordinate\n     * @param y - defines the y coordinate\n     * @param z - defines the z coordinate\n     * @param w - defines the w coordinate\n     * @returns the updated current quaternion\n     */\n    set(x, y, z, w) {\n        return this.copyFromFloats(x, y, z, w);\n    }\n    /**\n     * Updates the current quaternion from the given euler angles\n     * @returns the updated current quaternion\n     */\n    setEuler(x, y, z) {\n        Quaternion.RotationYawPitchRollToRef(y * types_1.DEG2RAD, x * types_1.DEG2RAD, z * types_1.DEG2RAD, this);\n        return this;\n    }\n    /**\n     * @internal\n     * Adds two quaternions\n     * @param other - defines the second operand\n     * @returns a new quaternion as the addition result of the given one and the current quaternion\n     */\n    add(other) {\n        return new Quaternion(this.x + other.x, this.y + other.y, this.z + other.z, this.w + other.w);\n    }\n    /**\n     * @internal\n     * Add a quaternion to the current one\n     * @param other - defines the quaternion to add\n     * @returns the current quaternion\n     */\n    addInPlace(other) {\n        this.x += other.x;\n        this.y += other.y;\n        this.z += other.z;\n        this.w += other.w;\n        return this;\n    }\n    /**\n     * Subtract two quaternions\n     * @param other - defines the second operand\n     * @returns a new quaternion as the subtraction result of the given one from the current one\n     */\n    subtract(other) {\n        return new Quaternion(this.x - other.x, this.y - other.y, this.z - other.z, this.w - other.w);\n    }\n    /**\n     * Multiplies the current quaternion by a scale factor\n     * @param value - defines the scale factor\n     * @returns a new quaternion set by multiplying the current quaternion coordinates by the float \"scale\"\n     */\n    scale(value) {\n        return new Quaternion(this.x * value, this.y * value, this.z * value, this.w * value);\n    }\n    /**\n     * Scale the current quaternion values by a factor and stores the result to a given quaternion\n     * @param scale - defines the scale factor\n     * @param result - defines the Quaternion object where to store the result\n     * @returns the unmodified current quaternion\n     */\n    scaleToRef(scale, result) {\n        result.x = this.x * scale;\n        result.y = this.y * scale;\n        result.z = this.z * scale;\n        result.w = this.w * scale;\n        return this;\n    }\n    /**\n     * Multiplies in place the current quaternion by a scale factor\n     * @param value - defines the scale factor\n     * @returns the current modified quaternion\n     */\n    scaleInPlace(value) {\n        this.x *= value;\n        this.y *= value;\n        this.z *= value;\n        this.w *= value;\n        return this;\n    }\n    /**\n     * Scale the current quaternion values by a factor and add the result to a given quaternion\n     * @param scale - defines the scale factor\n     * @param result - defines the Quaternion object where to store the result\n     * @returns the unmodified current quaternion\n     */\n    scaleAndAddToRef(scale, result) {\n        result.x += this.x * scale;\n        result.y += this.y * scale;\n        result.z += this.z * scale;\n        result.w += this.w * scale;\n        return this;\n    }\n    /**\n     * Multiplies two quaternions\n     * @param q1 - defines the second operand\n     * @returns a new quaternion set as the multiplication result of the current one with the given one \"q1\"\n     */\n    multiply(q1) {\n        const result = new Quaternion(0, 0, 0, 1.0);\n        this.multiplyToRef(q1, result);\n        return result;\n    }\n    /**\n     * Sets the given \"result\" as the the multiplication result of the current one with the given one \"q1\"\n     * @param q1 - defines the second operand\n     * @param result - defines the target quaternion\n     * @returns the current quaternion\n     */\n    multiplyToRef(q1, result) {\n        const x = this.x * q1.w + this.y * q1.z - this.z * q1.y + this.w * q1.x;\n        const y = -this.x * q1.z + this.y * q1.w + this.z * q1.x + this.w * q1.y;\n        const z = this.x * q1.y - this.y * q1.x + this.z * q1.w + this.w * q1.z;\n        const w = -this.x * q1.x - this.y * q1.y - this.z * q1.z + this.w * q1.w;\n        result.copyFromFloats(x, y, z, w);\n        return this;\n    }\n    /**\n     * Updates the current quaternion with the multiplication of itself with the given one \"q1\"\n     * @param q1 - defines the second operand\n     * @returns the currentupdated quaternion\n     */\n    multiplyInPlace(q1) {\n        this.multiplyToRef(q1, this);\n        return this;\n    }\n    /**\n     * Conjugates (1-q) the current quaternion and stores the result in the given quaternion\n     * @param ref - defines the target quaternion\n     * @returns the current quaternion\n     */\n    conjugateToRef(ref) {\n        ref.copyFromFloats(-this.x, -this.y, -this.z, this.w);\n        return this;\n    }\n    /**\n     * Conjugates in place (1-q) the current quaternion\n     * @returns the current updated quaternion\n     */\n    conjugateInPlace() {\n        this.x *= -1;\n        this.y *= -1;\n        this.z *= -1;\n        return this;\n    }\n    /**\n     * Conjugates in place (1-q) the current quaternion\n     * @returns a new quaternion\n     */\n    conjugate() {\n        const result = new Quaternion(-this.x, -this.y, -this.z, this.w);\n        return result;\n    }\n    /**\n     * Normalize in place the current quaternion\n     * @returns the current updated quaternion\n     */\n    normalize() {\n        const length = 1.0 / this.length;\n        this.x *= length;\n        this.y *= length;\n        this.z *= length;\n        this.w *= length;\n        return this;\n    }\n    angleAxis(degress, axis) {\n        if (axis.lengthSquared() === 0) {\n            return Quaternion.Identity;\n        }\n        const result = Quaternion.Identity;\n        let radians = degress * types_1.DEG2RAD;\n        radians *= 0.5;\n        let a2 = axis.normalize();\n        a2 = axis.scaleInPlace(Math.sin(radians));\n        result.x = a2.x;\n        result.y = a2.y;\n        result.z = a2.z;\n        result.w = Math.cos(radians);\n        return result.normalize();\n    }\n    /**\n     * Updates the given rotation matrix with the current quaternion values\n     * @param result - defines the target matrix\n     * @returns the current unchanged quaternion\n     */\n    toRotationMatrix(result) {\n        Matrix_1.Matrix.FromQuaternionToRef(this, result);\n        return this;\n    }\n    /**\n     * Updates the current quaternion from the given rotation matrix values\n     * @param matrix - defines the source matrix\n     * @returns the current updated quaternion\n     */\n    fromRotationMatrix(matrix) {\n        Quaternion.FromRotationMatrixToRef(matrix, this);\n        return this;\n    }\n}\nexports.Quaternion = Quaternion;\n//# sourceMappingURL=Quaternion.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Vector3 = void 0;\nconst preallocatedVariables_1 = require(\"./preallocatedVariables\");\nconst types_1 = require(\"./types\");\nconst Quaternion_1 = require(\"./Quaternion\");\nconst Scalar_1 = require(\"./Scalar\");\n/**\n * Classed used to store (x,y,z) vector representation\n * A Vector3 is the main object used in 3D geometry\n * It can represent etiher the coordinates of a point the space, either a direction\n * Reminder: Babylon.js uses a left handed forward facing system\n * @public\n */\nclass Vector3 {\n    /**\n     * Creates a new Vector3 object from the given x, y, z (floats) coordinates.\n     * @param x - defines the first coordinates (on X axis)\n     * @param y - defines the second coordinates (on Y axis)\n     * @param z - defines the third coordinates (on Z axis)\n     */\n    constructor(\n    /**\n     * Defines the first coordinates (on X axis)\n     */\n    x = 0, \n    /**\n     * Defines the second coordinates (on Y axis)\n     */\n    y = 0, \n    /**\n     * Defines the third coordinates (on Z axis)\n     */\n    z = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    /**\n     * Gets a boolean indicating that the vector is non uniform meaning x, y or z are not all the same\n     */\n    get isNonUniform() {\n        const absX = Math.abs(this.x);\n        const absY = Math.abs(this.y);\n        if (absX !== absY) {\n            return true;\n        }\n        const absZ = Math.abs(this.z);\n        if (absX !== absZ) {\n            return true;\n        }\n        if (absY !== absZ) {\n            return true;\n        }\n        return false;\n    }\n    // Statics\n    /**\n     * Returns a new Vector3 as the result of the addition of the two given vectors.\n     * @param vector1 - the first vector\n     * @param vector2 - the second vector\n     * @returns the resulting vector\n     */\n    static Add(vector1, vector2) {\n        return new Vector3(vector1.x, vector1.y, vector1.z).addInPlace(vector2);\n    }\n    /**\n     * Get the clip factor between two vectors\n     * @param vector0 - defines the first operand\n     * @param vector1 - defines the second operand\n     * @param axis - defines the axis to use\n     * @param size - defines the size along the axis\n     * @returns the clip factor\n     */\n    static GetClipFactor(vector0, vector1, axis, size) {\n        const d0 = Vector3.Dot(vector0, axis) - size;\n        const d1 = Vector3.Dot(vector1, axis) - size;\n        const s = d0 / (d0 - d1);\n        return s;\n    }\n    /**\n     * Get angle between two vectors\n     * @param vector0 - angle between vector0 and vector1\n     * @param vector1 - angle between vector0 and vector1\n     * @param normal - direction of the normal\n     * @returns the angle between vector0 and vector1\n     */\n    static GetAngleBetweenVectors(vector0, vector1, normal) {\n        const v0 = vector0.normalizeToRef(preallocatedVariables_1.MathTmp.Vector3[1]);\n        const v1 = vector1.normalizeToRef(preallocatedVariables_1.MathTmp.Vector3[2]);\n        const dot = Vector3.Dot(v0, v1);\n        const n = preallocatedVariables_1.MathTmp.Vector3[3];\n        Vector3.CrossToRef(v0, v1, n);\n        if (Vector3.Dot(n, normal) > 0) {\n            return Math.acos(dot);\n        }\n        return -Math.acos(dot);\n    }\n    /**\n     * Returns a new Vector3 set from the index \"offset\" of the given array\n     * @param array - defines the source array\n     * @param offset - defines the offset in the source array\n     * @returns the new Vector3\n     */\n    static FromArray(array, offset = 0) {\n        return new Vector3(array[offset], array[offset + 1], array[offset + 2]);\n    }\n    /**\n     * Returns a new Vector3 set from the index \"offset\" of the given FloatArray\n     * This function is deprecated.  Use FromArray instead\n     * @param array - defines the source array\n     * @param offset - defines the offset in the source array\n     * @returns the new Vector3\n     */\n    static FromFloatArray(array, offset) {\n        return Vector3.FromArray(array, offset);\n    }\n    /**\n     * Sets the given vector \"result\" with the element values from the index \"offset\" of the given array\n     * @param array - defines the source array\n     * @param offset - defines the offset in the source array\n     * @param result - defines the Vector3 where to store the result\n     */\n    static FromArrayToRef(array, offset, result) {\n        result.x = array[offset];\n        result.y = array[offset + 1];\n        result.z = array[offset + 2];\n    }\n    /**\n     * Sets the given vector \"result\" with the element values from the index \"offset\" of the given FloatArray\n     * This function is deprecated.  Use FromArrayToRef instead.\n     * @param array - defines the source array\n     * @param offset - defines the offset in the source array\n     * @param result - defines the Vector3 where to store the result\n     */\n    static FromFloatArrayToRef(array, offset, result) {\n        return Vector3.FromArrayToRef(array, offset, result);\n    }\n    /**\n     * Sets the given vector \"result\" with the given floats.\n     * @param x - defines the x coordinate of the source\n     * @param y - defines the y coordinate of the source\n     * @param z - defines the z coordinate of the source\n     * @param result - defines the Vector3 where to store the result\n     */\n    static FromFloatsToRef(x, y, z, result) {\n        result.copyFromFloats(x, y, z);\n    }\n    /**\n     * Returns a new Vector3 set to (0.0, 0.0, 0.0)\n     * @returns a new empty Vector3\n     */\n    static Zero() {\n        return new Vector3(0.0, 0.0, 0.0);\n    }\n    /**\n     * Returns a new Vector3 set to (1.0, 1.0, 1.0)\n     * @returns a new unit Vector3\n     */\n    static One() {\n        return new Vector3(1.0, 1.0, 1.0);\n    }\n    /**\n     * Returns a new Vector3 set to (0.0, 1.0, 0.0)\n     * @returns a new up Vector3\n     */\n    static Up() {\n        return new Vector3(0.0, 1.0, 0.0);\n    }\n    /**\n     * Returns a new Vector3 set to (0.0, -1.0, 0.0)\n     * @returns a new down Vector3\n     */\n    static Down() {\n        return new Vector3(0.0, -1.0, 0.0);\n    }\n    /**\n     * Returns a new Vector3 set to (0.0, 0.0, 1.0)\n     * @returns a new forward Vector3\n     */\n    static Forward() {\n        return new Vector3(0.0, 0.0, 1.0);\n    }\n    /**\n     * Returns a new Vector3 set to (0.0, 0.0, -1.0)\n     * @returns a new forward Vector3\n     */\n    static Backward() {\n        return new Vector3(0.0, 0.0, -1.0);\n    }\n    /**\n     * Returns a new Vector3 set to (1.0, 0.0, 0.0)\n     * @returns a new right Vector3\n     */\n    static Right() {\n        return new Vector3(1.0, 0.0, 0.0);\n    }\n    /**\n     * Returns a new Vector3 set to (-1.0, 0.0, 0.0)\n     * @returns a new left Vector3\n     */\n    static Left() {\n        return new Vector3(-1.0, 0.0, 0.0);\n    }\n    /**\n     * Returns a new Vector3 set with the result of the transformation by the given matrix of the given vector.\n     * This method computes tranformed coordinates only, not transformed direction vectors (ie. it takes translation in account)\n     * @param vector - defines the Vector3 to transform\n     * @param transformation - defines the transformation matrix\n     * @returns the transformed Vector3\n     */\n    static TransformCoordinates(vector, transformation) {\n        const result = Vector3.Zero();\n        Vector3.TransformCoordinatesToRef(vector, transformation, result);\n        return result;\n    }\n    /**\n     * Sets the given vector \"result\" coordinates with the result of the transformation by the given matrix of the given vector\n     * This method computes tranformed coordinates only, not transformed direction vectors (ie. it takes translation in account)\n     * @param vector - defines the Vector3 to transform\n     * @param transformation - defines the transformation matrix\n     * @param result - defines the Vector3 where to store the result\n     */\n    static TransformCoordinatesToRef(vector, transformation, result) {\n        return Vector3.TransformCoordinatesFromFloatsToRef(vector.x, vector.y, vector.z, transformation, result);\n    }\n    /**\n     * Sets the given vector \"result\" coordinates with the result of the transformation by the given matrix of the given floats (x, y, z)\n     * This method computes tranformed coordinates only, not transformed direction vectors\n     * @param x - define the x coordinate of the source vector\n     * @param y - define the y coordinate of the source vector\n     * @param z - define the z coordinate of the source vector\n     * @param transformation - defines the transformation matrix\n     * @param result - defines the Vector3 where to store the result\n     */\n    static TransformCoordinatesFromFloatsToRef(x, y, z, transformation, result) {\n        const m = transformation.m;\n        const rx = x * m[0] + y * m[4] + z * m[8] + m[12];\n        const ry = x * m[1] + y * m[5] + z * m[9] + m[13];\n        const rz = x * m[2] + y * m[6] + z * m[10] + m[14];\n        const rw = 1 / (x * m[3] + y * m[7] + z * m[11] + m[15]);\n        result.x = rx * rw;\n        result.y = ry * rw;\n        result.z = rz * rw;\n    }\n    /**\n     * Returns a new Vector3 set with the result of the normal transformation by the given matrix of the given vector\n     * This methods computes transformed normalized direction vectors only (ie. it does not apply translation)\n     * @param vector - defines the Vector3 to transform\n     * @param transformation - defines the transformation matrix\n     * @returns the new Vector3\n     */\n    static TransformNormal(vector, transformation) {\n        const result = Vector3.Zero();\n        Vector3.TransformNormalToRef(vector, transformation, result);\n        return result;\n    }\n    /**\n     * Sets the given vector \"result\" with the result of the normal transformation by the given matrix of the given vector\n     * This methods computes transformed normalized direction vectors only (ie. it does not apply translation)\n     * @param vector - defines the Vector3 to transform\n     * @param transformation - defines the transformation matrix\n     * @param result - defines the Vector3 where to store the result\n     */\n    static TransformNormalToRef(vector, transformation, result) {\n        this.TransformNormalFromFloatsToRef(vector.x, vector.y, vector.z, transformation, result);\n    }\n    /**\n     * Sets the given vector \"result\" with the result of the normal transformation by the given matrix of the given floats (x, y, z)\n     * This methods computes transformed normalized direction vectors only (ie. it does not apply translation)\n     * @param x - define the x coordinate of the source vector\n     * @param y - define the y coordinate of the source vector\n     * @param z - define the z coordinate of the source vector\n     * @param transformation - defines the transformation matrix\n     * @param result - defines the Vector3 where to store the result\n     */\n    static TransformNormalFromFloatsToRef(x, y, z, transformation, result) {\n        const m = transformation.m;\n        result.x = x * m[0] + y * m[4] + z * m[8];\n        result.y = x * m[1] + y * m[5] + z * m[9];\n        result.z = x * m[2] + y * m[6] + z * m[10];\n    }\n    /**\n     * Returns a new Vector3 located for \"amount\" on the CatmullRom interpolation spline defined by the vectors \"value1\", \"value2\", \"value3\", \"value4\"\n     * @param value1 - defines the first control point\n     * @param value2 - defines the second control point\n     * @param value3 - defines the third control point\n     * @param value4 - defines the fourth control point\n     * @param amount - defines the amount on the spline to use\n     * @returns the new Vector3\n     */\n    static CatmullRom(value1, value2, value3, value4, amount) {\n        const squared = amount * amount;\n        const cubed = amount * squared;\n        const x = 0.5 *\n            (2.0 * value2.x +\n                (-value1.x + value3.x) * amount +\n                (2.0 * value1.x - 5.0 * value2.x + 4.0 * value3.x - value4.x) *\n                    squared +\n                (-value1.x + 3.0 * value2.x - 3.0 * value3.x + value4.x) * cubed);\n        const y = 0.5 *\n            (2.0 * value2.y +\n                (-value1.y + value3.y) * amount +\n                (2.0 * value1.y - 5.0 * value2.y + 4.0 * value3.y - value4.y) *\n                    squared +\n                (-value1.y + 3.0 * value2.y - 3.0 * value3.y + value4.y) * cubed);\n        const z = 0.5 *\n            (2.0 * value2.z +\n                (-value1.z + value3.z) * amount +\n                (2.0 * value1.z - 5.0 * value2.z + 4.0 * value3.z - value4.z) *\n                    squared +\n                (-value1.z + 3.0 * value2.z - 3.0 * value3.z + value4.z) * cubed);\n        return new Vector3(x, y, z);\n    }\n    /**\n     * Returns a new Vector3 set with the coordinates of \"value\", if the vector \"value\" is in the cube defined by the vectors \"min\" and \"max\"\n     * If a coordinate value of \"value\" is lower than one of the \"min\" coordinate, then this \"value\" coordinate is set with the \"min\" one\n     * If a coordinate value of \"value\" is greater than one of the \"max\" coordinate, then this \"value\" coordinate is set with the \"max\" one\n     * @param value - defines the current value\n     * @param min - defines the lower range value\n     * @param max - defines the upper range value\n     * @returns the new Vector3\n     */\n    static Clamp(value, min, max) {\n        const v = new Vector3();\n        Vector3.ClampToRef(value, min, max, v);\n        return v;\n    }\n    /**\n     * Sets the given vector \"result\" with the coordinates of \"value\", if the vector \"value\" is in the cube defined by the vectors \"min\" and \"max\"\n     * If a coordinate value of \"value\" is lower than one of the \"min\" coordinate, then this \"value\" coordinate is set with the \"min\" one\n     * If a coordinate value of \"value\" is greater than one of the \"max\" coordinate, then this \"value\" coordinate is set with the \"max\" one\n     * @param value - defines the current value\n     * @param min - defines the lower range value\n     * @param max - defines the upper range value\n     * @param result - defines the Vector3 where to store the result\n     */\n    static ClampToRef(value, min, max, result) {\n        let x = value.x;\n        x = x > max.x ? max.x : x;\n        x = x < min.x ? min.x : x;\n        let y = value.y;\n        y = y > max.y ? max.y : y;\n        y = y < min.y ? min.y : y;\n        let z = value.z;\n        z = z > max.z ? max.z : z;\n        z = z < min.z ? min.z : z;\n        result.copyFromFloats(x, y, z);\n    }\n    /**\n     * Returns a new Vector3 located for \"amount\" (float) on the Hermite interpolation spline defined by the vectors \"value1\", \"tangent1\", \"value2\", \"tangent2\"\n     * @param value1 - defines the first control point\n     * @param tangent1 - defines the first tangent vector\n     * @param value2 - defines the second control point\n     * @param tangent2 - defines the second tangent vector\n     * @param amount - defines the amount on the interpolation spline (between 0 and 1)\n     * @returns the new Vector3\n     */\n    static Hermite(value1, tangent1, value2, tangent2, amount) {\n        const squared = amount * amount;\n        const cubed = amount * squared;\n        const part1 = 2.0 * cubed - 3.0 * squared + 1.0;\n        const part2 = -2.0 * cubed + 3.0 * squared;\n        const part3 = cubed - 2.0 * squared + amount;\n        const part4 = cubed - squared;\n        const x = value1.x * part1 +\n            value2.x * part2 +\n            tangent1.x * part3 +\n            tangent2.x * part4;\n        const y = value1.y * part1 +\n            value2.y * part2 +\n            tangent1.y * part3 +\n            tangent2.y * part4;\n        const z = value1.z * part1 +\n            value2.z * part2 +\n            tangent1.z * part3 +\n            tangent2.z * part4;\n        return new Vector3(x, y, z);\n    }\n    /**\n     * Returns a new Vector3 located for \"amount\" (float) on the linear interpolation between the vectors \"start\" and \"end\"\n     * @param start - defines the start value\n     * @param end - defines the end value\n     * @param amount - max defines amount between both (between 0 and 1)\n     * @returns the new Vector3\n     */\n    static Lerp(start, end, amount) {\n        const result = new Vector3(0, 0, 0);\n        Vector3.LerpToRef(start, end, amount, result);\n        return result;\n    }\n    /**\n     * Sets the given vector \"result\" with the result of the linear interpolation from the vector \"start\" for \"amount\" to the vector \"end\"\n     * @param start - defines the start value\n     * @param end - defines the end value\n     * @param amount - max defines amount between both (between 0 and 1)\n     * @param result - defines the Vector3 where to store the result\n     */\n    static LerpToRef(start, end, amount, result) {\n        result.x = start.x + (end.x - start.x) * amount;\n        result.y = start.y + (end.y - start.y) * amount;\n        result.z = start.z + (end.z - start.z) * amount;\n    }\n    /**\n     * Returns the dot product (float) between the vectors \"left\" and \"right\"\n     * @param left - defines the left operand\n     * @param right - defines the right operand\n     * @returns the dot product\n     */\n    static Dot(left, right) {\n        return left.x * right.x + left.y * right.y + left.z * right.z;\n    }\n    /**\n     * Returns a new Vector3 as the cross product of the vectors \"left\" and \"right\"\n     * The cross product is then orthogonal to both \"left\" and \"right\"\n     * @param left - defines the left operand\n     * @param right - defines the right operand\n     * @returns the cross product\n     */\n    static Cross(left, right) {\n        const result = Vector3.Zero();\n        Vector3.CrossToRef(left, right, result);\n        return result;\n    }\n    /**\n     * Sets the given vector \"result\" with the cross product of \"left\" and \"right\"\n     * The cross product is then orthogonal to both \"left\" and \"right\"\n     * @param left - defines the left operand\n     * @param right - defines the right operand\n     * @param result - defines the Vector3 where to store the result\n     */\n    static CrossToRef(left, right, result) {\n        const x = left.y * right.z - left.z * right.y;\n        const y = left.z * right.x - left.x * right.z;\n        const z = left.x * right.y - left.y * right.x;\n        result.copyFromFloats(x, y, z);\n    }\n    /**\n     * Returns a new Vector3 as the normalization of the given vector\n     * @param vector - defines the Vector3 to normalize\n     * @returns the new Vector3\n     */\n    static Normalize(vector) {\n        const result = Vector3.Zero();\n        Vector3.NormalizeToRef(vector, result);\n        return result;\n    }\n    /**\n     * Sets the given vector \"result\" with the normalization of the given first vector\n     * @param vector - defines the Vector3 to normalize\n     * @param result - defines the Vector3 where to store the result\n     */\n    static NormalizeToRef(vector, result) {\n        vector.normalizeToRef(result);\n    }\n    /**\n     * Gets the minimal coordinate values between two Vector3\n     * @param left - defines the first operand\n     * @param right - defines the second operand\n     * @returns the new Vector3\n     */\n    static Minimize(left, right) {\n        const min = new Vector3(left.x, left.y, left.z);\n        min.minimizeInPlace(right);\n        return min;\n    }\n    /**\n     * Gets the maximal coordinate values between two Vector3\n     * @param left - defines the first operand\n     * @param right - defines the second operand\n     * @returns the new Vector3\n     */\n    static Maximize(left, right) {\n        const max = new Vector3(left.x, left.y, left.z);\n        max.maximizeInPlace(right);\n        return max;\n    }\n    /**\n     * Returns the distance between the vectors \"value1\" and \"value2\"\n     * @param value1 - defines the first operand\n     * @param value2 - defines the second operand\n     * @returns the distance\n     */\n    static Distance(value1, value2) {\n        return Math.sqrt(Vector3.DistanceSquared(value1, value2));\n    }\n    /**\n     * Returns the squared distance between the vectors \"value1\" and \"value2\"\n     * @param value1 - defines the first operand\n     * @param value2 - defines the second operand\n     * @returns the squared distance\n     */\n    static DistanceSquared(value1, value2) {\n        const x = value1.x - value2.x;\n        const y = value1.y - value2.y;\n        const z = value1.z - value2.z;\n        return x * x + y * y + z * z;\n    }\n    /**\n     * Returns a new Vector3 located at the center between \"value1\" and \"value2\"\n     * @param value1 - defines the first operand\n     * @param value2 - defines the second operand\n     * @returns the new Vector3\n     */\n    static Center(value1, value2) {\n        const center = Vector3.Add(value1, value2);\n        center.scaleInPlace(0.5);\n        return center;\n    }\n    /**\n     * Given three orthogonal normalized left-handed oriented Vector3 axis in space (target system),\n     * RotationFromAxis() returns the rotation Euler angles (ex : rotation.x, rotation.y, rotation.z) to apply\n     * to something in order to rotate it from its local system to the given target system\n     * Note: axis1, axis2 and axis3 are normalized during this operation\n     * @param axis1 - defines the first axis\n     * @param axis2 - defines the second axis\n     * @param axis3 - defines the third axis\n     * @returns a new Vector3\n     */\n    static RotationFromAxis(axis1, axis2, axis3) {\n        const rotation = Vector3.Zero();\n        Vector3.RotationFromAxisToRef(axis1, axis2, axis3, rotation);\n        return rotation;\n    }\n    /**\n     * The same than RotationFromAxis but updates the given ref Vector3 parameter instead of returning a new Vector3\n     * @param axis1 - defines the first axis\n     * @param axis2 - defines the second axis\n     * @param axis3 - defines the third axis\n     * @param ref - defines the Vector3 where to store the result\n     */\n    static RotationFromAxisToRef(axis1, axis2, axis3, ref) {\n        const quat = preallocatedVariables_1.MathTmp.Quaternion[0];\n        Quaternion_1.Quaternion.RotationQuaternionFromAxisToRef(axis1, axis2, axis3, quat);\n        ref.copyFrom(quat.eulerAngles);\n    }\n    /**\n     * Creates a string representation of the Vector3\n     * @returns a string with the Vector3 coordinates.\n     */\n    toString() {\n        return `(${this.x}, ${this.y}, ${this.z})`;\n    }\n    /**\n     * Gets the class name\n     * @returns the string \"Vector3\"\n     */\n    getClassName() {\n        return 'Vector3';\n    }\n    /**\n     * Creates the Vector3 hash code\n     * @returns a number which tends to be unique between Vector3 instances\n     */\n    getHashCode() {\n        let hash = this.x || 0;\n        hash = (hash * 397) ^ (this.y || 0);\n        hash = (hash * 397) ^ (this.z || 0);\n        return hash;\n    }\n    // Operators\n    /**\n     * Creates an array containing three elements : the coordinates of the Vector3\n     * @returns a new array of numbers\n     */\n    asArray() {\n        const result = [];\n        this.toArray(result, 0);\n        return result;\n    }\n    /**\n     * Populates the given array or FloatArray from the given index with the successive coordinates of the Vector3\n     * @param array - defines the destination array\n     * @param index - defines the offset in the destination array\n     * @returns the current Vector3\n     */\n    toArray(array, index = 0) {\n        array[index] = this.x;\n        array[index + 1] = this.y;\n        array[index + 2] = this.z;\n        return this;\n    }\n    /**\n     * Converts the current Vector3 into a quaternion (considering that the Vector3 contains Euler angles representation of a rotation)\n     * @returns a new Quaternion object, computed from the Vector3 coordinates\n     */\n    toQuaternion() {\n        return Quaternion_1.Quaternion.Identity.setEuler(this.y, this.x, this.z);\n    }\n    /**\n     * Adds the given vector to the current Vector3\n     * @param otherVector - defines the second operand\n     * @returns the current updated Vector3\n     */\n    addInPlace(otherVector) {\n        return this.addInPlaceFromFloats(otherVector.x, otherVector.y, otherVector.z);\n    }\n    /**\n     * Adds the given coordinates to the current Vector3\n     * @param x - defines the x coordinate of the operand\n     * @param y - defines the y coordinate of the operand\n     * @param z - defines the z coordinate of the operand\n     * @returns the current updated Vector3\n     */\n    addInPlaceFromFloats(x, y, z) {\n        this.x += x;\n        this.y += y;\n        this.z += z;\n        return this;\n    }\n    /**\n     * Gets a new Vector3, result of the addition the current Vector3 and the given vector\n     * @param otherVector - defines the second operand\n     * @returns the resulting Vector3\n     */\n    add(otherVector) {\n        return new Vector3(this.x + otherVector.x, this.y + otherVector.y, this.z + otherVector.z);\n    }\n    /**\n     * Adds the current Vector3 to the given one and stores the result in the vector \"result\"\n     * @param otherVector - defines the second operand\n     * @param result - defines the Vector3 object where to store the result\n     * @returns the current Vector3\n     */\n    addToRef(otherVector, result) {\n        return result.copyFromFloats(this.x + otherVector.x, this.y + otherVector.y, this.z + otherVector.z);\n    }\n    /**\n     * Subtract the given vector from the current Vector3\n     * @param otherVector - defines the second operand\n     * @returns the current updated Vector3\n     */\n    subtractInPlace(otherVector) {\n        this.x -= otherVector.x;\n        this.y -= otherVector.y;\n        this.z -= otherVector.z;\n        return this;\n    }\n    /**\n     * Returns a new Vector3, result of the subtraction of the given vector from the current Vector3\n     * @param otherVector - defines the second operand\n     * @returns the resulting Vector3\n     */\n    subtract(otherVector) {\n        return new Vector3(this.x - otherVector.x, this.y - otherVector.y, this.z - otherVector.z);\n    }\n    /**\n     * Subtracts the given vector from the current Vector3 and stores the result in the vector \"result\".\n     * @param otherVector - defines the second operand\n     * @param result - defines the Vector3 object where to store the result\n     * @returns the current Vector3\n     */\n    subtractToRef(otherVector, result) {\n        return this.subtractFromFloatsToRef(otherVector.x, otherVector.y, otherVector.z, result);\n    }\n    /**\n     * Returns a new Vector3 set with the subtraction of the given floats from the current Vector3 coordinates\n     * @param x - defines the x coordinate of the operand\n     * @param y - defines the y coordinate of the operand\n     * @param z - defines the z coordinate of the operand\n     * @returns the resulting Vector3\n     */\n    subtractFromFloats(x, y, z) {\n        return new Vector3(this.x - x, this.y - y, this.z - z);\n    }\n    /**\n     * Subtracts the given floats from the current Vector3 coordinates and set the given vector \"result\" with this result\n     * @param x - defines the x coordinate of the operand\n     * @param y - defines the y coordinate of the operand\n     * @param z - defines the z coordinate of the operand\n     * @param result - defines the Vector3 object where to store the result\n     * @returns the current Vector3\n     */\n    subtractFromFloatsToRef(x, y, z, result) {\n        return result.copyFromFloats(this.x - x, this.y - y, this.z - z);\n    }\n    /**\n     * Multiplies this vector (with an implicit 1 in the 4th dimension) and m, and divides by perspective\n     * @param matrix - The transformation matrix\n     */\n    applyMatrix4(matrix) {\n        this.applyMatrix4ToRef(matrix, this);\n    }\n    /**\n     * Multiplies this vector (with an implicit 1 in the 4th dimension) and m, and divides by perspective and set the given vector \"result\" with this result\n     * @param matrix - The transformation matrix\n     * @param result - defines the Vector3 object where to store the result\n     * @returns the current Vector3\n     */\n    applyMatrix4ToRef(matrix, result) {\n        const { x, y, z } = this;\n        const { m } = matrix;\n        const w = 1 / (m[3] * x + m[7] * y + m[11] * z + m[15]);\n        result.x = (m[0] * x + m[4] * y + m[8] * z + m[12]) * w;\n        result.y = (m[1] * x + m[5] * y + m[9] * z + m[13]) * w;\n        result.z = (m[2] * x + m[6] * y + m[10] * z + m[14]) * w;\n        return result;\n    }\n    /**\n     * Rotates the current Vector3 based on the given quaternion\n     * @param q - defines the Quaternion\n     * @returns the current Vector3\n     */\n    rotate(q) {\n        return this.rotateToRef(q, this);\n    }\n    /**\n     * Rotates current Vector3 based on the given quaternion, but applies the rotation to target Vector3.\n     * @param q - defines the Quaternion\n     * @param result - defines the target Vector3\n     * @returns the current Vector3\n     */\n    rotateToRef(q, result) {\n        const { x, y, z } = this;\n        const { x: qx, y: qy, z: qz, w: qw } = q;\n        // calculate quat * vector\n        const ix = qw * x + qy * z - qz * y;\n        const iy = qw * y + qz * x - qx * z;\n        const iz = qw * z + qx * y - qy * x;\n        const iw = -qx * x - qy * y - qz * z;\n        // calculate result * inverse quat\n        result.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n        result.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n        result.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n        return result;\n    }\n    /**\n     * Gets a new Vector3 set with the current Vector3 negated coordinates\n     * @returns a new Vector3\n     */\n    negate() {\n        return new Vector3(-this.x, -this.y, -this.z);\n    }\n    /**\n     * Multiplies the Vector3 coordinates by the float \"scale\"\n     * @param scale - defines the multiplier factor\n     * @returns the current updated Vector3\n     */\n    scaleInPlace(scale) {\n        this.x *= scale;\n        this.y *= scale;\n        this.z *= scale;\n        return this;\n    }\n    /**\n     * Returns a new Vector3 set with the current Vector3 coordinates multiplied by the float \"scale\"\n     * @param scale - defines the multiplier factor\n     * @returns a new Vector3\n     */\n    scale(scale) {\n        return new Vector3(this.x * scale, this.y * scale, this.z * scale);\n    }\n    /**\n     * Multiplies the current Vector3 coordinates by the float \"scale\" and stores the result in the given vector \"result\" coordinates\n     * @param scale - defines the multiplier factor\n     * @param result - defines the Vector3 object where to store the result\n     * @returns the current Vector3\n     */\n    scaleToRef(scale, result) {\n        return result.copyFromFloats(this.x * scale, this.y * scale, this.z * scale);\n    }\n    /**\n     * Scale the current Vector3 values by a factor and add the result to a given Vector3\n     * @param scale - defines the scale factor\n     * @param result - defines the Vector3 object where to store the result\n     * @returns the unmodified current Vector3\n     */\n    scaleAndAddToRef(scale, result) {\n        return result.addInPlaceFromFloats(this.x * scale, this.y * scale, this.z * scale);\n    }\n    /**\n     * Returns true if the current Vector3 and the given vector coordinates are strictly equal\n     * @param otherVector - defines the second operand\n     * @returns true if both vectors are equals\n     */\n    equals(otherVector) {\n        return (otherVector &&\n            this.x === otherVector.x &&\n            this.y === otherVector.y &&\n            this.z === otherVector.z);\n    }\n    /**\n     * Returns true if the current Vector3 and the given vector coordinates are distant less than epsilon\n     * @param otherVector - defines the second operand\n     * @param epsilon - defines the minimal distance to define values as equals\n     * @returns true if both vectors are distant less than epsilon\n     */\n    equalsWithEpsilon(otherVector, epsilon = types_1.Epsilon) {\n        return (otherVector &&\n            Scalar_1.Scalar.WithinEpsilon(this.x, otherVector.x, epsilon) &&\n            Scalar_1.Scalar.WithinEpsilon(this.y, otherVector.y, epsilon) &&\n            Scalar_1.Scalar.WithinEpsilon(this.z, otherVector.z, epsilon));\n    }\n    /**\n     * Returns true if the current Vector3 coordinates equals the given floats\n     * @param x - defines the x coordinate of the operand\n     * @param y - defines the y coordinate of the operand\n     * @param z - defines the z coordinate of the operand\n     * @returns true if both vectors are equals\n     */\n    equalsToFloats(x, y, z) {\n        return this.x === x && this.y === y && this.z === z;\n    }\n    /**\n     * Multiplies the current Vector3 coordinates by the given ones\n     * @param otherVector - defines the second operand\n     * @returns the current updated Vector3\n     */\n    multiplyInPlace(otherVector) {\n        this.x *= otherVector.x;\n        this.y *= otherVector.y;\n        this.z *= otherVector.z;\n        return this;\n    }\n    /**\n     * Returns a new Vector3, result of the multiplication of the current Vector3 by the given vector\n     * @param otherVector - defines the second operand\n     * @returns the new Vector3\n     */\n    multiply(otherVector) {\n        return this.multiplyByFloats(otherVector.x, otherVector.y, otherVector.z);\n    }\n    /**\n     * Multiplies the current Vector3 by the given one and stores the result in the given vector \"result\"\n     * @param otherVector - defines the second operand\n     * @param result - defines the Vector3 object where to store the result\n     * @returns the current Vector3\n     */\n    multiplyToRef(otherVector, result) {\n        return result.copyFromFloats(this.x * otherVector.x, this.y * otherVector.y, this.z * otherVector.z);\n    }\n    /**\n     * Returns a new Vector3 set with the result of the mulliplication of the current Vector3 coordinates by the given floats\n     * @param x - defines the x coordinate of the operand\n     * @param y - defines the y coordinate of the operand\n     * @param z - defines the z coordinate of the operand\n     * @returns the new Vector3\n     */\n    multiplyByFloats(x, y, z) {\n        return new Vector3(this.x * x, this.y * y, this.z * z);\n    }\n    /**\n     * Returns a new Vector3 set with the result of the division of the current Vector3 coordinates by the given ones\n     * @param otherVector - defines the second operand\n     * @returns the new Vector3\n     */\n    divide(otherVector) {\n        return new Vector3(this.x / otherVector.x, this.y / otherVector.y, this.z / otherVector.z);\n    }\n    /**\n     * Divides the current Vector3 coordinates by the given ones and stores the result in the given vector \"result\"\n     * @param otherVector - defines the second operand\n     * @param result - defines the Vector3 object where to store the result\n     * @returns the current Vector3\n     */\n    divideToRef(otherVector, result) {\n        return result.copyFromFloats(this.x / otherVector.x, this.y / otherVector.y, this.z / otherVector.z);\n    }\n    /**\n     * Divides the current Vector3 coordinates by the given ones.\n     * @param otherVector - defines the second operand\n     * @returns the current updated Vector3\n     */\n    divideInPlace(otherVector) {\n        return this.divideToRef(otherVector, this);\n    }\n    /**\n     * Updates the current Vector3 with the minimal coordinate values between its and the given vector ones\n     * @param other - defines the second operand\n     * @returns the current updated Vector3\n     */\n    minimizeInPlace(other) {\n        return this.minimizeInPlaceFromFloats(other.x, other.y, other.z);\n    }\n    /**\n     * Updates the current Vector3 with the maximal coordinate values between its and the given vector ones.\n     * @param other - defines the second operand\n     * @returns the current updated Vector3\n     */\n    maximizeInPlace(other) {\n        return this.maximizeInPlaceFromFloats(other.x, other.y, other.z);\n    }\n    /**\n     * Updates the current Vector3 with the minimal coordinate values between its and the given coordinates\n     * @param x - defines the x coordinate of the operand\n     * @param y - defines the y coordinate of the operand\n     * @param z - defines the z coordinate of the operand\n     * @returns the current updated Vector3\n     */\n    minimizeInPlaceFromFloats(x, y, z) {\n        if (x < this.x) {\n            this.x = x;\n        }\n        if (y < this.y) {\n            this.y = y;\n        }\n        if (z < this.z) {\n            this.z = z;\n        }\n        return this;\n    }\n    /**\n     * Updates the current Vector3 with the maximal coordinate values between its and the given coordinates.\n     * @param x - defines the x coordinate of the operand\n     * @param y - defines the y coordinate of the operand\n     * @param z - defines the z coordinate of the operand\n     * @returns the current updated Vector3\n     */\n    maximizeInPlaceFromFloats(x, y, z) {\n        if (x > this.x) {\n            this.x = x;\n        }\n        if (y > this.y) {\n            this.y = y;\n        }\n        if (z > this.z) {\n            this.z = z;\n        }\n        return this;\n    }\n    /**\n     * Gets a new Vector3 from current Vector3 floored values\n     * @returns a new Vector3\n     */\n    floor() {\n        return new Vector3(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z));\n    }\n    /**\n     * Gets a new Vector3 from current Vector3 floored values\n     * @returns a new Vector3\n     */\n    fract() {\n        return new Vector3(this.x - Math.floor(this.x), this.y - Math.floor(this.y), this.z - Math.floor(this.z));\n    }\n    // Properties\n    /**\n     * Gets the length of the Vector3\n     * @returns the length of the Vecto3\n     */\n    length() {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    }\n    /**\n     * Gets the squared length of the Vector3\n     * @returns squared length of the Vector3\n     */\n    lengthSquared() {\n        return this.x * this.x + this.y * this.y + this.z * this.z;\n    }\n    /**\n     * Normalize the current Vector3.\n     * Please note that this is an in place operation.\n     * @returns the current updated Vector3\n     */\n    normalize() {\n        return this.normalizeFromLength(this.length());\n    }\n    /**\n     * Normalize the current Vector3 with the given input length.\n     * Please note that this is an in place operation.\n     * @param len - the length of the vector\n     * @returns the current updated Vector3\n     */\n    normalizeFromLength(len) {\n        if (len === 0 || len === 1.0) {\n            return this;\n        }\n        return this.scaleInPlace(1.0 / len);\n    }\n    /**\n     * Normalize the current Vector3 to a new vector\n     * @returns the new Vector3\n     */\n    normalizeToNew() {\n        const normalized = new Vector3(0, 0, 0);\n        this.normalizeToRef(normalized);\n        return normalized;\n    }\n    /**\n     * Normalize the current Vector3 to the reference\n     * @param reference - define the Vector3 to update\n     * @returns the updated Vector3\n     */\n    normalizeToRef(reference) {\n        const len = this.length();\n        if (len === 0 || len === 1.0) {\n            return reference.copyFromFloats(this.x, this.y, this.z);\n        }\n        return this.scaleToRef(1.0 / len, reference);\n    }\n    /**\n     * Creates a new Vector3 copied from the current Vector3\n     * @returns the new Vector3\n     */\n    clone() {\n        return new Vector3(this.x, this.y, this.z);\n    }\n    /**\n     * Copies the given vector coordinates to the current Vector3 ones\n     * @param source - defines the source Vector3\n     * @returns the current updated Vector3\n     */\n    copyFrom(source) {\n        return this.copyFromFloats(source.x, source.y, source.z);\n    }\n    /**\n     * Copies the given floats to the current Vector3 coordinates\n     * @param x - defines the x coordinate of the operand\n     * @param y - defines the y coordinate of the operand\n     * @param z - defines the z coordinate of the operand\n     * @returns the current updated Vector3\n     */\n    copyFromFloats(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        return this;\n    }\n    /**\n     * Copies the given floats to the current Vector3 coordinates\n     * @param x - defines the x coordinate of the operand\n     * @param y - defines the y coordinate of the operand\n     * @param z - defines the z coordinate of the operand\n     * @returns the current updated Vector3\n     */\n    set(x, y, z) {\n        return this.copyFromFloats(x, y, z);\n    }\n    /**\n     * Copies the given float to the current Vector3 coordinates\n     * @param v - defines the x, y and z coordinates of the operand\n     * @returns the current updated Vector3\n     */\n    setAll(v) {\n        this.x = this.y = this.z = v;\n        return this;\n    }\n}\nexports.Vector3 = Vector3;\n//# sourceMappingURL=Vector3.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MathTmp = void 0;\nconst utils_1 = require(\"./utils\");\nconst Vector3_1 = require(\"./Vector3\");\nconst Quaternion_1 = require(\"./Quaternion\");\nconst Matrix_1 = require(\"./Matrix\");\n// Temporary pre-allocated objects for engine internal use\n// usage in any internal function :\n// var tmp = Tmp.Vector3[0];   <= gets access to the first pre-created Vector3\n// There's a Tmp array per object type : int, float, Vector2, Vector3, Vector4, Quaternion, Matrix\n/**\n * @public\n * Same as Tmp but not exported to keep it only for math functions to avoid conflicts\n */\nexports.MathTmp = {\n    Vector3: (0, utils_1.buildArray)(6, Vector3_1.Vector3.Zero),\n    Matrix: (0, utils_1.buildArray)(2, Matrix_1.Matrix.Identity),\n    Quaternion: (0, utils_1.buildArray)(3, Quaternion_1.Quaternion.Zero),\n    staticUp: Vector3_1.Vector3.Up(),\n    tmpMatrix: Matrix_1.Matrix.Zero()\n};\n//# sourceMappingURL=preallocatedVariables.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Angle = void 0;\n/**\n * Defines angle representation\n * @public\n */\nclass Angle {\n    /**\n     * Creates an Angle object of \"radians\" radians (float).\n     */\n    constructor(radians) {\n        this._radians = radians;\n        if (this._radians < 0.0) {\n            this._radians += 2.0 * Math.PI;\n        }\n    }\n    /**\n     * Gets a new Angle object valued with the angle value in radians between the two given vectors\n     * @param a - defines first vector\n     * @param b - defines second vector\n     * @returns a new Angle\n     */\n    static BetweenTwoPoints(a, b) {\n        const delta = b.subtract(a);\n        const theta = Math.atan2(delta.y, delta.x);\n        return new Angle(theta);\n    }\n    /**\n     * Gets a new Angle object from the given float in radians\n     * @param radians - defines the angle value in radians\n     * @returns a new Angle\n     */\n    static FromRadians(radians) {\n        return new Angle(radians);\n    }\n    /**\n     * Gets a new Angle object from the given float in degrees\n     * @param degrees - defines the angle value in degrees\n     * @returns a new Angle\n     */\n    static FromDegrees(degrees) {\n        return new Angle((degrees * Math.PI) / 180.0);\n    }\n    /**\n     * Get value in degrees\n     * @returns the Angle value in degrees (float)\n     */\n    degrees() {\n        return (this._radians * 180.0) / Math.PI;\n    }\n    /**\n     * Get value in radians\n     * @returns the Angle value in radians (float)\n     */\n    radians() {\n        return this._radians;\n    }\n}\nexports.Angle = Angle;\n//# sourceMappingURL=Angle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Vector2 = void 0;\nconst types_1 = require(\"./types\");\nconst Scalar_1 = require(\"./Scalar\");\n/**\n * Class representing a vector containing 2 coordinates\n * @public\n */\nclass Vector2 {\n    /**\n     * Creates a new Vector2 from the given x and y coordinates\n     * @param x - defines the first coordinate\n     * @param y - defines the second coordinate\n     */\n    constructor(\n    /** defines the first coordinate */\n    x = 0, \n    /** defines the second coordinate */\n    y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    /**\n     * Gets a new Vector2(0, 0)\n     * @returns a new Vector2\n     */\n    static Zero() {\n        return new Vector2(0, 0);\n    }\n    /**\n     * Gets a new Vector2(1, 1)\n     * @returns a new Vector2\n     */\n    static One() {\n        return new Vector2(1, 1);\n    }\n    /**\n     * Returns a new Vector2 as the result of the addition of the two given vectors.\n     * @param vector1 - the first vector\n     * @param vector2 - the second vector\n     * @returns the resulting vector\n     */\n    static Add(vector1, vector2) {\n        return new Vector2(vector1.x, vector1.y).addInPlace(vector2);\n    }\n    /**\n     * Gets a new Vector2 set from the given index element of the given array\n     * @param array - defines the data source\n     * @param offset - defines the offset in the data source\n     * @returns a new Vector2\n     */\n    static FromArray(array, offset = 0) {\n        return new Vector2(array[offset], array[offset + 1]);\n    }\n    /**\n     * Sets \"result\" from the given index element of the given array\n     * @param array - defines the data source\n     * @param offset - defines the offset in the data source\n     * @param result - defines the target vector\n     */\n    static FromArrayToRef(array, offset, result) {\n        result.x = array[offset];\n        result.y = array[offset + 1];\n    }\n    /**\n     * Gets a new Vector2 located for \"amount\" (float) on the CatmullRom spline defined by the given four Vector2\n     * @param value1 - defines 1st point of control\n     * @param value2 - defines 2nd point of control\n     * @param value3 - defines 3rd point of control\n     * @param value4 - defines 4th point of control\n     * @param amount - defines the interpolation factor\n     * @returns a new Vector2\n     */\n    static CatmullRom(value1, value2, value3, value4, amount) {\n        const squared = amount * amount;\n        const cubed = amount * squared;\n        const x = 0.5 *\n            (2.0 * value2.x +\n                (-value1.x + value3.x) * amount +\n                (2.0 * value1.x - 5.0 * value2.x + 4.0 * value3.x - value4.x) *\n                    squared +\n                (-value1.x + 3.0 * value2.x - 3.0 * value3.x + value4.x) * cubed);\n        const y = 0.5 *\n            (2.0 * value2.y +\n                (-value1.y + value3.y) * amount +\n                (2.0 * value1.y - 5.0 * value2.y + 4.0 * value3.y - value4.y) *\n                    squared +\n                (-value1.y + 3.0 * value2.y - 3.0 * value3.y + value4.y) * cubed);\n        return new Vector2(x, y);\n    }\n    /**\n     * Returns a new Vector2 set with same the coordinates than \"value\" ones if the vector \"value\" is in the square defined by \"min\" and \"max\".\n     * If a coordinate of \"value\" is lower than \"min\" coordinates, the returned Vector2 is given this \"min\" coordinate.\n     * If a coordinate of \"value\" is greater than \"max\" coordinates, the returned Vector2 is given this \"max\" coordinate\n     * @param value - defines the value to clamp\n     * @param min - defines the lower limit\n     * @param max - defines the upper limit\n     * @returns a new Vector2\n     */\n    static Clamp(value, min, max) {\n        let x = value.x;\n        x = x > max.x ? max.x : x;\n        x = x < min.x ? min.x : x;\n        let y = value.y;\n        y = y > max.y ? max.y : y;\n        y = y < min.y ? min.y : y;\n        return new Vector2(x, y);\n    }\n    /**\n     * Returns a new Vector2 located for \"amount\" (float) on the Hermite spline defined by the vectors \"value1\", \"value3\", \"tangent1\", \"tangent2\"\n     * @param value1 - defines the 1st control point\n     * @param tangent1 - defines the outgoing tangent\n     * @param value2 - defines the 2nd control point\n     * @param tangent2 - defines the incoming tangent\n     * @param amount - defines the interpolation factor\n     * @returns a new Vector2\n     */\n    static Hermite(value1, tangent1, value2, tangent2, amount) {\n        const squared = amount * amount;\n        const cubed = amount * squared;\n        const part1 = 2.0 * cubed - 3.0 * squared + 1.0;\n        const part2 = -2.0 * cubed + 3.0 * squared;\n        const part3 = cubed - 2.0 * squared + amount;\n        const part4 = cubed - squared;\n        const x = value1.x * part1 +\n            value2.x * part2 +\n            tangent1.x * part3 +\n            tangent2.x * part4;\n        const y = value1.y * part1 +\n            value2.y * part2 +\n            tangent1.y * part3 +\n            tangent2.y * part4;\n        return new Vector2(x, y);\n    }\n    /**\n     * Returns a new Vector2 located for \"amount\" (float) on the linear interpolation between the vector \"start\" adn the vector \"end\".\n     * @param start - defines the start vector\n     * @param end - defines the end vector\n     * @param amount - defines the interpolation factor\n     * @returns a new Vector2\n     */\n    static Lerp(start, end, amount) {\n        const x = start.x + (end.x - start.x) * amount;\n        const y = start.y + (end.y - start.y) * amount;\n        return new Vector2(x, y);\n    }\n    /**\n     * Gets the dot product of the vector \"left\" and the vector \"right\"\n     * @param left - defines first vector\n     * @param right - defines second vector\n     * @returns the dot product (float)\n     */\n    static Dot(left, right) {\n        return left.x * right.x + left.y * right.y;\n    }\n    /**\n     * Returns a new Vector2 equal to the normalized given vector\n     * @param vector - defines the vector to normalize\n     * @returns a new Vector2\n     */\n    static Normalize(vector) {\n        const newVector = new Vector2(vector.x, vector.y);\n        newVector.normalize();\n        return newVector;\n    }\n    /**\n     * Gets a new Vector2 set with the minimal coordinate values from the \"left\" and \"right\" vectors\n     * @param left - defines 1st vector\n     * @param right - defines 2nd vector\n     * @returns a new Vector2\n     */\n    static Minimize(left, right) {\n        const x = left.x < right.x ? left.x : right.x;\n        const y = left.y < right.y ? left.y : right.y;\n        return new Vector2(x, y);\n    }\n    /**\n     * Gets a new Vecto2 set with the maximal coordinate values from the \"left\" and \"right\" vectors\n     * @param left - defines 1st vector\n     * @param right - defines 2nd vector\n     * @returns a new Vector2\n     */\n    static Maximize(left, right) {\n        const x = left.x > right.x ? left.x : right.x;\n        const y = left.y > right.y ? left.y : right.y;\n        return new Vector2(x, y);\n    }\n    /**\n     * Gets a new Vector2 set with the transformed coordinates of the given vector by the given transformation matrix\n     * @param vector - defines the vector to transform\n     * @param transformation - defines the matrix to apply\n     * @returns a new Vector2\n     */\n    static Transform(vector, transformation) {\n        const r = Vector2.Zero();\n        Vector2.TransformToRef(vector, transformation, r);\n        return r;\n    }\n    /**\n     * Transforms the given vector coordinates by the given transformation matrix and stores the result in the vector \"result\" coordinates\n     * @param vector - defines the vector to transform\n     * @param transformation - defines the matrix to apply\n     * @param result - defines the target vector\n     */\n    static TransformToRef(vector, transformation, result) {\n        const m = transformation.m;\n        const x = vector.x * m[0] + vector.y * m[4] + m[12];\n        const y = vector.x * m[1] + vector.y * m[5] + m[13];\n        result.x = x;\n        result.y = y;\n    }\n    /**\n     * Determines if a given vector is included in a triangle\n     * @param p - defines the vector to test\n     * @param p0 - defines 1st triangle point\n     * @param p1 - defines 2nd triangle point\n     * @param p2 - defines 3rd triangle point\n     * @returns true if the point \"p\" is in the triangle defined by the vertors \"p0\", \"p1\", \"p2\"\n     */\n    static PointInTriangle(p, p0, p1, p2) {\n        const a = (1 / 2) *\n            (-p1.y * p2.x +\n                p0.y * (-p1.x + p2.x) +\n                p0.x * (p1.y - p2.y) +\n                p1.x * p2.y);\n        const sign = a < 0 ? -1 : 1;\n        const s = (p0.y * p2.x - p0.x * p2.y + (p2.y - p0.y) * p.x + (p0.x - p2.x) * p.y) *\n            sign;\n        const t = (p0.x * p1.y - p0.y * p1.x + (p0.y - p1.y) * p.x + (p1.x - p0.x) * p.y) *\n            sign;\n        return s > 0 && t > 0 && s + t < 2 * a * sign;\n    }\n    /**\n     * Gets the distance between the vectors \"value1\" and \"value2\"\n     * @param value1 - defines first vector\n     * @param value2 - defines second vector\n     * @returns the distance between vectors\n     */\n    static Distance(value1, value2) {\n        return Math.sqrt(Vector2.DistanceSquared(value1, value2));\n    }\n    /**\n     * Returns the squared distance between the vectors \"value1\" and \"value2\"\n     * @param value1 - defines first vector\n     * @param value2 - defines second vector\n     * @returns the squared distance between vectors\n     */\n    static DistanceSquared(value1, value2) {\n        const x = value1.x - value2.x;\n        const y = value1.y - value2.y;\n        return x * x + y * y;\n    }\n    /**\n     * Gets a new Vector2 located at the center of the vectors \"value1\" and \"value2\"\n     * @param value1 - defines first vector\n     * @param value2 - defines second vector\n     * @returns a new Vector2\n     */\n    static Center(value1, value2) {\n        const center = Vector2.Add(value1, value2);\n        center.scaleInPlace(0.5);\n        return center;\n    }\n    /**\n     * Gets the shortest distance (float) between the point \"p\" and the segment defined by the two points \"segA\" and \"segB\".\n     * @param p - defines the middle point\n     * @param segA - defines one point of the segment\n     * @param segB - defines the other point of the segment\n     * @returns the shortest distance\n     */\n    static DistanceOfPointFromSegment(p, segA, segB) {\n        const l2 = Vector2.DistanceSquared(segA, segB);\n        if (l2 === 0.0) {\n            return Vector2.Distance(p, segA);\n        }\n        const v = segB.subtract(segA);\n        const t = Math.max(0, Math.min(1, Vector2.Dot(p.subtract(segA), v) / l2));\n        const proj = segA.add(v.multiplyByFloats(t, t));\n        return Vector2.Distance(p, proj);\n    }\n    /**\n     * Gets a string with the Vector2 coordinates\n     * @returns a string with the Vector2 coordinates\n     */\n    toString() {\n        return '{X: ' + this.x + ' Y:' + this.y + '}';\n    }\n    /**\n     * Gets class name\n     * @returns the string \"Vector2\"\n     */\n    getClassName() {\n        return 'Vector2';\n    }\n    /**\n     * Gets current vector hash code\n     * @returns the Vector2 hash code as a number\n     */\n    getHashCode() {\n        let hash = this.x || 0;\n        hash = (hash * 397) ^ (this.y || 0);\n        return hash;\n    }\n    // Operators\n    /**\n     * Sets the Vector2 coordinates in the given array or FloatArray from the given index.\n     * @param array - defines the source array\n     * @param index - defines the offset in source array\n     * @returns the current Vector2\n     */\n    toArray(array, index = 0) {\n        array[index] = this.x;\n        array[index + 1] = this.y;\n        return this;\n    }\n    /**\n     * Copy the current vector to an array\n     * @returns a new array with 2 elements: the Vector2 coordinates.\n     */\n    asArray() {\n        const result = new Array();\n        this.toArray(result, 0);\n        return result;\n    }\n    /**\n     * Sets the Vector2 coordinates with the given Vector2 coordinates\n     * @param source - defines the source Vector2\n     * @returns the current updated Vector2\n     */\n    copyFrom(source) {\n        this.x = source.x;\n        this.y = source.y;\n        return this;\n    }\n    /**\n     * Sets the Vector2 coordinates with the given floats\n     * @param x - defines the first coordinate\n     * @param y - defines the second coordinate\n     * @returns the current updated Vector2\n     */\n    copyFromFloats(x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n    /**\n     * Sets the Vector2 coordinates with the given floats\n     * @param x - defines the first coordinate\n     * @param y - defines the second coordinate\n     * @returns the current updated Vector2\n     */\n    set(x, y) {\n        return this.copyFromFloats(x, y);\n    }\n    /**\n     * Add another vector with the current one\n     * @param otherVector - defines the other vector\n     * @returns a new Vector2 set with the addition of the current Vector2 and the given one coordinates\n     */\n    add(otherVector) {\n        return new Vector2(this.x + otherVector.x, this.y + otherVector.y);\n    }\n    /**\n     * Sets the \"result\" coordinates with the addition of the current Vector2 and the given one coordinates\n     * @param otherVector - defines the other vector\n     * @param result - defines the target vector\n     * @returns the unmodified current Vector2\n     */\n    addToRef(otherVector, result) {\n        result.x = this.x + otherVector.x;\n        result.y = this.y + otherVector.y;\n        return this;\n    }\n    /**\n     * Set the Vector2 coordinates by adding the given Vector2 coordinates\n     * @param otherVector - defines the other vector\n     * @returns the current updated Vector2\n     */\n    addInPlace(otherVector) {\n        this.x += otherVector.x;\n        this.y += otherVector.y;\n        return this;\n    }\n    /**\n     * Gets a new Vector2 by adding the current Vector2 coordinates to the given Vector3 x, y coordinates\n     * @param otherVector - defines the other vector\n     * @returns a new Vector2\n     */\n    addVector3(otherVector) {\n        return new Vector2(this.x + otherVector.x, this.y + otherVector.y);\n    }\n    /**\n     * Gets a new Vector2 set with the subtracted coordinates of the given one from the current Vector2\n     * @param otherVector - defines the other vector\n     * @returns a new Vector2\n     */\n    subtract(otherVector) {\n        return new Vector2(this.x - otherVector.x, this.y - otherVector.y);\n    }\n    /**\n     * Sets the \"result\" coordinates with the subtraction of the given one from the current Vector2 coordinates.\n     * @param otherVector - defines the other vector\n     * @param result - defines the target vector\n     * @returns the unmodified current Vector2\n     */\n    subtractToRef(otherVector, result) {\n        result.x = this.x - otherVector.x;\n        result.y = this.y - otherVector.y;\n        return this;\n    }\n    /**\n     * Sets the current Vector2 coordinates by subtracting from it the given one coordinates\n     * @param otherVector - defines the other vector\n     * @returns the current updated Vector2\n     */\n    subtractInPlace(otherVector) {\n        this.x -= otherVector.x;\n        this.y -= otherVector.y;\n        return this;\n    }\n    /**\n     * Multiplies in place the current Vector2 coordinates by the given ones\n     * @param otherVector - defines the other vector\n     * @returns the current updated Vector2\n     */\n    multiplyInPlace(otherVector) {\n        this.x *= otherVector.x;\n        this.y *= otherVector.y;\n        return this;\n    }\n    /**\n     * Returns a new Vector2 set with the multiplication of the current Vector2 and the given one coordinates\n     * @param otherVector - defines the other vector\n     * @returns a new Vector2\n     */\n    multiply(otherVector) {\n        return new Vector2(this.x * otherVector.x, this.y * otherVector.y);\n    }\n    /**\n     * Sets \"result\" coordinates with the multiplication of the current Vector2 and the given one coordinates\n     * @param otherVector - defines the other vector\n     * @param result - defines the target vector\n     * @returns the unmodified current Vector2\n     */\n    multiplyToRef(otherVector, result) {\n        result.x = this.x * otherVector.x;\n        result.y = this.y * otherVector.y;\n        return this;\n    }\n    /**\n     * Gets a new Vector2 set with the Vector2 coordinates multiplied by the given floats\n     * @param x - defines the first coordinate\n     * @param y - defines the second coordinate\n     * @returns a new Vector2\n     */\n    multiplyByFloats(x, y) {\n        return new Vector2(this.x * x, this.y * y);\n    }\n    /**\n     * Returns a new Vector2 set with the Vector2 coordinates divided by the given one coordinates\n     * @param otherVector - defines the other vector\n     * @returns a new Vector2\n     */\n    divide(otherVector) {\n        return new Vector2(this.x / otherVector.x, this.y / otherVector.y);\n    }\n    /**\n     * Sets the \"result\" coordinates with the Vector2 divided by the given one coordinates\n     * @param otherVector - defines the other vector\n     * @param result - defines the target vector\n     * @returns the unmodified current Vector2\n     */\n    divideToRef(otherVector, result) {\n        result.x = this.x / otherVector.x;\n        result.y = this.y / otherVector.y;\n        return this;\n    }\n    /**\n     * Divides the current Vector2 coordinates by the given ones\n     * @param otherVector - defines the other vector\n     * @returns the current updated Vector2\n     */\n    divideInPlace(otherVector) {\n        return this.divideToRef(otherVector, this);\n    }\n    /**\n     * Gets a new Vector2 with current Vector2 negated coordinates\n     * @returns a new Vector2\n     */\n    negate() {\n        return new Vector2(-this.x, -this.y);\n    }\n    /**\n     * Multiply the Vector2 coordinates by scale\n     * @param scale - defines the scaling factor\n     * @returns the current updated Vector2\n     */\n    scaleInPlace(scale) {\n        this.x *= scale;\n        this.y *= scale;\n        return this;\n    }\n    /**\n     * Returns a new Vector2 scaled by \"scale\" from the current Vector2\n     * @param scale - defines the scaling factor\n     * @returns a new Vector2\n     */\n    scale(scale) {\n        const result = new Vector2(0, 0);\n        this.scaleToRef(scale, result);\n        return result;\n    }\n    /**\n     * Scale the current Vector2 values by a factor to a given Vector2\n     * @param scale - defines the scale factor\n     * @param result - defines the Vector2 object where to store the result\n     * @returns the unmodified current Vector2\n     */\n    scaleToRef(scale, result) {\n        result.x = this.x * scale;\n        result.y = this.y * scale;\n        return this;\n    }\n    /**\n     * Scale the current Vector2 values by a factor and add the result to a given Vector2\n     * @param scale - defines the scale factor\n     * @param result - defines the Vector2 object where to store the result\n     * @returns the unmodified current Vector2\n     */\n    scaleAndAddToRef(scale, result) {\n        result.x += this.x * scale;\n        result.y += this.y * scale;\n        return this;\n    }\n    /**\n     * Gets a boolean if two vectors are equals\n     * @param otherVector - defines the other vector\n     * @returns true if the given vector coordinates strictly equal the current Vector2 ones\n     */\n    equals(otherVector) {\n        return otherVector && this.x === otherVector.x && this.y === otherVector.y;\n    }\n    /**\n     * Gets a boolean if two vectors are equals (using an epsilon value)\n     * @param otherVector - defines the other vector\n     * @param epsilon - defines the minimal distance to consider equality\n     * @returns true if the given vector coordinates are close to the current ones by a distance of epsilon.\n     */\n    equalsWithEpsilon(otherVector, epsilon = types_1.Epsilon) {\n        return (otherVector &&\n            Scalar_1.Scalar.WithinEpsilon(this.x, otherVector.x, epsilon) &&\n            Scalar_1.Scalar.WithinEpsilon(this.y, otherVector.y, epsilon));\n    }\n    /**\n     * Gets a new Vector2 from current Vector2 floored values\n     * @returns a new Vector2\n     */\n    floor() {\n        return new Vector2(Math.floor(this.x), Math.floor(this.y));\n    }\n    /**\n     * Gets a new Vector2 from current Vector2 floored values\n     * @returns a new Vector2\n     */\n    fract() {\n        return new Vector2(this.x - Math.floor(this.x), this.y - Math.floor(this.y));\n    }\n    // Properties\n    /**\n     * Gets the length of the vector\n     * @returns the vector length (float)\n     */\n    length() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n    /**\n     * Gets the vector squared length\n     * @returns the vector squared length (float)\n     */\n    lengthSquared() {\n        return this.x * this.x + this.y * this.y;\n    }\n    // Methods\n    /**\n     * Normalize the vector\n     * @returns the current updated Vector2\n     */\n    normalize() {\n        const len = this.length();\n        if (len === 0) {\n            return this;\n        }\n        const num = 1.0 / len;\n        this.x *= num;\n        this.y *= num;\n        return this;\n    }\n    /**\n     * Gets a new Vector2 copied from the Vector2\n     * @returns a new Vector2\n     */\n    clone() {\n        return new Vector2(this.x, this.y);\n    }\n}\nexports.Vector2 = Vector2;\n//# sourceMappingURL=Vector2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Arc2 = void 0;\nconst Angle_1 = require(\"./Angle\");\nconst Vector2_1 = require(\"./Vector2\");\nconst types_1 = require(\"./types\");\n/**\n * This represents an arc in a 2d space.\n * @public\n */\nclass Arc2 {\n    /**\n     * Creates an Arc object from the three given points : start, middle and end.\n     * @param startPoint - Defines the start point of the arc\n     * @param midPoint - Defines the midlle point of the arc\n     * @param endPoint - Defines the end point of the arc\n     */\n    constructor(\n    /** Defines the start point of the arc */\n    startPoint, \n    /** Defines the mid point of the arc */\n    midPoint, \n    /** Defines the end point of the arc */\n    endPoint) {\n        this.startPoint = startPoint;\n        this.midPoint = midPoint;\n        this.endPoint = endPoint;\n        const temp = Math.pow(midPoint.x, 2) + Math.pow(midPoint.y, 2);\n        const startToMid = (Math.pow(startPoint.x, 2) + Math.pow(startPoint.y, 2) - temp) / 2;\n        const midToEnd = (temp - Math.pow(endPoint.x, 2) - Math.pow(endPoint.y, 2)) / 2;\n        const det = (startPoint.x - midPoint.x) * (midPoint.y - endPoint.y) -\n            (midPoint.x - endPoint.x) * (startPoint.y - midPoint.y);\n        this.centerPoint = new Vector2_1.Vector2((startToMid * (midPoint.y - endPoint.y) -\n            midToEnd * (startPoint.y - midPoint.y)) /\n            det, ((startPoint.x - midPoint.x) * midToEnd -\n            (midPoint.x - endPoint.x) * startToMid) /\n            det);\n        this.radius = this.centerPoint.subtract(this.startPoint).length();\n        this.startAngle = Angle_1.Angle.BetweenTwoPoints(this.centerPoint, this.startPoint);\n        const a1 = this.startAngle.degrees();\n        let a2 = Angle_1.Angle.BetweenTwoPoints(this.centerPoint, this.midPoint).degrees();\n        let a3 = Angle_1.Angle.BetweenTwoPoints(this.centerPoint, this.endPoint).degrees();\n        // angles correction\n        if (a2 - a1 > +180.0) {\n            a2 -= 360.0;\n        }\n        if (a2 - a1 < -180.0) {\n            a2 += 360.0;\n        }\n        if (a3 - a2 > +180.0) {\n            a3 -= 360.0;\n        }\n        if (a3 - a2 < -180.0) {\n            a3 += 360.0;\n        }\n        this.orientation = a2 - a1 < 0 ? types_1.Orientation.CW : types_1.Orientation.CCW;\n        this.angle = Angle_1.Angle.FromDegrees(this.orientation === types_1.Orientation.CW ? a1 - a3 : a3 - a1);\n    }\n}\nexports.Arc2 = Arc2;\n//# sourceMappingURL=Arc2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Axis = void 0;\nconst Vector3_1 = require(\"./Vector3\");\n/**\n * Defines the 3 main axes\n * @public\n */\nclass Axis {\n}\nexports.Axis = Axis;\n/** X axis */\nAxis.X = new Vector3_1.Vector3(1.0, 0.0, 0.0);\n/** Y axis */\nAxis.Y = new Vector3_1.Vector3(0.0, 1.0, 0.0);\n/** Z axis */\nAxis.Z = new Vector3_1.Vector3(0.0, 0.0, 1.0);\n//# sourceMappingURL=Axis.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BezierCurve = void 0;\n/**\n * Class used to represent a Bezier curve\n * @public\n */\nclass BezierCurve {\n    /**\n     * Returns the cubic Bezier interpolated value (float) at \"t\" (float) from the given x1, y1, x2, y2 floats\n     * @param t - defines the time\n     * @param x1 - defines the left coordinate on X axis\n     * @param y1 - defines the left coordinate on Y axis\n     * @param x2 - defines the right coordinate on X axis\n     * @param y2 - defines the right coordinate on Y axis\n     * @returns the interpolated value\n     */\n    static Interpolate(t, x1, y1, x2, y2) {\n        // Extract X (which is equal to time here)\n        const f0 = 1 - 3 * x2 + 3 * x1;\n        const f1 = 3 * x2 - 6 * x1;\n        const f2 = 3 * x1;\n        let refinedT = t;\n        for (let i = 0; i < 5; i++) {\n            const refinedT2 = refinedT * refinedT;\n            const refinedT3 = refinedT2 * refinedT;\n            const x = f0 * refinedT3 + f1 * refinedT2 + f2 * refinedT;\n            const slope = 1.0 / (3.0 * f0 * refinedT2 + 2.0 * f1 * refinedT + f2);\n            refinedT -= (x - t) * slope;\n            refinedT = Math.min(1, Math.max(0, refinedT));\n        }\n        // Resolve cubic bezier for the given x\n        return (3 * Math.pow(1 - refinedT, 2) * refinedT * y1 +\n            3 * (1 - refinedT) * Math.pow(refinedT, 2) * y2 +\n            Math.pow(refinedT, 3));\n    }\n}\nexports.BezierCurve = BezierCurve;\n//# sourceMappingURL=BezierCurve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Color4 = void 0;\nconst Scalar_1 = require(\"./Scalar\");\nconst types_1 = require(\"./types\");\n/**\n * Class used to hold a RBGA color\n * @public\n */\nclass Color4 {\n    /**\n     * Creates a new Color4 object from red, green, blue values, all between 0 and 1\n     * @param r - defines the red component (between 0 and 1, default is 0)\n     * @param g - defines the green component (between 0 and 1, default is 0)\n     * @param b - defines the blue component (between 0 and 1, default is 0)\n     * @param a - defines the alpha component (between 0 and 1, default is 1)\n     */\n    constructor(\n    /**\n     * Defines the red component (between 0 and 1, default is 0)\n     */\n    r = 0, \n    /**\n     * Defines the green component (between 0 and 1, default is 0)\n     */\n    g = 0, \n    /**\n     * Defines the blue component (between 0 and 1, default is 0)\n     */\n    b = 0, \n    /**\n     * Defines the alpha component (between 0 and 1, default is 1)\n     */\n    a = 1) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n    // Statics\n    /**\n     * Creates a new Color4 from the string containing valid hexadecimal values\n     * @param hex - defines a string containing valid hexadecimal values\n     * @returns a new Color4 object\n     */\n    static FromHexString(hex) {\n        if (hex.substring(0, 1) !== '#' || hex.length !== 9) {\n            return new Color4(0.0, 0.0, 0.0, 0.0);\n        }\n        const r = parseInt(hex.substring(1, 3), 16);\n        const g = parseInt(hex.substring(3, 5), 16);\n        const b = parseInt(hex.substring(5, 7), 16);\n        const a = parseInt(hex.substring(7, 9), 16);\n        return Color4.FromInts(r, g, b, a);\n    }\n    /**\n     * Creates a new Color4 object set with the linearly interpolated values of \"amount\" between the left Color4 object and the right Color4 object\n     * @param left - defines the start value\n     * @param right - defines the end value\n     * @param amount - defines the gradient factor\n     * @returns a new Color4 object\n     */\n    static Lerp(left, right, amount) {\n        const result = new Color4(0.0, 0.0, 0.0, 0.0);\n        Color4.LerpToRef(left, right, amount, result);\n        return result;\n    }\n    /**\n     * Set the given \"result\" with the linearly interpolated values of \"amount\" between the left Color4 object and the right Color4 object\n     * @param left - defines the start value\n     * @param right - defines the end value\n     * @param amount - defines the gradient factor\n     * @param result - defines the Color4 object where to store data\n     */\n    static LerpToRef(left, right, amount, result) {\n        result.r = left.r + (right.r - left.r) * amount;\n        result.g = left.g + (right.g - left.g) * amount;\n        result.b = left.b + (right.b - left.b) * amount;\n        result.a = left.a + (right.a - left.a) * amount;\n    }\n    /**\n     * Returns a Color4 value containing a red color\n     * @returns a new Color3 object\n     */\n    static Red() {\n        return new Color4(1.0, 0, 0, 1.0);\n    }\n    /**\n     * Returns a Color4 value containing a green color\n     * @returns a new Color4 object\n     */\n    static Green() {\n        return new Color4(0, 1.0, 0, 1.0);\n    }\n    /**\n     * Returns a Color4 value containing a blue color\n     * @returns a new Color4 object\n     */\n    static Blue() {\n        return new Color4(0, 0, 1.0, 1.0);\n    }\n    /**\n     * Returns a Color4 value containing a black color\n     * @returns a new Color4 object\n     */\n    static Black() {\n        return new Color4(0, 0, 0, 1);\n    }\n    /**\n     * Returns a Color4 value containing a white color\n     * @returns a new Color4 object\n     */\n    static White() {\n        return new Color4(1, 1, 1, 1);\n    }\n    /**\n     * Returns a Color4 value containing a purple color\n     * @returns a new Color4 object\n     */\n    static Purple() {\n        return new Color4(0.5, 0, 0.5, 1);\n    }\n    /**\n     * Returns a Color4 value containing a magenta color\n     * @returns a new Color4 object\n     */\n    static Magenta() {\n        return new Color4(1, 0, 1, 1);\n    }\n    /**\n     * Returns a Color4 value containing a yellow color\n     * @returns a new Color4 object\n     */\n    static Yellow() {\n        return new Color4(1, 1, 0, 1);\n    }\n    /**\n     * Returns a Color4 value containing a gray color\n     * @returns a new Color4 object\n     */\n    static Gray() {\n        return new Color4(0.5, 0.5, 0.5, 1.0);\n    }\n    /**\n     * Returns a Color4 value containing a teal color\n     * @returns a new Color4 object\n     */\n    static Teal() {\n        return new Color4(0, 1.0, 1.0, 1.0);\n    }\n    /**\n     * Returns a Color4 value containing a transparent color\n     * @returns a new Color4 object\n     */\n    static Clear() {\n        return new Color4(0, 0, 0, 0);\n    }\n    /**\n     * Creates a new Color4 from a Color3 and an alpha value\n     * @param color3 - defines the source Color3 to read from\n     * @param alpha - defines the alpha component (1.0 by default)\n     * @returns a new Color4 object\n     */\n    static FromColor3(color3, alpha = 1.0) {\n        return new Color4(color3.r, color3.g, color3.b, alpha);\n    }\n    /**\n     * Creates a new Color4 from the starting index element of the given array\n     * @param array - defines the source array to read from\n     * @param offset - defines the offset in the source array\n     * @returns a new Color4 object\n     */\n    static FromArray(array, offset = 0) {\n        return new Color4(array[offset], array[offset + 1], array[offset + 2], array[offset + 3]);\n    }\n    /**\n     * Creates a new Color3 from integer values (less than 256)\n     * @param r - defines the red component to read from (value between 0 and 255)\n     * @param g - defines the green component to read from (value between 0 and 255)\n     * @param b - defines the blue component to read from (value between 0 and 255)\n     * @param a - defines the alpha component to read from (value between 0 and 255)\n     * @returns a new Color3 object\n     */\n    static FromInts(r, g, b, a) {\n        return new Color4(r / 255.0, g / 255.0, b / 255.0, a / 255.0);\n    }\n    /**\n     * Check the content of a given array and convert it to an array containing RGBA data\n     * If the original array was already containing count * 4 values then it is returned directly\n     * @param colors - defines the array to check\n     * @param count - defines the number of RGBA data to expect\n     * @returns an array containing count * 4 values (RGBA)\n     */\n    static CheckColors4(colors, count) {\n        // Check if color3 was used\n        if (colors.length === count * 3) {\n            const colors4 = [];\n            for (let index = 0; index < colors.length; index += 3) {\n                const newIndex = (index / 3) * 4;\n                colors4[newIndex] = colors[index];\n                colors4[newIndex + 1] = colors[index + 1];\n                colors4[newIndex + 2] = colors[index + 2];\n                colors4[newIndex + 3] = 1.0;\n            }\n            return colors4;\n        }\n        return colors;\n    }\n    // Operators\n    /**\n     * Adds in place the given Color4 values to the current Color4 object\n     * @param right - defines the second operand\n     * @returns the current updated Color4 object\n     */\n    addInPlace(right) {\n        this.r += right.r;\n        this.g += right.g;\n        this.b += right.b;\n        this.a += right.a;\n        return this;\n    }\n    /**\n     * Creates a new array populated with 4 numeric elements : red, green, blue, alpha values\n     * @returns the new array\n     */\n    asArray() {\n        const result = new Array();\n        this.toArray(result, 0);\n        return result;\n    }\n    /**\n     * Stores from the starting index in the given array the Color4 successive values\n     * @param array - defines the array where to store the r,g,b components\n     * @param index - defines an optional index in the target array to define where to start storing values\n     * @returns the current Color4 object\n     */\n    toArray(array, index = 0) {\n        array[index] = this.r;\n        array[index + 1] = this.g;\n        array[index + 2] = this.b;\n        array[index + 3] = this.a;\n        return this;\n    }\n    /**\n     * Creates a new Color4 set with the added values of the current Color4 and of the given one\n     * @param right - defines the second operand\n     * @returns a new Color4 object\n     */\n    add(right) {\n        return new Color4(this.r + right.r, this.g + right.g, this.b + right.b, this.a + right.a);\n    }\n    /**\n     * Creates a new Color4 set with the subtracted values of the given one from the current Color4\n     * @param right - defines the second operand\n     * @returns a new Color4 object\n     */\n    subtract(right) {\n        return new Color4(this.r - right.r, this.g - right.g, this.b - right.b, this.a - right.a);\n    }\n    /**\n     * Subtracts the given ones from the current Color4 values and stores the results in \"result\"\n     * @param right - defines the second operand\n     * @param result - defines the Color4 object where to store the result\n     * @returns the current Color4 object\n     */\n    subtractToRef(right, result) {\n        result.r = this.r - right.r;\n        result.g = this.g - right.g;\n        result.b = this.b - right.b;\n        result.a = this.a - right.a;\n        return this;\n    }\n    /**\n     * Creates a new Color4 with the current Color4 values multiplied by scale\n     * @param scale - defines the scaling factor to apply\n     * @returns a new Color4 object\n     */\n    scale(scale) {\n        return new Color4(this.r * scale, this.g * scale, this.b * scale, this.a * scale);\n    }\n    /**\n     * Multiplies the current Color4 values by scale and stores the result in \"result\"\n     * @param scale - defines the scaling factor to apply\n     * @param result - defines the Color4 object where to store the result\n     * @returns the current unmodified Color4\n     */\n    scaleToRef(scale, result) {\n        result.r = this.r * scale;\n        result.g = this.g * scale;\n        result.b = this.b * scale;\n        result.a = this.a * scale;\n        return this;\n    }\n    /**\n     * Scale the current Color4 values by a factor and add the result to a given Color4\n     * @param scale - defines the scale factor\n     * @param result - defines the Color4 object where to store the result\n     * @returns the unmodified current Color4\n     */\n    scaleAndAddToRef(scale, result) {\n        result.r += this.r * scale;\n        result.g += this.g * scale;\n        result.b += this.b * scale;\n        result.a += this.a * scale;\n        return this;\n    }\n    /**\n     * Clamps the rgb values by the min and max values and stores the result into \"result\"\n     * @param min - defines minimum clamping value (default is 0)\n     * @param max - defines maximum clamping value (default is 1)\n     * @param result - defines color to store the result into.\n     * @returns the cuurent Color4\n     */\n    clampToRef(min = 0, max = 1, result) {\n        result.r = Scalar_1.Scalar.Clamp(this.r, min, max);\n        result.g = Scalar_1.Scalar.Clamp(this.g, min, max);\n        result.b = Scalar_1.Scalar.Clamp(this.b, min, max);\n        result.a = Scalar_1.Scalar.Clamp(this.a, min, max);\n        return this;\n    }\n    /**\n     * Multipy an Color4 value by another and return a new Color4 object\n     * @param color - defines the Color4 value to multiply by\n     * @returns a new Color4 object\n     */\n    multiply(color) {\n        return new Color4(this.r * color.r, this.g * color.g, this.b * color.b, this.a * color.a);\n    }\n    /**\n     * Multipy a Color4 value by another and push the result in a reference value\n     * @param color - defines the Color4 value to multiply by\n     * @param result - defines the Color4 to fill the result in\n     * @returns the result Color4\n     */\n    multiplyToRef(color, result) {\n        result.r = this.r * color.r;\n        result.g = this.g * color.g;\n        result.b = this.b * color.b;\n        result.a = this.a * color.a;\n        return result;\n    }\n    /**\n     * Creates a string with the Color4 current values\n     * @returns the string representation of the Color4 object\n     */\n    toString() {\n        return ('{R: ' + this.r + ' G:' + this.g + ' B:' + this.b + ' A:' + this.a + '}');\n    }\n    /**\n     * Returns the string \"Color4\"\n     * @returns \"Color4\"\n     */\n    getClassName() {\n        return 'Color4';\n    }\n    /**\n     * Compute the Color4 hash code\n     * @returns an unique number that can be used to hash Color4 objects\n     */\n    getHashCode() {\n        let hash = this.r || 0;\n        hash = (hash * 397) ^ (this.g || 0);\n        hash = (hash * 397) ^ (this.b || 0);\n        hash = (hash * 397) ^ (this.a || 0);\n        return hash;\n    }\n    /**\n     * Creates a new Color4 copied from the current one\n     * @returns a new Color4 object\n     */\n    clone() {\n        return new Color4(this.r, this.g, this.b, this.a);\n    }\n    /**\n     * Copies the given Color4 values into the current one\n     * @param source - defines the source Color4 object\n     * @returns the current updated Color4 object\n     */\n    copyFrom(source) {\n        this.r = source.r;\n        this.g = source.g;\n        this.b = source.b;\n        this.a = source.a;\n        return this;\n    }\n    /**\n     * Copies the given float values into the current one\n     * @param r - defines the red component to read from\n     * @param g - defines the green component to read from\n     * @param b - defines the blue component to read from\n     * @param a - defines the alpha component to read from\n     * @returns the current updated Color4 object\n     */\n    copyFromFloats(r, g, b, a) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n        return this;\n    }\n    /**\n     * Copies the given float values into the current one\n     * @param r - defines the red component to read from\n     * @param g - defines the green component to read from\n     * @param b - defines the blue component to read from\n     * @param a - defines the alpha component to read from\n     * @returns the current updated Color4 object\n     */\n    set(r, g, b, a) {\n        return this.copyFromFloats(r, g, b, a);\n    }\n    /**\n     * Compute the Color4 hexadecimal code as a string\n     * @returns a string containing the hexadecimal representation of the Color4 object\n     */\n    toHexString() {\n        const intR = (this.r * 255) | 0;\n        const intG = (this.g * 255) | 0;\n        const intB = (this.b * 255) | 0;\n        const intA = (this.a * 255) | 0;\n        return ('#' +\n            Scalar_1.Scalar.ToHex(intR) +\n            Scalar_1.Scalar.ToHex(intG) +\n            Scalar_1.Scalar.ToHex(intB) +\n            Scalar_1.Scalar.ToHex(intA));\n    }\n    /**\n     * Computes a new Color4 converted from the current one to linear space\n     * @returns a new Color4 object\n     */\n    toLinearSpace() {\n        const convertedColor = new Color4();\n        this.toLinearSpaceToRef(convertedColor);\n        return convertedColor;\n    }\n    /**\n     * Converts the Color4 values to linear space and stores the result in \"convertedColor\"\n     * @param convertedColor - defines the Color4 object where to store the linear space version\n     * @returns the unmodified Color4\n     */\n    toLinearSpaceToRef(convertedColor) {\n        convertedColor.r = Math.pow(this.r, types_1.ToLinearSpace);\n        convertedColor.g = Math.pow(this.g, types_1.ToLinearSpace);\n        convertedColor.b = Math.pow(this.b, types_1.ToLinearSpace);\n        convertedColor.a = this.a;\n        return this;\n    }\n    /**\n     * Computes a new Color4 converted from the current one to gamma space\n     * @returns a new Color4 object\n     */\n    toGammaSpace() {\n        const convertedColor = new Color4();\n        this.toGammaSpaceToRef(convertedColor);\n        return convertedColor;\n    }\n    /**\n     * Converts the Color4 values to gamma space and stores the result in \"convertedColor\"\n     * @param convertedColor - defines the Color4 object where to store the gamma space version\n     * @returns the unmodified Color4\n     */\n    toGammaSpaceToRef(convertedColor) {\n        convertedColor.r = Math.pow(this.r, types_1.ToGammaSpace);\n        convertedColor.g = Math.pow(this.g, types_1.ToGammaSpace);\n        convertedColor.b = Math.pow(this.b, types_1.ToGammaSpace);\n        convertedColor.a = this.a;\n        return this;\n    }\n}\nexports.Color4 = Color4;\n//# sourceMappingURL=Color4.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Color3 = void 0;\nconst types_1 = require(\"./types\");\nconst Color4_1 = require(\"./Color4\");\nconst Scalar_1 = require(\"./Scalar\");\n/**\n * Class used to hold a RBG color\n * @public\n */\nclass Color3 {\n    /**\n     * Creates a new Color3 object from red, green, blue values, all between 0 and 1\n     * @param r - defines the red component (between 0 and 1, default is 0)\n     * @param g - defines the green component (between 0 and 1, default is 0)\n     * @param b - defines the blue component (between 0 and 1, default is 0)\n     */\n    constructor(\n    /**\n     * Defines the red component (between 0 and 1, default is 0)\n     */\n    r = 0, \n    /**\n     * Defines the green component (between 0 and 1, default is 0)\n     */\n    g = 0, \n    /**\n     * Defines the blue component (between 0 and 1, default is 0)\n     */\n    b = 0) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n    }\n    // Statics\n    /**\n     * Creates a new Color3 from the string containing valid hexadecimal values\n     * @param hex - defines a string containing valid hexadecimal values\n     * @returns a new Color3 object\n     */\n    static FromHexString(hex) {\n        if (hex.substring(0, 1) !== '#' || hex.length !== 7) {\n            return new Color3(0, 0, 0);\n        }\n        const r = parseInt(hex.substring(1, 3), 16);\n        const g = parseInt(hex.substring(3, 5), 16);\n        const b = parseInt(hex.substring(5, 7), 16);\n        return Color3.FromInts(r, g, b);\n    }\n    /**\n     * Creates a new Vector3 from the starting index of the given array\n     * @param array - defines the source array\n     * @param offset - defines an offset in the source array\n     * @returns a new Color3 object\n     */\n    static FromArray(array, offset = 0) {\n        return new Color3(array[offset], array[offset + 1], array[offset + 2]);\n    }\n    /**\n     * Creates a new Color3 from integer values (less than 256)\n     * @param r - defines the red component to read from (value between 0 and 255)\n     * @param g - defines the green component to read from (value between 0 and 255)\n     * @param b - defines the blue component to read from (value between 0 and 255)\n     * @returns a new Color3 object\n     */\n    static FromInts(r, g, b) {\n        return new Color3(r / 255.0, g / 255.0, b / 255.0);\n    }\n    /**\n     * Creates a new Color3 with values linearly interpolated of \"amount\" between the start Color3 and the end Color3\n     * @param start - defines the start Color3 value\n     * @param end - defines the end Color3 value\n     * @param amount - defines the gradient value between start and end\n     * @returns a new Color3 object\n     */\n    static Lerp(start, end, amount) {\n        const result = new Color3(0.0, 0.0, 0.0);\n        Color3.LerpToRef(start, end, amount, result);\n        return result;\n    }\n    /**\n     * Creates a new Color3 with values linearly interpolated of \"amount\" between the start Color3 and the end Color3\n     * @param left - defines the start value\n     * @param right - defines the end value\n     * @param amount - defines the gradient factor\n     * @param result - defines the Color3 object where to store the result\n     */\n    static LerpToRef(left, right, amount, result) {\n        result.r = left.r + (right.r - left.r) * amount;\n        result.g = left.g + (right.g - left.g) * amount;\n        result.b = left.b + (right.b - left.b) * amount;\n    }\n    /**\n     * Returns a Color3 value containing a red color\n     * @returns a new Color3 object\n     */\n    static Red() {\n        return new Color3(1, 0, 0);\n    }\n    /**\n     * Returns a Color3 value containing a green color\n     * @returns a new Color3 object\n     */\n    static Green() {\n        return new Color3(0, 1, 0);\n    }\n    /**\n     * Returns a Color3 value containing a blue color\n     * @returns a new Color3 object\n     */\n    static Blue() {\n        return new Color3(0, 0, 1);\n    }\n    /**\n     * Returns a Color3 value containing a black color\n     * @returns a new Color3 object\n     */\n    static Black() {\n        return new Color3(0, 0, 0);\n    }\n    /**\n     * Returns a Color3 value containing a white color\n     * @returns a new Color3 object\n     */\n    static White() {\n        return new Color3(1, 1, 1);\n    }\n    /**\n     * Returns a Color3 value containing a purple color\n     * @returns a new Color3 object\n     */\n    static Purple() {\n        return new Color3(0.5, 0, 0.5);\n    }\n    /**\n     * Returns a Color3 value containing a magenta color\n     * @returns a new Color3 object\n     */\n    static Magenta() {\n        return new Color3(1, 0, 1);\n    }\n    /**\n     * Returns a Color3 value containing a yellow color\n     * @returns a new Color3 object\n     */\n    static Yellow() {\n        return new Color3(1, 1, 0);\n    }\n    /**\n     * Returns a Color3 value containing a gray color\n     * @returns a new Color3 object\n     */\n    static Gray() {\n        return new Color3(0.5, 0.5, 0.5);\n    }\n    /**\n     * Returns a Color3 value containing a teal color\n     * @returns a new Color3 object\n     */\n    static Teal() {\n        return new Color3(0, 1.0, 1.0);\n    }\n    /**\n     * Returns a Color3 value containing a random color\n     * @returns a new Color3 object\n     */\n    static Random() {\n        return new Color3(Math.random(), Math.random(), Math.random());\n    }\n    /**\n     * Creates a string with the Color3 current values\n     * @returns the string representation of the Color3 object\n     */\n    toString() {\n        return '{R: ' + this.r + ' G:' + this.g + ' B:' + this.b + '}';\n    }\n    /**\n     * Returns the string \"Color3\"\n     * @returns \"Color3\"\n     */\n    getClassName() {\n        return 'Color3';\n    }\n    /**\n     * Compute the Color3 hash code\n     * @returns an unique number that can be used to hash Color3 objects\n     */\n    getHashCode() {\n        let hash = this.r || 0;\n        hash = (hash * 397) ^ (this.g || 0);\n        hash = (hash * 397) ^ (this.b || 0);\n        return hash;\n    }\n    // Operators\n    /**\n     * Stores in the given array from the given starting index the red, green, blue values as successive elements\n     * @param array - defines the array where to store the r,g,b components\n     * @param index - defines an optional index in the target array to define where to start storing values\n     * @returns the current Color3 object\n     */\n    toArray(array, index = 0) {\n        array[index] = this.r;\n        array[index + 1] = this.g;\n        array[index + 2] = this.b;\n        return this;\n    }\n    /**\n     * Returns a new Color4 object from the current Color3 and the given alpha\n     * @param alpha - defines the alpha component on the new Color4 object (default is 1)\n     * @returns a new Color4 object\n     */\n    toColor4(alpha = 1) {\n        return new Color4_1.Color4(this.r, this.g, this.b, alpha);\n    }\n    /**\n     * Returns a new array populated with 3 numeric elements : red, green and blue values\n     * @returns the new array\n     */\n    asArray() {\n        const result = new Array();\n        this.toArray(result, 0);\n        return result;\n    }\n    /**\n     * Returns the luminance value\n     * @returns a float value\n     */\n    toLuminance() {\n        return this.r * 0.3 + this.g * 0.59 + this.b * 0.11;\n    }\n    /**\n     * Multiply each Color3 rgb values by the given Color3 rgb values in a new Color3 object\n     * @param otherColor - defines the second operand\n     * @returns the new Color3 object\n     */\n    multiply(otherColor) {\n        return new Color3(this.r * otherColor.r, this.g * otherColor.g, this.b * otherColor.b);\n    }\n    /**\n     * Multiply the rgb values of the Color3 and the given Color3 and stores the result in the object \"result\"\n     * @param otherColor - defines the second operand\n     * @param result - defines the Color3 object where to store the result\n     * @returns the current Color3\n     */\n    multiplyToRef(otherColor, result) {\n        result.r = this.r * otherColor.r;\n        result.g = this.g * otherColor.g;\n        result.b = this.b * otherColor.b;\n        return this;\n    }\n    /**\n     * Determines equality between Color3 objects\n     * @param otherColor - defines the second operand\n     * @returns true if the rgb values are equal to the given ones\n     */\n    equals(otherColor) {\n        return (otherColor &&\n            this.r === otherColor.r &&\n            this.g === otherColor.g &&\n            this.b === otherColor.b);\n    }\n    /**\n     * Determines equality between the current Color3 object and a set of r,b,g values\n     * @param r - defines the red component to check\n     * @param g - defines the green component to check\n     * @param b - defines the blue component to check\n     * @returns true if the rgb values are equal to the given ones\n     */\n    equalsFloats(r, g, b) {\n        return this.r === r && this.g === g && this.b === b;\n    }\n    /**\n     * Multiplies in place each rgb value by scale\n     * @param scale - defines the scaling factor\n     * @returns the updated Color3\n     */\n    scale(scale) {\n        return new Color3(this.r * scale, this.g * scale, this.b * scale);\n    }\n    /**\n     * Multiplies the rgb values by scale and stores the result into \"result\"\n     * @param scale - defines the scaling factor\n     * @param result - defines the Color3 object where to store the result\n     * @returns the unmodified current Color3\n     */\n    scaleToRef(scale, result) {\n        result.r = this.r * scale;\n        result.g = this.g * scale;\n        result.b = this.b * scale;\n        return this;\n    }\n    /**\n     * Scale the current Color3 values by a factor and add the result to a given Color3\n     * @param scale - defines the scale factor\n     * @param result - defines color to store the result into\n     * @returns the unmodified current Color3\n     */\n    scaleAndAddToRef(scale, result) {\n        result.r += this.r * scale;\n        result.g += this.g * scale;\n        result.b += this.b * scale;\n        return this;\n    }\n    /**\n     * Clamps the rgb values by the min and max values and stores the result into \"result\"\n     * @param min - defines minimum clamping value (default is 0)\n     * @param max - defines maximum clamping value (default is 1)\n     * @param result - defines color to store the result into\n     * @returns the original Color3\n     */\n    clampToRef(min = 0, max = 1, result) {\n        result.r = Scalar_1.Scalar.Clamp(this.r, min, max);\n        result.g = Scalar_1.Scalar.Clamp(this.g, min, max);\n        result.b = Scalar_1.Scalar.Clamp(this.b, min, max);\n        return this;\n    }\n    /**\n     * Creates a new Color3 set with the added values of the current Color3 and of the given one\n     * @param otherColor - defines the second operand\n     * @returns the new Color3\n     */\n    add(otherColor) {\n        return new Color3(this.r + otherColor.r, this.g + otherColor.g, this.b + otherColor.b);\n    }\n    /**\n     * Stores the result of the addition of the current Color3 and given one rgb values into \"result\"\n     * @param otherColor - defines the second operand\n     * @param result - defines Color3 object to store the result into\n     * @returns the unmodified current Color3\n     */\n    addToRef(otherColor, result) {\n        result.r = this.r + otherColor.r;\n        result.g = this.g + otherColor.g;\n        result.b = this.b + otherColor.b;\n        return this;\n    }\n    /**\n     * Returns a new Color3 set with the subtracted values of the given one from the current Color3\n     * @param otherColor - defines the second operand\n     * @returns the new Color3\n     */\n    subtract(otherColor) {\n        return new Color3(this.r - otherColor.r, this.g - otherColor.g, this.b - otherColor.b);\n    }\n    /**\n     * Stores the result of the subtraction of given one from the current Color3 rgb values into \"result\"\n     * @param otherColor - defines the second operand\n     * @param result - defines Color3 object to store the result into\n     * @returns the unmodified current Color3\n     */\n    subtractToRef(otherColor, result) {\n        result.r = this.r - otherColor.r;\n        result.g = this.g - otherColor.g;\n        result.b = this.b - otherColor.b;\n        return this;\n    }\n    /**\n     * Copy the current object\n     * @returns a new Color3 copied the current one\n     */\n    clone() {\n        return new Color3(this.r, this.g, this.b);\n    }\n    /**\n     * Copies the rgb values from the source in the current Color3\n     * @param source - defines the source Color3 object\n     * @returns the updated Color3 object\n     */\n    copyFrom(source) {\n        this.r = source.r;\n        this.g = source.g;\n        this.b = source.b;\n        return this;\n    }\n    /**\n     * Updates the Color3 rgb values from the given floats\n     * @param r - defines the red component to read from\n     * @param g - defines the green component to read from\n     * @param b - defines the blue component to read from\n     * @returns the current Color3 object\n     */\n    copyFromFloats(r, g, b) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        return this;\n    }\n    /**\n     * Updates the Color3 rgb values from the given floats\n     * @param r - defines the red component to read from\n     * @param g - defines the green component to read from\n     * @param b - defines the blue component to read from\n     * @returns the current Color3 object\n     */\n    set(r, g, b) {\n        return this.copyFromFloats(r, g, b);\n    }\n    /**\n     * Compute the Color3 hexadecimal code as a string\n     * @returns a string containing the hexadecimal representation of the Color3 object\n     */\n    toHexString() {\n        const intR = (this.r * 255) | 0;\n        const intG = (this.g * 255) | 0;\n        const intB = (this.b * 255) | 0;\n        return '#' + Scalar_1.Scalar.ToHex(intR) + Scalar_1.Scalar.ToHex(intG) + Scalar_1.Scalar.ToHex(intB);\n    }\n    /**\n     * Computes a new Color3 converted from the current one to linear space\n     * @returns a new Color3 object\n     */\n    toLinearSpace() {\n        const convertedColor = new Color3();\n        this.toLinearSpaceToRef(convertedColor);\n        return convertedColor;\n    }\n    /**\n     * Converts the Color3 values to linear space and stores the result in \"convertedColor\"\n     * @param convertedColor - defines the Color3 object where to store the linear space version\n     * @returns the unmodified Color3\n     */\n    toLinearSpaceToRef(convertedColor) {\n        convertedColor.r = Math.pow(this.r, types_1.ToLinearSpace);\n        convertedColor.g = Math.pow(this.g, types_1.ToLinearSpace);\n        convertedColor.b = Math.pow(this.b, types_1.ToLinearSpace);\n        return this;\n    }\n    /**\n     * Computes a new Color3 converted from the current one to gamma space\n     * @returns a new Color3 object\n     */\n    toGammaSpace() {\n        const convertedColor = new Color3();\n        this.toGammaSpaceToRef(convertedColor);\n        return convertedColor;\n    }\n    /**\n     * Converts the Color3 values to gamma space and stores the result in \"convertedColor\"\n     * @param convertedColor - defines the Color3 object where to store the gamma space version\n     * @returns the unmodified Color3\n     */\n    toGammaSpaceToRef(convertedColor) {\n        convertedColor.r = Math.pow(this.r, types_1.ToGammaSpace);\n        convertedColor.g = Math.pow(this.g, types_1.ToGammaSpace);\n        convertedColor.b = Math.pow(this.b, types_1.ToGammaSpace);\n        return this;\n    }\n    /**\n     * Serializes Color3\n     */\n    toJSON() {\n        return {\n            r: this.r,\n            g: this.g,\n            b: this.b\n        };\n    }\n}\nexports.Color3 = Color3;\n//# sourceMappingURL=Color3.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Curve3 = void 0;\nconst Vector3_1 = require(\"./Vector3\");\n/**\n * A Curve3 object is a logical object, so not a mesh, to handle curves in the 3D geometric space.\n * A Curve3 is designed from a series of successive Vector3.\n * {@link https://doc.babylonjs.com/how_to/how_to_use_curve3 }\n * @public\n */\nclass Curve3 {\n    /**\n     * A Curve3 object is a logical object, so not a mesh, to handle curves in the 3D geometric space.\n     * A Curve3 is designed from a series of successive Vector3.\n     * {@link http://doc.babylonjs.com/tutorials/How_to_use_Curve3#curve3-object | Tutorial }\n     * @param points - points which make up the curve\n     */\n    constructor(points) {\n        this._length = 0.0;\n        this._points = points;\n        this._length = this._computeLength(points);\n    }\n    /**\n     * Returns a Curve3 object along a Quadratic Bezier curve : http://doc.babylonjs.com/tutorials/How_to_use_Curve3#quadratic-bezier-curve\n     * @param v0 - (Vector3) the origin point of the Quadratic Bezier\n     * @param v1 - (Vector3) the control point\n     * @param v2 - (Vector3) the end point of the Quadratic Bezier\n     * @param nbPoints - (integer) the wanted number of points in the curve\n     * @returns the created Curve3\n     */\n    static CreateQuadraticBezier(v0, v1, v2, nbPoints) {\n        // tslint:disable-next-line:no-parameter-reassignment\n        nbPoints = nbPoints > 2 ? nbPoints : 3;\n        const bez = new Array();\n        const equation = (t, val0, val1, val2) => {\n            const res = (1.0 - t) * (1.0 - t) * val0 + 2.0 * t * (1.0 - t) * val1 + t * t * val2;\n            return res;\n        };\n        for (let i = 0; i <= nbPoints; i++) {\n            bez.push(new Vector3_1.Vector3(equation(i / nbPoints, v0.x, v1.x, v2.x), equation(i / nbPoints, v0.y, v1.y, v2.y), equation(i / nbPoints, v0.z, v1.z, v2.z)));\n        }\n        return new Curve3(bez);\n    }\n    /**\n     * Returns a Curve3 object along a Cubic Bezier curve : http://doc.babylonjs.com/tutorials/How_to_use_Curve3#cubic-bezier-curve\n     * @param v0 - (Vector3) the origin point of the Cubic Bezier\n     * @param v1 - (Vector3) the first control point\n     * @param v2 - (Vector3) the second control point\n     * @param v3 - (Vector3) the end point of the Cubic Bezier\n     * @param nbPoints - (integer) the wanted number of points in the curve\n     * @returns the created Curve3\n     */\n    static CreateCubicBezier(v0, v1, v2, v3, nbPoints) {\n        // tslint:disable-next-line:no-parameter-reassignment\n        nbPoints = nbPoints > 3 ? nbPoints : 4;\n        const bez = new Array();\n        const equation = (t, val0, val1, val2, val3) => {\n            const res = (1.0 - t) * (1.0 - t) * (1.0 - t) * val0 +\n                3.0 * t * (1.0 - t) * (1.0 - t) * val1 +\n                3.0 * t * t * (1.0 - t) * val2 +\n                t * t * t * val3;\n            return res;\n        };\n        for (let i = 0; i <= nbPoints; i++) {\n            bez.push(new Vector3_1.Vector3(equation(i / nbPoints, v0.x, v1.x, v2.x, v3.x), equation(i / nbPoints, v0.y, v1.y, v2.y, v3.y), equation(i / nbPoints, v0.z, v1.z, v2.z, v3.z)));\n        }\n        return new Curve3(bez);\n    }\n    /**\n     * Returns a Curve3 object along a Hermite Spline curve : http://doc.babylonjs.com/tutorials/How_to_use_Curve3#hermite-spline\n     * @param p1 - (Vector3) the origin point of the Hermite Spline\n     * @param t1 - (Vector3) the tangent vector at the origin point\n     * @param p2 - (Vector3) the end point of the Hermite Spline\n     * @param t2 - (Vector3) the tangent vector at the end point\n     * @param nbPoints - (integer) the wanted number of points in the curve\n     * @returns the created Curve3\n     */\n    static CreateHermiteSpline(p1, t1, p2, t2, nbPoints) {\n        const hermite = new Array();\n        const step = 1.0 / nbPoints;\n        for (let i = 0; i <= nbPoints; i++) {\n            hermite.push(Vector3_1.Vector3.Hermite(p1, t1, p2, t2, i * step));\n        }\n        return new Curve3(hermite);\n    }\n    /**\n     * Returns a Curve3 object along a CatmullRom Spline curve :\n     * @param points - (array of Vector3) the points the spline must pass through. At least, four points required\n     * @param nbPoints - (integer) the wanted number of points between each curve control points\n     * @param closed - (boolean) optional with default false, when true forms a closed loop from the points\n     * @returns the created Curve3\n     */\n    static CreateCatmullRomSpline(points, nbPoints, closed) {\n        const catmullRom = new Array();\n        const step = 1.0 / nbPoints;\n        let amount = 0.0;\n        if (closed) {\n            const pointsCount = points.length;\n            for (let i = 0; i < pointsCount; i++) {\n                amount = 0;\n                for (let c = 0; c < nbPoints; c++) {\n                    catmullRom.push(Vector3_1.Vector3.CatmullRom(points[i % pointsCount], points[(i + 1) % pointsCount], points[(i + 2) % pointsCount], points[(i + 3) % pointsCount], amount));\n                    amount += step;\n                }\n            }\n            catmullRom.push(catmullRom[0]);\n        }\n        else {\n            const totalPoints = new Array();\n            totalPoints.push(points[0].clone());\n            Array.prototype.push.apply(totalPoints, points);\n            totalPoints.push(points[points.length - 1].clone());\n            let i = 0;\n            for (i = 0; i < totalPoints.length - 3; i++) {\n                amount = 0;\n                for (let c = 0; c < nbPoints; c++) {\n                    catmullRom.push(Vector3_1.Vector3.CatmullRom(totalPoints[i], totalPoints[i + 1], totalPoints[i + 2], totalPoints[i + 3], amount));\n                    amount += step;\n                }\n            }\n            i--;\n            catmullRom.push(Vector3_1.Vector3.CatmullRom(totalPoints[i], totalPoints[i + 1], totalPoints[i + 2], totalPoints[i + 3], amount));\n        }\n        return new Curve3(catmullRom);\n    }\n    /**\n     * @returns the Curve3 stored array of successive Vector3\n     */\n    getPoints() {\n        return this._points;\n    }\n    /**\n     * @returns the computed length (float) of the curve.\n     */\n    length() {\n        return this._length;\n    }\n    /**\n     * Returns a new instance of Curve3 object : var curve = curveA.continue(curveB);\n     * This new Curve3 is built by translating and sticking the curveB at the end of the curveA.\n     * curveA and curveB keep unchanged.\n     * @param curve - the curve to continue from this curve\n     * @returns the newly constructed curve\n     */\n    continue(curve) {\n        const lastPoint = this._points[this._points.length - 1];\n        const continuedPoints = this._points.slice();\n        const curvePoints = curve.getPoints();\n        for (let i = 1; i < curvePoints.length; i++) {\n            continuedPoints.push(curvePoints[i].subtract(curvePoints[0]).add(lastPoint));\n        }\n        const continuedCurve = new Curve3(continuedPoints);\n        return continuedCurve;\n    }\n    _computeLength(path) {\n        let l = 0;\n        for (let i = 1; i < path.length; i++) {\n            l += path[i].subtract(path[i - 1]).length();\n        }\n        return l;\n    }\n}\nexports.Curve3 = Curve3;\n//# sourceMappingURL=Curve3d.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Plane = void 0;\nconst Vector3_1 = require(\"./Vector3\");\nconst Matrix_1 = require(\"./Matrix\");\nconst preallocatedVariables_1 = require(\"./preallocatedVariables\");\n/**\n * Represens a plane by the equation ax + by + cz + d = 0\n * @public\n */\nclass Plane {\n    /**\n     * Creates a Plane object according to the given floats a, b, c, d and the plane equation : ax + by + cz + d = 0\n     * @param a - a component of the plane\n     * @param b - b component of the plane\n     * @param c - c component of the plane\n     * @param d - d component of the plane\n     */\n    constructor(a, b, c, d) {\n        this.normal = new Vector3_1.Vector3(a, b, c);\n        this.d = d;\n    }\n    // Statics\n    /**\n     * Creates a plane from an  array\n     * @param array - the array to create a plane from\n     * @returns a new Plane from the given array.\n     */\n    static FromArray(array) {\n        return new Plane(array[0], array[1], array[2], array[3]);\n    }\n    /**\n     * Creates a plane from three points\n     * @param point1 - point used to create the plane\n     * @param point2 - point used to create the plane\n     * @param point3 - point used to create the plane\n     * @returns a new Plane defined by the three given points.\n     */\n    static FromPoints(point1, point2, point3) {\n        const result = new Plane(0.0, 0.0, 0.0, 0.0);\n        result.copyFromPoints(point1, point2, point3);\n        return result;\n    }\n    /**\n     * Creates a plane from an origin point and a normal\n     * @param origin - origin of the plane to be constructed\n     * @param normal - normal of the plane to be constructed\n     * @returns a new Plane the normal vector to this plane at the given origin point.\n     * Note : the vector \"normal\" is updated because normalized.\n     */\n    static FromPositionAndNormal(origin, normal) {\n        const result = new Plane(0.0, 0.0, 0.0, 0.0);\n        normal.normalize();\n        result.normal = normal;\n        result.d = -(normal.x * origin.x +\n            normal.y * origin.y +\n            normal.z * origin.z);\n        return result;\n    }\n    /**\n     * Calculates the distance from a plane and a point\n     * @param origin - origin of the plane to be constructed\n     * @param normal - normal of the plane to be constructed\n     * @param point - point to calculate distance to\n     * @returns the signed distance between the plane defined by the normal vector at the \"origin\"\" point and the given other point.\n     */\n    static SignedDistanceToPlaneFromPositionAndNormal(origin, normal, point) {\n        const d = -(normal.x * origin.x + normal.y * origin.y + normal.z * origin.z);\n        return Vector3_1.Vector3.Dot(point, normal) + d;\n    }\n    /**\n     * @returns the plane coordinates as a new array of 4 elements [a, b, c, d].\n     */\n    asArray() {\n        return [this.normal.x, this.normal.y, this.normal.z, this.d];\n    }\n    // Methods\n    /**\n     * @returns a new plane copied from the current Plane.\n     */\n    clone() {\n        return new Plane(this.normal.x, this.normal.y, this.normal.z, this.d);\n    }\n    /**\n     * @returns the string \"Plane\".\n     */\n    getClassName() {\n        return 'Plane';\n    }\n    /**\n     * @returns the Plane hash code.\n     */\n    getHashCode() {\n        let hash = this.normal.getHashCode();\n        hash = (hash * 397) ^ (this.d || 0);\n        return hash;\n    }\n    /**\n     * Normalize the current Plane in place.\n     * @returns the updated Plane.\n     */\n    normalize() {\n        const norm = Math.sqrt(this.normal.x * this.normal.x +\n            this.normal.y * this.normal.y +\n            this.normal.z * this.normal.z);\n        let magnitude = 0.0;\n        if (norm !== 0) {\n            magnitude = 1.0 / norm;\n        }\n        this.normal.x *= magnitude;\n        this.normal.y *= magnitude;\n        this.normal.z *= magnitude;\n        this.d *= magnitude;\n        return this;\n    }\n    /**\n     * Applies a transformation the plane and returns the result\n     * @param transformation - the transformation matrix to be applied to the plane\n     * @returns a new Plane as the result of the transformation of the current Plane by the given matrix.\n     */\n    transform(transformation) {\n        const transposedMatrix = preallocatedVariables_1.MathTmp.Matrix[0];\n        Matrix_1.Matrix.TransposeToRef(transformation, transposedMatrix);\n        const m = transposedMatrix.m;\n        const x = this.normal.x;\n        const y = this.normal.y;\n        const z = this.normal.z;\n        const d = this.d;\n        const normalX = x * m[0] + y * m[1] + z * m[2] + d * m[3];\n        const normalY = x * m[4] + y * m[5] + z * m[6] + d * m[7];\n        const normalZ = x * m[8] + y * m[9] + z * m[10] + d * m[11];\n        const finalD = x * m[12] + y * m[13] + z * m[14] + d * m[15];\n        return new Plane(normalX, normalY, normalZ, finalD);\n    }\n    /**\n     * Calcualtte the dot product between the point and the plane normal\n     * @param point - point to calculate the dot product with\n     * @returns the dot product (float) of the point coordinates and the plane normal.\n     */\n    dotCoordinate(point) {\n        return (this.normal.x * point.x +\n            this.normal.y * point.y +\n            this.normal.z * point.z +\n            this.d);\n    }\n    /**\n     * Updates the current Plane from the plane defined by the three given points.\n     * @param point1 - one of the points used to contruct the plane\n     * @param point2 - one of the points used to contruct the plane\n     * @param point3 - one of the points used to contruct the plane\n     * @returns the updated Plane.\n     */\n    copyFromPoints(point1, point2, point3) {\n        const x1 = point2.x - point1.x;\n        const y1 = point2.y - point1.y;\n        const z1 = point2.z - point1.z;\n        const x2 = point3.x - point1.x;\n        const y2 = point3.y - point1.y;\n        const z2 = point3.z - point1.z;\n        const yz = y1 * z2 - z1 * y2;\n        const xz = z1 * x2 - x1 * z2;\n        const xy = x1 * y2 - y1 * x2;\n        const pyth = Math.sqrt(yz * yz + xz * xz + xy * xy);\n        let invPyth;\n        if (pyth !== 0) {\n            invPyth = 1.0 / pyth;\n        }\n        else {\n            invPyth = 0.0;\n        }\n        this.normal.x = yz * invPyth;\n        this.normal.y = xz * invPyth;\n        this.normal.z = xy * invPyth;\n        this.d = -(this.normal.x * point1.x +\n            this.normal.y * point1.y +\n            this.normal.z * point1.z);\n        return this;\n    }\n    /**\n     * Checks if the plane is facing a given direction\n     * @param direction - the direction to check if the plane is facing\n     * @param epsilon - value the dot product is compared against (returns true if dot &lt;= epsilon)\n     * @returns True is the vector \"direction\"  is the same side than the plane normal.\n     */\n    isFrontFacingTo(direction, epsilon) {\n        const dot = Vector3_1.Vector3.Dot(this.normal, direction);\n        return dot <= epsilon;\n    }\n    /**\n     * Calculates the distance to a point\n     * @param point - point to calculate distance to\n     * @returns the signed distance (float) from the given point to the Plane.\n     */\n    signedDistanceTo(point) {\n        return Vector3_1.Vector3.Dot(point, this.normal) + this.d;\n    }\n}\nexports.Plane = Plane;\n//# sourceMappingURL=Plane.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Frustum = void 0;\nconst Plane_1 = require(\"./Plane\");\n/**\n * Reprasents a camera frustum\n * @public\n */\nclass Frustum {\n    /**\n     * Gets the planes representing the frustum\n     * @param transform - matrix to be applied to the returned planes\n     * @returns a new array of 6 Frustum planes computed by the given transformation matrix.\n     */\n    static GetPlanes(transform) {\n        const frustumPlanes = [];\n        for (let index = 0; index < 6; index++) {\n            frustumPlanes.push(new Plane_1.Plane(0.0, 0.0, 0.0, 0.0));\n        }\n        Frustum.GetPlanesToRef(transform, frustumPlanes);\n        return frustumPlanes;\n    }\n    /**\n     * Gets the near frustum plane transformed by the transform matrix\n     * @param transform - transformation matrix to be applied to the resulting frustum plane\n     * @param frustumPlane - the resuling frustum plane\n     */\n    static GetNearPlaneToRef(transform, frustumPlane) {\n        const m = transform.m;\n        frustumPlane.normal.x = m[3] + m[2];\n        frustumPlane.normal.y = m[7] + m[6];\n        frustumPlane.normal.z = m[11] + m[10];\n        frustumPlane.d = m[15] + m[14];\n        frustumPlane.normalize();\n    }\n    /**\n     * Gets the far frustum plane transformed by the transform matrix\n     * @param transform - transformation matrix to be applied to the resulting frustum plane\n     * @param frustumPlane - the resuling frustum plane\n     */\n    static GetFarPlaneToRef(transform, frustumPlane) {\n        const m = transform.m;\n        frustumPlane.normal.x = m[3] - m[2];\n        frustumPlane.normal.y = m[7] - m[6];\n        frustumPlane.normal.z = m[11] - m[10];\n        frustumPlane.d = m[15] - m[14];\n        frustumPlane.normalize();\n    }\n    /**\n     * Gets the left frustum plane transformed by the transform matrix\n     * @param transform - transformation matrix to be applied to the resulting frustum plane\n     * @param frustumPlane - the resuling frustum plane\n     */\n    static GetLeftPlaneToRef(transform, frustumPlane) {\n        const m = transform.m;\n        frustumPlane.normal.x = m[3] + m[0];\n        frustumPlane.normal.y = m[7] + m[4];\n        frustumPlane.normal.z = m[11] + m[8];\n        frustumPlane.d = m[15] + m[12];\n        frustumPlane.normalize();\n    }\n    /**\n     * Gets the right frustum plane transformed by the transform matrix\n     * @param transform - transformation matrix to be applied to the resulting frustum plane\n     * @param frustumPlane - the resuling frustum plane\n     */\n    static GetRightPlaneToRef(transform, frustumPlane) {\n        const m = transform.m;\n        frustumPlane.normal.x = m[3] - m[0];\n        frustumPlane.normal.y = m[7] - m[4];\n        frustumPlane.normal.z = m[11] - m[8];\n        frustumPlane.d = m[15] - m[12];\n        frustumPlane.normalize();\n    }\n    /**\n     * Gets the top frustum plane transformed by the transform matrix\n     * @param transform - transformation matrix to be applied to the resulting frustum plane\n     * @param frustumPlane - the resuling frustum plane\n     */\n    static GetTopPlaneToRef(transform, frustumPlane) {\n        const m = transform.m;\n        frustumPlane.normal.x = m[3] - m[1];\n        frustumPlane.normal.y = m[7] - m[5];\n        frustumPlane.normal.z = m[11] - m[9];\n        frustumPlane.d = m[15] - m[13];\n        frustumPlane.normalize();\n    }\n    /**\n     * Gets the bottom frustum plane transformed by the transform matrix\n     * @param transform - transformation matrix to be applied to the resulting frustum plane\n     * @param frustumPlane - the resuling frustum plane\n     */\n    static GetBottomPlaneToRef(transform, frustumPlane) {\n        const m = transform.m;\n        frustumPlane.normal.x = m[3] + m[1];\n        frustumPlane.normal.y = m[7] + m[5];\n        frustumPlane.normal.z = m[11] + m[9];\n        frustumPlane.d = m[15] + m[13];\n        frustumPlane.normalize();\n    }\n    /**\n     * Sets the given array \"frustumPlanes\" with the 6 Frustum planes computed by the given transformation matrix.\n     * @param transform - transformation matrix to be applied to the resulting frustum planes\n     * @param frustumPlanes - the resuling frustum planes\n     */\n    static GetPlanesToRef(transform, frustumPlanes) {\n        // Near\n        Frustum.GetNearPlaneToRef(transform, frustumPlanes[0]);\n        // Far\n        Frustum.GetFarPlaneToRef(transform, frustumPlanes[1]);\n        // Left\n        Frustum.GetLeftPlaneToRef(transform, frustumPlanes[2]);\n        // Right\n        Frustum.GetRightPlaneToRef(transform, frustumPlanes[3]);\n        // Top\n        Frustum.GetTopPlaneToRef(transform, frustumPlanes[4]);\n        // Bottom\n        Frustum.GetBottomPlaneToRef(transform, frustumPlanes[5]);\n    }\n}\nexports.Frustum = Frustum;\n//# sourceMappingURL=Furstum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Path2 = void 0;\nconst Vector2_1 = require(\"./Vector2\");\nconst Arc2_1 = require(\"./Arc2\");\nconst types_1 = require(\"./types\");\n/**\n * Represents a 2D path made up of multiple 2D points\n * @public\n */\nclass Path2 {\n    /**\n     * Creates a Path2 object from the starting 2D coordinates x and y.\n     * @param x - the starting points x value\n     * @param y - the starting points y value\n     */\n    constructor(x, y) {\n        /**\n         * If the path start and end point are the same\n         */\n        this.closed = false;\n        this._points = new Array();\n        this._length = 0.0;\n        this._points.push(new Vector2_1.Vector2(x, y));\n    }\n    /**\n     * Creates a new path starting from an x and y position\n     * @param x - starting x value\n     * @param y - starting y value\n     * @returns a new Path2 starting at the coordinates (x, y).\n     */\n    static StartingAt(x, y) {\n        return new Path2(x, y);\n    }\n    /**\n     * Adds a new segment until the given coordinates (x, y) to the current Path2.\n     * @param x - the added points x value\n     * @param y - the added points y value\n     * @returns the updated Path2.\n     */\n    addLineTo(x, y) {\n        if (this.closed) {\n            return this;\n        }\n        const newPoint = new Vector2_1.Vector2(x, y);\n        const previousPoint = this._points[this._points.length - 1];\n        this._points.push(newPoint);\n        this._length += newPoint.subtract(previousPoint).length();\n        return this;\n    }\n    /**\n     * Adds _numberOfSegments_ segments according to the arc definition (middle point coordinates, end point coordinates, the arc start point being the current Path2 last point) to the current Path2.\n     * @param midX - middle point x value\n     * @param midY - middle point y value\n     * @param endX - end point x value\n     * @param endY - end point y value\n     * @param numberOfSegments - (default: 36)\n     * @returns the updated Path2.\n     */\n    addArcTo(midX, midY, endX, endY, numberOfSegments = 36) {\n        if (this.closed) {\n            return this;\n        }\n        const startPoint = this._points[this._points.length - 1];\n        const midPoint = new Vector2_1.Vector2(midX, midY);\n        const endPoint = new Vector2_1.Vector2(endX, endY);\n        const arc = new Arc2_1.Arc2(startPoint, midPoint, endPoint);\n        let increment = arc.angle.radians() / numberOfSegments;\n        if (arc.orientation === types_1.Orientation.CW) {\n            increment *= -1;\n        }\n        let currentAngle = arc.startAngle.radians() + increment;\n        for (let i = 0; i < numberOfSegments; i++) {\n            const x = Math.cos(currentAngle) * arc.radius + arc.centerPoint.x;\n            const y = Math.sin(currentAngle) * arc.radius + arc.centerPoint.y;\n            this.addLineTo(x, y);\n            currentAngle += increment;\n        }\n        return this;\n    }\n    /**\n     * Closes the Path2.\n     * @returns the Path2.\n     */\n    close() {\n        this.closed = true;\n        return this;\n    }\n    /**\n     * Gets the sum of the distance between each sequential point in the path\n     * @returns the Path2 total length (float).\n     */\n    length() {\n        let result = this._length;\n        if (!this.closed) {\n            const lastPoint = this._points[this._points.length - 1];\n            const firstPoint = this._points[0];\n            result += firstPoint.subtract(lastPoint).length();\n        }\n        return result;\n    }\n    /**\n     * Gets the points which construct the path\n     * @returns the Path2 internal array of points.\n     */\n    getPoints() {\n        return this._points;\n    }\n    /**\n     * Retreives the point at the distance aways from the starting point\n     * @param normalizedLengthPosition - the length along the path to retreive the point from\n     * @returns a new Vector2 located at a percentage of the Path2 total length on this path.\n     */\n    getPointAtLengthPosition(normalizedLengthPosition) {\n        if (normalizedLengthPosition < 0 || normalizedLengthPosition > 1) {\n            return Vector2_1.Vector2.Zero();\n        }\n        const lengthPosition = normalizedLengthPosition * this.length();\n        let previousOffset = 0;\n        for (let i = 0; i < this._points.length; i++) {\n            const j = (i + 1) % this._points.length;\n            const a = this._points[i];\n            const b = this._points[j];\n            const bToA = b.subtract(a);\n            const nextOffset = bToA.length() + previousOffset;\n            if (lengthPosition >= previousOffset && lengthPosition <= nextOffset) {\n                const dir = bToA.normalize();\n                const localOffset = lengthPosition - previousOffset;\n                return new Vector2_1.Vector2(a.x + dir.x * localOffset, a.y + dir.y * localOffset);\n            }\n            previousOffset = nextOffset;\n        }\n        return Vector2_1.Vector2.Zero();\n    }\n}\nexports.Path2 = Path2;\n//# sourceMappingURL=Path2d.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Path3D = void 0;\nconst Vector3_1 = require(\"./Vector3\");\nconst types_1 = require(\"./types\");\nconst Scalar_1 = require(\"./Scalar\");\n/**\n * Represents a 3D path made up of multiple 3D points\n * @public\n */\nclass Path3D {\n    /**\n     * new Path3D(path, normal, raw)\n     * Creates a Path3D. A Path3D is a logical math object, so not a mesh.\n     * please read the description in the tutorial :  http://doc.babylonjs.com/tutorials/How_to_use_Path3D\n     * @param path - an array of Vector3, the curve axis of the Path3D\n     * @param normal - (options) Vector3, the first wanted normal to the curve. Ex (0, 1, 0) for a vertical normal.\n     * @param raw - (optional, default false) : boolean, if true the returned Path3D isn't normalized. Useful to depict path acceleration or speed.\n     */\n    constructor(\n    /**\n     * an array of Vector3, the curve axis of the Path3D\n     */\n    path, firstNormal = null, raw) {\n        this.path = path;\n        this._curve = new Array();\n        this._distances = new Array();\n        this._tangents = new Array();\n        this._normals = new Array();\n        this._binormals = new Array();\n        for (let p = 0; p < path.length; p++) {\n            this._curve[p] = path[p].clone(); // hard copy\n        }\n        this._raw = raw || false;\n        this._compute(firstNormal);\n    }\n    /**\n     * Returns the Path3D array of successive Vector3 designing its curve.\n     * @returns the Path3D array of successive Vector3 designing its curve.\n     */\n    getCurve() {\n        return this._curve;\n    }\n    /**\n     * Returns an array populated with tangent vectors on each Path3D curve point.\n     * @returns an array populated with tangent vectors on each Path3D curve point.\n     */\n    getTangents() {\n        return this._tangents;\n    }\n    /**\n     * Returns an array populated with normal vectors on each Path3D curve point.\n     * @returns an array populated with normal vectors on each Path3D curve point.\n     */\n    getNormals() {\n        return this._normals;\n    }\n    /**\n     * Returns an array populated with binormal vectors on each Path3D curve point.\n     * @returns an array populated with binormal vectors on each Path3D curve point.\n     */\n    getBinormals() {\n        return this._binormals;\n    }\n    /**\n     * Returns an array populated with distances (float) of the i-th point from the first curve point.\n     * @returns an array populated with distances (float) of the i-th point from the first curve point.\n     */\n    getDistances() {\n        return this._distances;\n    }\n    /**\n     * Forces the Path3D tangent, normal, binormal and distance recomputation.\n     * @param path - path which all values are copied into the curves points\n     * @param firstNormal - which should be projected onto the curve\n     * @returns the same object updated.\n     */\n    update(path, firstNormal = null) {\n        for (let p = 0; p < path.length; p++) {\n            this._curve[p].x = path[p].x;\n            this._curve[p].y = path[p].y;\n            this._curve[p].z = path[p].z;\n        }\n        this._compute(firstNormal);\n        return this;\n    }\n    // private function compute() : computes tangents, normals and binormals\n    _compute(firstNormal) {\n        const l = this._curve.length;\n        // first and last tangents\n        this._tangents[0] = this._getFirstNonNullVector(0);\n        if (!this._raw) {\n            this._tangents[0].normalize();\n        }\n        this._tangents[l - 1] = this._curve[l - 1].subtract(this._curve[l - 2]);\n        if (!this._raw) {\n            this._tangents[l - 1].normalize();\n        }\n        // normals and binormals at first point : arbitrary vector with _normalVector()\n        const tg0 = this._tangents[0];\n        const pp0 = this._normalVector(this._curve[0], tg0, firstNormal);\n        this._normals[0] = pp0;\n        if (!this._raw) {\n            this._normals[0].normalize();\n        }\n        this._binormals[0] = Vector3_1.Vector3.Cross(tg0, this._normals[0]);\n        if (!this._raw) {\n            this._binormals[0].normalize();\n        }\n        this._distances[0] = 0.0;\n        // normals and binormals : next points\n        let prev; // previous vector (segment)\n        let cur; // current vector (segment)\n        let curTang; // current tangent\n        // previous normal\n        let prevBinor; // previous binormal\n        for (let i = 1; i < l; i++) {\n            // tangents\n            prev = this._getLastNonNullVector(i);\n            if (i < l - 1) {\n                cur = this._getFirstNonNullVector(i);\n                this._tangents[i] = prev.add(cur);\n                this._tangents[i].normalize();\n            }\n            this._distances[i] = this._distances[i - 1] + prev.length();\n            // normals and binormals\n            // http://www.cs.cmu.edu/afs/andrew/scs/cs/15-462/web/old/asst2camera.html\n            curTang = this._tangents[i];\n            prevBinor = this._binormals[i - 1];\n            this._normals[i] = Vector3_1.Vector3.Cross(prevBinor, curTang);\n            if (!this._raw) {\n                this._normals[i].normalize();\n            }\n            this._binormals[i] = Vector3_1.Vector3.Cross(curTang, this._normals[i]);\n            if (!this._raw) {\n                this._binormals[i].normalize();\n            }\n        }\n    }\n    // returns the first non null vector from index : curve[index + N].subtract(curve[index])\n    _getFirstNonNullVector(index) {\n        let i = 1;\n        let nNVector = this._curve[index + i].subtract(this._curve[index]);\n        while (nNVector.length() === 0 && index + i + 1 < this._curve.length) {\n            i++;\n            nNVector = this._curve[index + i].subtract(this._curve[index]);\n        }\n        return nNVector;\n    }\n    // returns the last non null vector from index : curve[index].subtract(curve[index - N])\n    _getLastNonNullVector(index) {\n        let i = 1;\n        let nLVector = this._curve[index].subtract(this._curve[index - i]);\n        while (nLVector.length() === 0 && index > i + 1) {\n            i++;\n            nLVector = this._curve[index].subtract(this._curve[index - i]);\n        }\n        return nLVector;\n    }\n    // private function normalVector(v0, vt, va) :\n    // returns an arbitrary point in the plane defined by the point v0 and the vector vt orthogonal to this plane\n    // if va is passed, it returns the va projection on the plane orthogonal to vt at the point v0\n    _normalVector(v0, vt, va) {\n        let normal0;\n        let tgl = vt.length();\n        if (tgl === 0.0) {\n            tgl = 1.0;\n        }\n        if (va === undefined || va === null) {\n            let point;\n            if (!Scalar_1.Scalar.WithinEpsilon(Math.abs(vt.y) / tgl, 1.0, types_1.Epsilon)) {\n                // search for a point in the plane\n                point = new Vector3_1.Vector3(0.0, -1.0, 0.0);\n            }\n            else if (!Scalar_1.Scalar.WithinEpsilon(Math.abs(vt.x) / tgl, 1.0, types_1.Epsilon)) {\n                point = new Vector3_1.Vector3(1.0, 0.0, 0.0);\n            }\n            else if (!Scalar_1.Scalar.WithinEpsilon(Math.abs(vt.z) / tgl, 1.0, types_1.Epsilon)) {\n                point = new Vector3_1.Vector3(0.0, 0.0, 1.0);\n            }\n            else {\n                point = Vector3_1.Vector3.Zero();\n            }\n            normal0 = Vector3_1.Vector3.Cross(vt, point);\n        }\n        else {\n            normal0 = Vector3_1.Vector3.Cross(vt, va);\n            Vector3_1.Vector3.CrossToRef(normal0, vt, normal0);\n        }\n        normal0.normalize();\n        return normal0;\n    }\n}\nexports.Path3D = Path3D;\n//# sourceMappingURL=Path3d.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Size = void 0;\n/**\n * Size containing widht and height\n * @public\n */\nclass Size {\n    /**\n     * Creates a Size object from the given width and height (floats).\n     * @param width - width of the new size\n     * @param height - height of the new size\n     */\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n    /**\n     * The surface of the Size : width * height (float).\n     */\n    get surface() {\n        return this.width * this.height;\n    }\n    /**\n     * Create a new size of zero\n     * @returns a new Size set to (0.0, 0.0)\n     */\n    static Zero() {\n        return new Size(0.0, 0.0);\n    }\n    /**\n     * Creates a new Size set at the linear interpolation \"amount\" between \"start\" and \"end\"\n     * @param start - starting size to lerp between\n     * @param end - end size to lerp between\n     * @param amount - amount to lerp between the start and end values\n     * @returns a new Size set at the linear interpolation \"amount\" between \"start\" and \"end\"\n     */\n    static Lerp(start, end, amount) {\n        const w = start.width + (end.width - start.width) * amount;\n        const h = start.height + (end.height - start.height) * amount;\n        return new Size(w, h);\n    }\n    /**\n     * Returns a string with the Size width and height\n     * @returns a string with the Size width and height\n     */\n    toString() {\n        return `{W: ${this.width}, H: ${this.height}}`;\n    }\n    /**\n     * \"Size\"\n     * @returns the string \"Size\"\n     */\n    getClassName() {\n        return 'Size';\n    }\n    /**\n     * Returns the Size hash code.\n     * @returns a hash code for a unique width and height\n     */\n    getHashCode() {\n        let hash = this.width || 0;\n        hash = (hash * 397) ^ (this.height || 0);\n        return hash;\n    }\n    /**\n     * Updates the current size from the given one.\n     * @param src - the given size\n     */\n    copyFrom(src) {\n        this.width = src.width;\n        this.height = src.height;\n    }\n    /**\n     * Updates in place the current Size from the given floats.\n     * @param width - width of the new size\n     * @param height - height of the new size\n     * @returns the updated Size.\n     */\n    copyFromFloats(width, height) {\n        this.width = width;\n        this.height = height;\n        return this;\n    }\n    /**\n     * Updates in place the current Size from the given floats.\n     * @param width - width to set\n     * @param height - height to set\n     * @returns the updated Size.\n     */\n    set(width, height) {\n        return this.copyFromFloats(width, height);\n    }\n    /**\n     * Multiplies the width and height by numbers\n     * @param w - factor to multiple the width by\n     * @param h - factor to multiple the height by\n     * @returns a new Size set with the multiplication result of the current Size and the given floats.\n     */\n    multiplyByFloats(w, h) {\n        return new Size(this.width * w, this.height * h);\n    }\n    /**\n     * Clones the size\n     * @returns a new Size copied from the given one.\n     */\n    clone() {\n        return new Size(this.width, this.height);\n    }\n    /**\n     * True if the current Size and the given one width and height are strictly equal.\n     * @param other - the other size to compare against\n     * @returns True if the current Size and the given one width and height are strictly equal.\n     */\n    equals(other) {\n        if (!other) {\n            return false;\n        }\n        return this.width === other.width && this.height === other.height;\n    }\n    /**\n     * Sums the width and height of two sizes\n     * @param otherSize - size to add to this size\n     * @returns a new Size set as the addition result of the current Size and the given one.\n     */\n    add(otherSize) {\n        const r = new Size(this.width + otherSize.width, this.height + otherSize.height);\n        return r;\n    }\n    /**\n     * Subtracts the width and height of two\n     * @param otherSize - size to subtract to this size\n     * @returns a new Size set as the subtraction result of  the given one from the current Size.\n     */\n    subtract(otherSize) {\n        const r = new Size(this.width - otherSize.width, this.height - otherSize.height);\n        return r;\n    }\n}\nexports.Size = Size;\n//# sourceMappingURL=Size.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./preallocatedVariables\"), exports);\n__exportStar(require(\"./Angle\"), exports);\n__exportStar(require(\"./Arc2\"), exports);\n__exportStar(require(\"./Axis\"), exports);\n__exportStar(require(\"./BezierCurve\"), exports);\n__exportStar(require(\"./Color3\"), exports);\n__exportStar(require(\"./Color4\"), exports);\n__exportStar(require(\"./Curve3d\"), exports);\n__exportStar(require(\"./Furstum\"), exports);\n__exportStar(require(\"./Matrix\"), exports);\n__exportStar(require(\"./Path2d\"), exports);\n__exportStar(require(\"./Path3d\"), exports);\n__exportStar(require(\"./Plane\"), exports);\n__exportStar(require(\"./Quaternion\"), exports);\n__exportStar(require(\"./Scalar\"), exports);\n__exportStar(require(\"./Size\"), exports);\n__exportStar(require(\"./Vector2\"), exports);\n__exportStar(require(\"./Vector3\"), exports);\n__exportStar(require(\"./Vector4\"), exports);\n__exportStar(require(\"./index\"), exports);\n//# sourceMappingURL=index.js.map","import { ObservableComponent } from '../ecs/Component'\nimport { newId } from '../ecs/helpers'\nimport { Animator } from './Components'\n\n/** @public */\nexport type AnimationParams = {\n  looping?: boolean\n  speed?: number\n  weight?: number\n  layer?: number\n}\n\nconst defaultParams: Required<\n  Pick<AnimationParams, 'looping' | 'speed' | 'weight' | 'layer'>\n> = {\n  looping: true,\n  speed: 1.0,\n  weight: 1.0,\n  layer: 0\n}\n\n/**\n * @public\n */\nexport class AnimationState extends ObservableComponent {\n  // @internal\n  public isAnimationClip: boolean = true\n\n  /**\n   * Name of the animation in the model\n   */\n  @ObservableComponent.readonly\n  public readonly clip: string\n\n  /**\n   * Does the animation loop?, default: true\n   */\n  @ObservableComponent.field\n  public looping: boolean = defaultParams.looping\n\n  /**\n   * Weight of the animation, values from 0 to 1, used to blend several animations. default: 1\n   */\n  @ObservableComponent.field\n  public weight: number = defaultParams.weight\n\n  /**\n   * Is the animation playing? default: true\n   */\n  @ObservableComponent.field\n  public playing: boolean = false\n\n  /**\n   * Does any anyone asked to reset the animation? default: false\n   */\n  @ObservableComponent.field\n  public shouldReset: boolean = false\n\n  /**\n   * The animation speed\n   */\n  @ObservableComponent.field\n  public speed: number = defaultParams.speed\n\n  // @internal\n  @ObservableComponent.readonly\n  readonly name: string = newId('AnimClip')\n\n  /**\n   * Layering allows you to have two or more levels of animation on an object's parameters at the same time\n   */\n  public layer: number = defaultParams.layer\n\n  // @internal\n  public owner?: Animator\n\n  constructor(clip: string, params: AnimationParams = defaultParams) {\n    super()\n    this.clip = clip\n    this.setParams({ ...params })\n  }\n\n  /**\n   * Sets the clip parameters\n   */\n  setParams(params: AnimationParams) {\n    this.looping = params.looping !== undefined ? params.looping : this.looping\n    this.speed = params.speed || this.speed\n    this.weight = params.weight || this.weight\n    this.layer = params.layer || this.layer\n    return this\n  }\n\n  toJSON() {\n    const ret = JSON.parse(JSON.stringify(super.toJSON()))\n    if (this.shouldReset) {\n      this.shouldReset = false\n    }\n    return ret\n  }\n\n  /**\n   * Starts the animation\n   */\n  play(reset: boolean = false) {\n    this.owner?.play(this, reset)\n  }\n\n  /**\n   * Pauses the animation\n   */\n  pause() {\n    this.owner?.pause(this)\n  }\n\n  /**\n   * Resets the animation state to the frame 0\n   */\n  reset() {\n    this.shouldReset = true\n  }\n\n  /**\n   * Resets and pauses the animation\n   */\n  stop() {\n    this.owner?.stop(this)\n  }\n}\n","import { ReadOnlyColor4 } from '@dcl/ecs-math'\n\n/** @public */\nexport enum InputEventType {\n  DOWN,\n  UP\n}\n\n/** @public */\nexport enum CameraMode {\n  FirstPerson = 0,\n  ThirdPerson = 1,\n  // @internal\n  BuildingToolGodMode = 2\n}\n\n// @internal\nexport const AVATAR_OBSERVABLE = 'AVATAR_OBSERVABLE'\n\n/**\n * @public\n */\nexport type WearableId = string\n\n/**\n * @public\n */\nexport type AvatarForRenderer = {\n  bodyShape: WearableId\n  skinColor: ReadOnlyColor4\n  hairColor: ReadOnlyColor4\n  eyeColor: ReadOnlyColor4\n  wearables: WearableId[]\n}\n\n/**\n * @public\n */\nexport type Wearable = {\n  id: WearableId\n  type: 'wearable'\n  category: string\n  baseUrl: string\n  tags: string[]\n  representations: BodyShapeRespresentation[]\n}\n\n/**\n * @public\n */\nexport type BodyShapeRespresentation = {\n  bodyShapes: string[]\n  mainFile: string\n  contents: FileAndHash[]\n}\n\n/**\n * @public\n */\nexport type FileAndHash = {\n  file: string\n  hash: string\n}\n\n/**\n * @public\n */\nexport type ProfileForRenderer = {\n  userId: string\n  name: string\n  description: string\n  email: string\n  avatar: AvatarForRenderer\n  snapshots: {\n    face256: string\n    body: string\n  }\n  version: number\n  hasConnectedWeb3: boolean\n  updatedAt?: number\n  createdAt?: number\n  parcelsWithAccess?: ParcelsWithAccess\n}\n\n/** @public */\nexport type ParcelsWithAccess = Array<{\n  x: number\n  y: number\n  role: LandRole\n}>\n\n/** @public */\nexport enum LandRole {\n  OWNER = 'owner',\n  OPERATOR = 'operator'\n}\n\n/**\n * @public\n */\nexport type MinimapSceneInfo = {\n  name: string\n  owner: string\n  description: string\n  previewImageUrl: string | undefined\n  type: number\n  parcels: { x: number; y: number }[]\n  isPOI: boolean\n}\n","import { Vector3 } from '@dcl/ecs-math'\n\nimport { InputEventType } from './Types'\nimport { Component, DisposableComponent } from '../ecs/Component'\n\n/** @public */\nexport type InputEventKind = 'BUTTON_DOWN' | 'BUTTON_UP'\n\n/**\n * @public\n */\nexport enum ActionButton {\n  POINTER = 'POINTER',\n  PRIMARY = 'PRIMARY',\n  SECONDARY = 'SECONDARY',\n  ANY = 'ANY',\n  FORWARD = 'FORWARD',\n  BACKWARD = 'BACKWARD',\n  RIGHT = 'RIGHT',\n  LEFT = 'LEFT',\n  JUMP = 'JUMP',\n  WALK = 'WALK',\n  ACTION_3 = 'ACTION_3',\n  ACTION_4 = 'ACTION_4',\n  ACTION_5 = 'ACTION_5',\n  ACTION_6 = 'ACTION_6'\n}\n\n/** @public */\nexport type InputState = Record<\n  ActionButton,\n  {\n    BUTTON_DOWN: boolean\n  }\n>\n\n/** @public */\nexport type LocalActionButtonEvent = GlobalInputEventResult & {\n  origin: Vector3\n  direction: Vector3\n  button: ActionButton\n  hit?: GlobalInputEventResult['hit'] & {\n    hitPoint: Vector3\n    normal: Vector3\n    worldNormal: Vector3\n  }\n}\n\n/**\n * @public\n */\nexport class PointerEventComponent {\n  constructor(\n    public readonly callback: (event: LocalActionButtonEvent) => void\n  ) {\n    if (!callback || !('apply' in callback) || !('call' in callback)) {\n      throw new Error('Callback is not a function')\n    }\n    Input.ensureInstance()\n  }\n}\n\n/**\n * @public\n */\n@Component('pointerDown')\nexport class GlobalPointerDown extends PointerEventComponent {}\n\n/**\n * @public\n */\n@Component('pointerUp')\nexport class GlobalPointerUp extends PointerEventComponent {}\n\n/**\n * @public\n */\nexport class Subscription {\n  public fn: (e: LocalActionButtonEvent) => void\n  public useRaycast: boolean\n\n  constructor(fn: (e: LocalActionButtonEvent) => void, useRaycast: boolean) {\n    this.fn = fn\n    this.useRaycast = useRaycast\n  }\n}\n\n/**\n * @public\n */\nexport class Input {\n  private static _instance: Input\n\n  // @internal\n  private buttonIdMapping: ActionButton[] = [\n    ActionButton.POINTER,\n    ActionButton.PRIMARY,\n    ActionButton.SECONDARY,\n    ActionButton.ANY,\n    ActionButton.FORWARD,\n    ActionButton.BACKWARD,\n    ActionButton.RIGHT,\n    ActionButton.LEFT,\n    ActionButton.JUMP,\n    ActionButton.WALK,\n    ActionButton.ACTION_3,\n    ActionButton.ACTION_4,\n    ActionButton.ACTION_5,\n    ActionButton.ACTION_6\n  ]\n\n  static get instance(): Input {\n    Input.ensureInstance()\n    return Input._instance\n  }\n\n  // @internal\n  private subscriptions: Record<\n    ActionButton,\n    Record<InputEventKind, Array<Subscription>>\n  > = this.buttonIdMapping.reduce(\n    (acc, k) => ({ ...acc, [k]: { BUTTON_DOWN: [], BUTTON_UP: [] } }),\n    {} as Record<ActionButton, Record<InputEventKind, Array<Subscription>>>\n  )\n\n  private internalState: InputState = this.buttonIdMapping.reduce(\n    (acc, k) => ({ ...acc, [k]: { BUTTON_DOWN: false } }),\n    {} as InputState\n  )\n\n  private constructor() {}\n\n  static ensureInstance(): any {\n    if (!Input._instance) {\n      Input._instance = new Input()\n    }\n  }\n\n  /**\n   * Allows to know if a button is pressed\n   *\n   * Returns true if the button is pressed\n   * @param buttonId - The id of the button.\n   */\n  public isButtonPressed(buttonId: ActionButton) {\n    return this.internalState[buttonId]\n  }\n\n  /**\n   * Subscribes to an input event and triggers the provided callback.\n   *\n   * Returns a function that can be called to remove the subscription.\n   * @param eventName - The name of the event (see InputEventKind).\n   * @param buttonId - The id of the button.\n   * @param useRaycast - Enables getting raycast information.\n   * @param fn - A callback function to be called when the event is triggered.\n   */\n  public subscribe(\n    eventName: InputEventKind,\n    buttonId: ActionButton,\n    useRaycast: boolean,\n    fn: (e: LocalActionButtonEvent) => void\n  ): () => void {\n    this.subscriptions[buttonId][eventName].push(\n      new Subscription(fn, useRaycast)\n    )\n    return () => {\n      this.unsubscribe(eventName, buttonId, fn)\n    }\n  }\n\n  /**\n   * Removes an existing input event subscription.\n   * @param eventName - The name of the event (see InputEventKind).\n   * @param buttonId - The id of the button.\n   * @param fn - The callback function used when subscribing to the event.\n   */\n  public unsubscribe(\n    eventName: InputEventKind,\n    buttonId: ActionButton,\n    fn: (e: LocalActionButtonEvent) => void\n  ) {\n    const index = this.getSubscriptionId(eventName, buttonId, fn)\n    if (index > -1) {\n      return this.subscriptions[buttonId][eventName].splice(index, 1)\n    }\n    return false\n  }\n\n  public handlePointerEvent(data: GlobalInputEventResult) {\n    const button = this.getPointerById(data.buttonId)\n\n    if (!button) {\n      return\n    }\n\n    const eventResult: LocalActionButtonEvent = {\n      ...data,\n      button,\n      direction: new Vector3().copyFrom(data.direction),\n      origin: new Vector3().copyFrom(data.origin),\n      hit: undefined\n    }\n\n    const hit = data.hit\n      ? {\n          ...data.hit,\n          hitPoint: new Vector3().copyFrom(data.hit.hitPoint),\n          normal: new Vector3().copyFrom(data.hit.normal),\n          worldNormal: new Vector3().copyFrom(data.hit.worldNormal)\n        }\n      : undefined\n\n    if (data.type === InputEventType.DOWN) {\n      this.internalState[button].BUTTON_DOWN = true\n\n      for (\n        let i = 0;\n        i < this.subscriptions[button]['BUTTON_DOWN'].length;\n        i++\n      ) {\n        const subscription = this.subscriptions[button]['BUTTON_DOWN'][i]\n\n        // remove hit information when raycast is disabled\n        if (subscription.useRaycast) {\n          eventResult.hit = hit\n        } else {\n          eventResult.hit = undefined\n        }\n\n        subscription.fn(eventResult)\n      }\n\n      if (hit && hit.entityId && DisposableComponent.engine) {\n        const entity = DisposableComponent.engine.entities[hit.entityId]\n        const handler = entity && entity.getComponentOrNull(GlobalPointerDown)\n        if (handler) {\n          eventResult.hit = hit\n          handler.callback(eventResult)\n        }\n      }\n    } else {\n      this.internalState[button].BUTTON_DOWN = false\n\n      for (let i = 0; i < this.subscriptions[button]['BUTTON_UP'].length; i++) {\n        const subscription = this.subscriptions[button]['BUTTON_UP'][i]\n\n        // remove hit information when raycast is disabled\n        if (subscription.useRaycast) {\n          eventResult.hit = hit\n        } else {\n          eventResult.hit = undefined\n        }\n\n        subscription.fn(eventResult)\n      }\n\n      if (hit && hit.entityId && DisposableComponent.engine) {\n        const entity = DisposableComponent.engine.entities[hit.entityId]\n        const handler = entity && entity.getComponentOrNull(GlobalPointerUp)\n        if (handler) {\n          eventResult.hit = hit\n          handler.callback(eventResult)\n        }\n      }\n    }\n  }\n\n  private getSubscriptionId(\n    eventName: InputEventKind,\n    buttonId: ActionButton,\n    fn: (e: LocalActionButtonEvent) => void\n  ): number {\n    for (let i = 0; i < this.subscriptions[buttonId][eventName].length; i++) {\n      if (this.subscriptions[buttonId][eventName][i].fn === fn) {\n        return i\n      }\n    }\n\n    return -1\n  }\n\n  private getPointerById(id: number): ActionButton | null {\n    if (id < 0 || id >= this.buttonIdMapping.length) {\n      return null\n    }\n\n    const actionButton = this.buttonIdMapping[id]\n\n    if (actionButton === ActionButton.ANY) {\n      return null\n    }\n\n    return actionButton\n  }\n}\n","import {\n  Vector3,\n  Quaternion,\n  Matrix,\n  MathTmp,\n  Color3,\n  Color4\n} from '@dcl/ecs-math'\n\nimport {\n  Component,\n  ObservableComponent,\n  DisposableComponent,\n  getComponentId\n} from '../ecs/Component'\nimport { AnimationState } from './AnimationState'\nimport { log, newId } from '../ecs/helpers'\nimport { ActionButton } from './Input'\nimport { CameraMode } from './Types'\n\n/** @public */\nexport type TranformConstructorArgs = TransformConstructorArgs\n\n/** @public */\nexport type TransformConstructorArgs = {\n  position?: Vector3\n  rotation?: Quaternion\n  scale?: Vector3\n}\n\n/**\n * @public\n */\nexport enum CLASS_ID {\n  TRANSFORM = 1,\n  UUID_CALLBACK = 8,\n  BOX_SHAPE = 16,\n  SPHERE_SHAPE = 17,\n  PLANE_SHAPE = 18,\n  CONE_SHAPE = 19,\n  CYLINDER_SHAPE = 20,\n  TEXT_SHAPE = 21,\n\n  NFT_SHAPE = 22,\n  UI_WORLD_SPACE_SHAPE = 23,\n  UI_SCREEN_SPACE_SHAPE = 24,\n  UI_CONTAINER_RECT = 25,\n  UI_CONTAINER_STACK = 26,\n  UI_TEXT_SHAPE = 27,\n  UI_INPUT_TEXT_SHAPE = 28,\n  UI_IMAGE_SHAPE = 29,\n  UI_SLIDER_SHAPE = 30,\n  CIRCLE_SHAPE = 31,\n  BILLBOARD = 32,\n\n  ANIMATION = 33,\n  FONT = 34,\n\n  UI_FULLSCREEN_SHAPE = 40, // internal fullscreen scenes\n  UI_BUTTON_SHAPE = 41,\n\n  GLTF_SHAPE = 54,\n  OBJ_SHAPE = 55,\n  AVATAR_SHAPE = 56,\n\n  BASIC_MATERIAL = 64,\n  PBR_MATERIAL = 65,\n\n  HIGHLIGHT_ENTITY = 66,\n\n  /** @deprecated Sound has been deprecataed */\n  SOUND = 67,\n  TEXTURE = 68,\n\n  VIDEO_CLIP = 70,\n  VIDEO_TEXTURE = 71,\n\n  AVATAR_TEXTURE = 72,\n\n  AUDIO_CLIP = 200,\n  AUDIO_SOURCE = 201,\n  AUDIO_STREAM = 202,\n  GIZMOS = 203,\n  SMART_ITEM = 204,\n  AVATAR_MODIFIER_AREA = 205,\n  AVATAR_ATTACH = 206,\n  CAMERA_MODE_AREA = 207,\n\n  // For state sync only\n  NAME = 300,\n  LOCKED_ON_EDIT = 301,\n  VISIBLE_ON_EDIT = 302\n}\n\n/** @public */\nexport enum AvatarModifiers {\n  HIDE_AVATARS = 'HIDE_AVATARS',\n  DISABLE_PASSPORTS = 'DISABLE_PASSPORTS'\n}\n\n/** @public */\nexport type Area = { box: Vector3 }\n\n/**\n * Define an area where avatars can be modified in some way\n * @public\n */\n@Component('engine.avatarModifierArea', CLASS_ID.AVATAR_MODIFIER_AREA)\nexport class AvatarModifierArea extends ObservableComponent {\n  @ObservableComponent.field\n  area!: Area\n\n  @ObservableComponent.field\n  modifiers!: AvatarModifiers[]\n\n  @ObservableComponent.field\n  excludeIds?: string[]\n\n  constructor(args: {\n    area: Area\n    modifiers: AvatarModifiers[]\n    excludeIds?: string[]\n  }) {\n    super()\n    this.area = args.area\n    this.modifiers = args.modifiers\n    this.excludeIds = args.excludeIds\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.transform', CLASS_ID.TRANSFORM)\nexport class Transform extends ObservableComponent {\n  @ObservableComponent.field\n  position!: Vector3\n\n  @ObservableComponent.field\n  rotation!: Quaternion\n\n  @ObservableComponent.field\n  scale!: Vector3\n\n  constructor(args: TransformConstructorArgs = {}) {\n    super()\n    this.position = args.position || Vector3.Zero()\n    this.rotation = args.rotation || Quaternion.Identity\n    this.scale = args.scale || new Vector3(1, 1, 1)\n  }\n\n  /**\n   * @public\n   * The rotation as Euler angles in degrees.\n   */\n  get eulerAngles() {\n    return this.rotation.eulerAngles\n  }\n\n  /**\n   * @public\n   * Rotates the transform so the forward vector points at target's current position.\n   */\n  lookAt(target: Vector3, worldUp: Vector3 = MathTmp.staticUp) {\n    const result = new Matrix()\n    Matrix.LookAtLHToRef(this.position, target, worldUp, result)\n    result.invert()\n    Quaternion.FromRotationMatrixToRef(result, this.rotation)\n    return this\n  }\n\n  /**\n   * @public\n   * Applies a rotation of euler angles around the x, y and z axis.\n   */\n  rotate(axis: Vector3, angle: number) {\n    this.rotation.multiplyInPlace(this.rotation.angleAxis(angle, axis))\n    return this\n  }\n\n  /**\n   * @public\n   * Moves the transform in the direction and distance of translation.\n   */\n  translate(vec: Vector3) {\n    this.position.addInPlace(vec)\n    return this\n  }\n}\n\n/** @public */\nexport enum AttachToAvatarAnchorPointId {\n  Position = 0,\n  NameTag = 1,\n  /** @internal */\n  LeftHand = 2,\n  /** @internal */\n  RightHand = 3\n}\n\n/** @public */\nexport type AttachToAvatarConstructorArgs = {\n  avatarId?: string\n  anchorPointId?: AttachToAvatarAnchorPointId\n}\n\n/**\n * @public\n */\n@Component('engine.transform', CLASS_ID.AVATAR_ATTACH)\nexport class AttachToAvatar extends ObservableComponent {\n  @ObservableComponent.field\n  avatarId!: string\n\n  @ObservableComponent.field\n  anchorPointId!: AttachToAvatarAnchorPointId\n\n  @ObservableComponent.field\n  avatarSceneId!: 'dcl-gs-avatars'\n\n  constructor(args: AttachToAvatarConstructorArgs = {}) {\n    super()\n    this.avatarId = args.avatarId || ''\n    this.anchorPointId =\n      args.anchorPointId || AttachToAvatarAnchorPointId.Position\n  }\n}\n\n/**\n * Billboard defines a behavior that makes the entity face the camera in any moment.\n * @public\n */\n@Component('engine.billboard', CLASS_ID.BILLBOARD)\nexport class Billboard extends ObservableComponent {\n  @ObservableComponent.field\n  x: boolean = true\n\n  @ObservableComponent.field\n  y: boolean = true\n\n  @ObservableComponent.field\n  z: boolean = true\n\n  constructor(x: boolean = true, y: boolean = true, z: boolean = true) {\n    super()\n    this.x = x\n    this.y = y\n    this.z = z\n  }\n}\n\n/**\n * @public\n */\nexport class Shape extends ObservableComponent {\n  /**\n   * Set to true to turn on the collider for the entity.\n   */\n  @ObservableComponent.field\n  withCollisions: boolean = true\n\n  /**\n   * Set to true to turn on the PointerEvents blocking for the entity.\n   */\n  @ObservableComponent.field\n  isPointerBlocker: boolean = true\n\n  /**\n   * Defines if the entity and its children should be rendered\n   */\n  @ObservableComponent.field\n  visible: boolean = true\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.BOX_SHAPE)\nexport class BoxShape extends Shape {\n  /**\n   * Sets the UV coordinates for the box.\n   * Used to map specific pieces of a Material's texture into the box's geometry.\n   */\n  @ObservableComponent.field\n  uvs?: number[]\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.SPHERE_SHAPE)\nexport class SphereShape extends Shape {}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.CIRCLE_SHAPE)\nexport class CircleShape extends Shape {\n  @ObservableComponent.field\n  segments?: number\n\n  @ObservableComponent.field\n  arc?: number\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.PLANE_SHAPE)\nexport class PlaneShape extends Shape {\n  /**\n   * Sets the horizontal length of the plane. Defaults to 1.\n   */\n  @ObservableComponent.field\n  width: number = 1\n\n  /**\n   * Sets the vertical length of the plane. Defaults to 1.\n   */\n  @ObservableComponent.field\n  height: number = 1\n\n  /**\n   * Sets the UV coordinates for the plane.\n   * Used to map specific pieces of a Material's texture into the plane's geometry.\n   */\n  @ObservableComponent.field\n  uvs?: number[]\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.CONE_SHAPE)\nexport class ConeShape extends Shape {\n  /**\n   * The radius of the top of a truncated cone. Defaults to 0.\n   */\n  @ObservableComponent.field\n  radiusTop: number = 0\n\n  /**\n   * The radius of the base of the cone. Defaults to 1.\n   */\n  @ObservableComponent.field\n  radiusBottom: number = 1\n\n  /**\n   * Sets the number of rings along the cone height (positive integer). Defaults to 1.\n   */\n  @ObservableComponent.field\n  segmentsHeight: number = 1\n\n  /**\n   * Sets the number of cone sides (positive integer). Defaults to 36.\n   */\n  @ObservableComponent.field\n  segmentsRadial: number = 36\n\n  /**\n   * Adds two extra faces per subdivision to enclose the cone around its height axis.\n   * Defaults to false.\n   */\n  @ObservableComponent.field\n  openEnded: boolean = false\n\n  /**\n   * Sets the radius of the top and bottom caps at once.\n   *\n   * Properties `radiusTop` and `radiusBottom` are prioritized over this one.\n   */\n  @ObservableComponent.field\n  radius: number | null = null\n\n  /**\n   * Sets the ratio (max 1) to apply to the circumference to slice the cone. Defaults to 360.\n   */\n  @ObservableComponent.field\n  arc: number = 360\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.CYLINDER_SHAPE)\nexport class CylinderShape extends Shape {\n  /**\n   * The radius of the top of the cylinder. Defaults to 0.\n   */\n  @ObservableComponent.field\n  radiusTop: number = 1\n\n  /**\n   * The radius of the base of the cylinder. Defaults to 1.\n   */\n  @ObservableComponent.field\n  radiusBottom: number = 1\n\n  /**\n   * Sets the number of rings along the cylinder height (positive integer). Defaults to 1.\n   */\n  @ObservableComponent.field\n  segmentsHeight: number = 1\n\n  /**\n   * Sets the number of cylinder sides (positive integer). Defaults to 36.\n   */\n  @ObservableComponent.field\n  segmentsRadial: number = 36\n\n  /**\n   * Adds two extra faces per subdivision to enclose the cylinder around its height axis.\n   * Defaults to false.\n   */\n  @ObservableComponent.field\n  openEnded: boolean = false\n\n  /**\n   * Sets the radius of the top and bottom caps at once.\n   *\n   * Properties `radiusTop` and `radiusBottom` are prioritized over this one.\n   */\n  @ObservableComponent.field\n  radius: number | null = null\n\n  /**\n   * Sets the ratio (max 1) to apply to the circumference to slice the cylinder. Defaults to 360.\n   */\n  @ObservableComponent.field\n  arc: number = 360\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.GLTF_SHAPE)\nexport class GLTFShape extends Shape {\n  @Shape.readonly\n  readonly src!: string\n\n  constructor(src: string) {\n    super()\n    this.src = src\n  }\n}\n\n/** @public */\nexport enum PictureFrameStyle {\n  Classic = 0,\n  Baroque_Ornament = 1,\n  Diamond_Ornament = 2,\n  Minimal_Wide = 3,\n  Minimal_Grey = 4,\n  Blocky = 5,\n  Gold_Edges = 6,\n  Gold_Carved = 7,\n  Gold_Wide = 8,\n  Gold_Rounded = 9,\n  Metal_Medium = 10,\n  Metal_Wide = 11,\n  Metal_Slim = 12,\n  Metal_Rounded = 13,\n  Pins = 14,\n  Minimal_Black = 15,\n  Minimal_White = 16,\n  Tape = 17,\n  Wood_Slim = 18,\n  Wood_Wide = 19,\n  Wood_Twigs = 20,\n  Canvas = 21,\n  None = 22\n}\n\n/** @public */\nexport type NFTShapeConstructorArgs = {\n  color?: Color3\n  style?: PictureFrameStyle\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.NFT_SHAPE)\nexport class NFTShape extends Shape {\n  @Shape.readonly\n  readonly src!: string\n\n  @Shape.readonly\n  readonly style!: PictureFrameStyle\n\n  @ObservableComponent.field\n  color: Color3\n\n  constructor(src: string)\n  constructor(src: string, color: Color3) // for backwards compatibility\n  constructor(src: string, args: NFTShapeConstructorArgs)\n  constructor(src: string, args: any = {}) {\n    super()\n    this.src = src\n\n    let color = new Color3(0.6404918, 0.611472, 0.8584906)\n    let style = PictureFrameStyle.Classic\n\n    // check if args is color (backwards compatibility)\n    if ('r' in args) {\n      color = args\n    } else if (args !== null) {\n      if (args.color) color = args.color\n      if (args.style) style = args.style\n    }\n\n    this.color = color\n    this.style = style\n  }\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.texture', CLASS_ID.TEXTURE)\nexport class Texture extends ObservableComponent {\n  @ObservableComponent.readonly\n  readonly src!: string\n\n  /**\n   * Enables crisper images based on the provided sampling mode.\n   * | Value | Type      |\n   * |-------|-----------|\n   * |     0 | NEAREST   |\n   * |     1 | BILINEAR  |\n   * |     2 | TRILINEAR |\n   */\n  @ObservableComponent.readonly\n  readonly samplingMode!: number\n\n  /**\n   * Enables texture wrapping for this material.\n   * | Value | Type      |\n   * |-------|-----------|\n   * |     0 | CLAMP     |\n   * |     1 | WRAP      |\n   * |     2 | MIRROR    |\n   */\n  @ObservableComponent.readonly\n  readonly wrap!: number\n\n  /**\n   * Defines if this texture has an alpha channel\n   */\n  @ObservableComponent.readonly\n  readonly hasAlpha!: boolean\n\n  constructor(\n    src: string,\n    opts?: Partial<Pick<Texture, 'samplingMode' | 'wrap' | 'hasAlpha'>>\n  ) {\n    super()\n\n    const base64Test = new RegExp('data:[a-z-]+/[a-z-]+;base64')\n    if (src.length > 2048 || base64Test.test(src)) {\n      log(\n        ' Base64 textures will be deprecated in version 7 of decentraland-ecs'\n      )\n    }\n\n    this.src = src\n\n    if (opts) {\n      for (const i in opts) {\n        const that = this as any\n        that[i as 'samplingMode' | 'wrap' | 'hasAlpha'] = (opts as any)[i]\n      }\n    }\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.animator', CLASS_ID.ANIMATION)\nexport class Animator extends Shape {\n  @ObservableComponent.readonly\n  private states: AnimationState[] = []\n\n  /**\n   * Adds an AnimationState to the animation lists.\n   */\n  addClip(clip: AnimationState) {\n    this.states.push(clip)\n    clip.onChange(() => {\n      this.dirty = true\n    })\n\n    clip.owner = this\n    return this\n  }\n\n  /**\n   * Gets the animation clip instance for the specified clip name.\n   * If the clip doesn't exist a new one will be created.\n   */\n  getClip(clipName: string): AnimationState {\n    for (let i = 0; i < this.states.length; i++) {\n      const clip = this.states[i]\n      if (clip.clip === clipName) {\n        return clip\n      }\n    }\n\n    const newClip = new AnimationState(clipName)\n    this.addClip(newClip)\n    return newClip\n  }\n\n  /**\n   * Resets and pauses the animation state, if the clip is null it will stop all animations on this animator\n   */\n  stop(clip?: AnimationState) {\n    if (clip) {\n      clip.playing = false\n      clip.shouldReset = true\n    } else {\n      for (let i = 0; i < this.states.length; i++) {\n        const animationState = this.states[i]\n        this.stop(animationState)\n      }\n    }\n  }\n\n  /**\n   * Starts the animation\n   */\n  play(clip: AnimationState, reset: boolean = false) {\n    for (let i = 0; i < this.states.length; i++) {\n      const animationState = this.states[i]\n      if (animationState.layer === clip.layer && clip !== animationState) {\n        this.pause(animationState)\n      }\n    }\n\n    if (reset) clip.shouldReset = true\n    clip.playing = true\n    clip.dirty = true\n    clip.data.nonce = Math.random()\n  }\n\n  /**\n   * Pauses the animation state, if the clip is null it will pause all animations on this animator\n   */\n  pause(clip?: AnimationState) {\n    if (clip) {\n      clip.playing = false\n    } else {\n      for (let i = 0; i < this.states.length; i++) {\n        const animationState = this.states[i]\n        this.pause(animationState)\n      }\n    }\n  }\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.OBJ_SHAPE)\nexport class OBJShape extends Shape {\n  @ObservableComponent.readonly\n  readonly src!: string\n\n  constructor(src: string) {\n    super()\n    this.src = src\n  }\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.font', CLASS_ID.FONT)\nexport class Font extends ObservableComponent {\n  @ObservableComponent.readonly\n  readonly src!: string\n\n  public constructor(src: string = '') {\n    super()\n    this.src = src\n  }\n}\n\n/**\n * @public\n */\nexport enum Fonts {\n  /** @deprecated SanFrancisco has been deprecated. Use SansSerif instead.*/\n  SanFrancisco = 'builtin:SF-UI-Text-Regular SDF',\n  /** @deprecated SanFrancisco_Heavy has been deprecated. Use SansSerif_Heavy instead.*/\n  SanFrancisco_Heavy = 'builtin:SF-UI-Text-Heavy SDF',\n  /** @deprecated SanFrancisco_Semibold has been deprecated. Use SansSerif_SemiBold instead.*/\n  SanFrancisco_Semibold = 'builtin:SF-UI-Text-Semibold SDF',\n  LiberationSans = 'builtin:LiberationSans SDF',\n  SansSerif = 'SansSerif',\n  SansSerif_Heavy = 'SansSerif_Heavy',\n  SansSerif_Bold = 'SansSerif_Bold',\n  SansSerif_SemiBold = 'SansSerif_SemiBold'\n}\n\n/**\n * @public\n */\n@Component('engine.text', CLASS_ID.TEXT_SHAPE)\nexport class TextShape extends ObservableComponent {\n  @ObservableComponent.field\n  outlineWidth: number = 0\n\n  @ObservableComponent.field\n  outlineColor: Color3 = new Color3(1, 1, 1)\n\n  @ObservableComponent.field\n  color: Color3 = new Color3(1, 1, 1)\n\n  @ObservableComponent.field\n  fontSize: number = 10\n\n  @ObservableComponent.component\n  font?: Font\n\n  @ObservableComponent.field\n  opacity: number = 1.0\n\n  @ObservableComponent.field\n  value: string = ''\n\n  @ObservableComponent.field\n  lineSpacing: string = '0px'\n\n  @ObservableComponent.field\n  lineCount: number = 0\n\n  @ObservableComponent.field\n  textWrapping: boolean = false\n\n  @ObservableComponent.field\n  shadowBlur: number = 0\n\n  @ObservableComponent.field\n  shadowOffsetX: number = 0\n\n  @ObservableComponent.field\n  shadowOffsetY: number = 0\n\n  @ObservableComponent.field\n  shadowColor: Color3 = new Color3(1, 1, 1)\n\n  @ObservableComponent.field\n  hTextAlign: string = 'center'\n\n  @ObservableComponent.field\n  vTextAlign: string = 'center'\n\n  @ObservableComponent.field\n  width: number = 1\n\n  @ObservableComponent.field\n  height: number = 1\n\n  @ObservableComponent.field\n  paddingTop: number = 0\n\n  @ObservableComponent.field\n  paddingRight: number = 0\n\n  @ObservableComponent.field\n  paddingBottom: number = 0\n\n  @ObservableComponent.field\n  paddingLeft: number = 0\n\n  @ObservableComponent.field\n  billboard: boolean = false\n\n  @ObservableComponent.field\n  visible: boolean = true\n\n  constructor(value?: string) {\n    super()\n\n    if (value) {\n      this.value = value\n    }\n  }\n}\n\n/**\n * @public\n */\nexport enum TransparencyMode {\n  OPAQUE = 0,\n  ALPHA_TEST = 1,\n  ALPHA_BLEND = 2,\n  ALPHA_TEST_AND_BLEND = 3,\n  AUTO = 4\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.material', CLASS_ID.PBR_MATERIAL)\nexport class Material extends ObservableComponent {\n  /**\n   * Cutoff level for ALPHATEST mode. Range is between 0 and 1.\n   * Defaults to 0.5\n   */\n  @ObservableComponent.field\n  alphaTest?: number = 0.5\n\n  /**\n   * AKA Diffuse Color in other nomenclature.\n   * Defaults to #CCCCCC.\n   */\n  @ObservableComponent.field\n  albedoColor?: Color4 | Color3\n\n  /**\n   * The color emitted from the material.\n   * Defaults to black.\n   */\n  @ObservableComponent.field\n  emissiveColor?: Color3\n\n  /**\n   * Specifies the metallic scalar of the metallic/roughness workflow.\n   * Can also be used to scale the metalness values of the metallic texture.\n   * Defaults to  0.5.\n   */\n  @ObservableComponent.field\n  metallic?: number\n\n  /**\n   * Specifies the roughness scalar of the metallic/roughness workflow.\n   * Can also be used to scale the roughness values of the metallic texture.\n   * Defaults to  0.5.\n   */\n  @ObservableComponent.field\n  roughness?: number\n\n  /**\n   * AKA Specular Color in other nomenclature.\n   * Defaults to white.\n   */\n  @ObservableComponent.field\n  reflectivityColor?: Color3\n\n  /**\n   * Intensity of the direct lights e.g. the four lights available in scene.\n   * This impacts both the direct diffuse and specular highlights.\n   * Defaults to 1.\n   */\n  @ObservableComponent.field\n  directIntensity?: number\n\n  /**\n   * AKA Glossiness in other nomenclature.\n   * Defaults to 1.\n   */\n  @ObservableComponent.field\n  microSurface?: number\n\n  /**\n   * Intensity of the emissive part of the material.\n   * This helps controlling the emissive effect without modifying the emissive color.\n   * Defaults to 1.\n   */\n  @ObservableComponent.field\n  emissiveIntensity?: number\n\n  /**\n   * This is a special control allowing the reduction of the specular highlights coming from the\n   * four lights of the scene. Those highlights may not be needed in full environment lighting.\n   * Defaults to 1.\n   */\n  @ObservableComponent.field\n  specularIntensity?: number\n\n  /**\n   * Texture applied as material.\n   */\n  @ObservableComponent.component\n  albedoTexture?: Texture | VideoTexture | AvatarTexture\n\n  /**\n   * Texture applied as opacity. Default: the same texture used in albedoTexture.\n   */\n  @ObservableComponent.component\n  alphaTexture?: Texture | VideoTexture | AvatarTexture\n\n  /**\n   * Emissive texture.\n   */\n  @ObservableComponent.component\n  emissiveTexture?: Texture | VideoTexture | AvatarTexture\n\n  /**\n   * Stores surface normal data used to displace a mesh in a texture.\n   */\n  @ObservableComponent.component\n  bumpTexture?: Texture | AvatarTexture\n\n  /**\n   * Allow the material to cast shadows over other objects\n   */\n  @ObservableComponent.field\n  castShadows?: boolean = true\n\n  /**\n   * Sets the transparency mode of the material.\n   * Defaults to -1.\n   *\n   * | Value | Type                                           |\n   * | ----- | ---------------------------------------------- |\n   * | 0     | OPAQUE  (default)                              |\n   * | 1     | ALPHATEST                                      |\n   * | 2     | ALPHABLEND                                     |\n   * | 3     | ALPHATESTANDBLEND                              |\n   * | 4     | AUTO (ALPHABLEND if alpha OPAQUE otherwise     |\n   */\n  @ObservableComponent.field\n  transparencyMode: TransparencyMode = TransparencyMode.AUTO\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.material', CLASS_ID.BASIC_MATERIAL)\nexport class BasicMaterial extends ObservableComponent {\n  /**\n   * The source of the texture image.\n   */\n  @ObservableComponent.component\n  texture?: Texture | VideoTexture | AvatarTexture\n\n  /**\n   * A number between 0 and 1.\n   * Any pixel with an alpha lower than this value will be shown as transparent.\n   */\n  @ObservableComponent.field\n  alphaTest: number = 0.5\n\n  /**\n   * Allow the material to cast shadows over other objects\n   */\n  @ObservableComponent.field\n  castShadows?: boolean = true\n}\n\n/**\n * @public\n */\nexport class OnUUIDEvent<T extends keyof IEvents> extends ObservableComponent {\n  // @internal\n  readonly type: string | undefined\n\n  // @internal\n  readonly uuid: string = newId('UUID')\n\n  @ObservableComponent.field\n  callback!: (event: any) => void\n\n  constructor(callback: (event: IEvents[T]) => void) {\n    super()\n\n    if (!callback || !('apply' in callback) || !('call' in callback)) {\n      throw new Error('Callback is not a function')\n    }\n\n    this.callback = callback\n  }\n\n  static uuidEvent(target: ObservableComponent, propertyKey: string) {\n    if (delete (target as any)[propertyKey]) {\n      const componentSymbol = propertyKey + '_' + Math.random()\n      ;(target as any)[componentSymbol] = undefined\n\n      Object.defineProperty(target, componentSymbol, {\n        ...Object.getOwnPropertyDescriptor(target, componentSymbol),\n        enumerable: false\n      })\n\n      Object.defineProperty(target, propertyKey.toString(), {\n        get: function () {\n          return this[componentSymbol]\n        },\n        set: function (value) {\n          const oldValue = this[componentSymbol]\n\n          if (value) {\n            if (value instanceof OnUUIDEvent) {\n              this.data[propertyKey] = value.uuid\n            } else {\n              throw new Error('value is not an OnUUIDEvent')\n            }\n          } else {\n            this.data[propertyKey] = null\n          }\n\n          this[componentSymbol] = value\n\n          if (value !== oldValue) {\n            this.dirty = true\n\n            for (let i = 0; i < this.subscriptions.length; i++) {\n              this.subscriptions[i](propertyKey, value, oldValue)\n            }\n          }\n        },\n        enumerable: true\n      })\n    }\n  }\n\n  toJSON() {\n    return { uuid: this.uuid, type: this.type }\n  }\n}\n\n/**\n * @public\n */\nexport class OnPointerUUIDEvent<\n  T extends keyof IEvents\n> extends OnUUIDEvent<T> {\n  @ObservableComponent.field\n  button: ActionButton = ActionButton.ANY\n\n  @ObservableComponent.field\n  hoverText: string = 'Interact'\n\n  @ObservableComponent.field\n  distance: number = 10\n\n  @ObservableComponent.field\n  showFeedback: boolean = true\n\n  toJSON() {\n    return {\n      uuid: this.uuid,\n      type: this.type,\n      button: this.button,\n      hoverText: this.hoverText,\n      distance: this.distance,\n      showFeedback: this.showFeedback\n    }\n  }\n}\n\n/**\n * @internal\n */\n@Component('engine.onPointerLock', CLASS_ID.UUID_CALLBACK)\nexport class OnPointerLock extends OnUUIDEvent<'onPointerLock'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'onPointerLock'\n}\n\n/**\n * @public\n */\n@Component('engine.onAnimationEnd', CLASS_ID.UUID_CALLBACK)\nexport class OnAnimationEnd extends OnUUIDEvent<'onAnimationEnd'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'onAnimationEnd'\n}\n\n/**\n * @internal\n */\n@Component('engine.smartItem', CLASS_ID.SMART_ITEM)\nexport class SmartItem extends ObservableComponent {}\n\n/**\n * @public\n */\n@DisposableComponent('engine.VideoClip', CLASS_ID.VIDEO_CLIP)\nexport class VideoClip extends ObservableComponent {\n  @ObservableComponent.readonly\n  readonly url: string\n\n  constructor(url: string) {\n    super()\n    this.url = url\n  }\n}\n\n/** @public */\nexport enum VideoStatus {\n  NONE = 0,\n  ERROR = 1,\n  LOADING = 2,\n  READY = 3,\n  PLAYING = 4,\n  BUFFERING = 5\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.VideoTexture', CLASS_ID.VIDEO_TEXTURE)\nexport class VideoTexture extends ObservableComponent {\n  @ObservableComponent.readonly\n  readonly videoClipId: string\n\n  /**\n   * Enables crisper images based on the provided sampling mode.\n   * | Value | Type      |\n   * |-------|-----------|\n   * |     1 | NEAREST   |\n   * |     2 | BILINEAR  |\n   * |     3 | TRILINEAR |\n   */\n  @ObservableComponent.readonly\n  readonly samplingMode!: number\n\n  /**\n   * Enables texture wrapping for this material.\n   * | Value | Type      |\n   * |-------|-----------|\n   * |     1 | CLAMP     |\n   * |     2 | WRAP      |\n   * |     3 | MIRROR    |\n   */\n  @ObservableComponent.readonly\n  readonly wrap!: number\n\n  @ObservableComponent.field\n  volume: number = 1\n\n  @ObservableComponent.field\n  playbackRate: number = 1\n\n  @ObservableComponent.field\n  loop: boolean = false\n\n  @ObservableComponent.field\n  seek: number = -1\n\n  private _position: number = -1\n  private _videoLength: number = -1\n  private _status: VideoStatus = VideoStatus.NONE\n\n  /**\n   * Is this VideoTexture playing?\n   */\n  @ObservableComponent.field\n  playing: boolean = false\n\n  constructor(\n    videoClip: VideoClip,\n    opts?: Partial<Pick<VideoTexture, 'samplingMode' | 'wrap'>>\n  ) {\n    super()\n\n    if (!(videoClip instanceof VideoClip)) {\n      throw new Error(\n        `Trying to create VideoTexture(VideoClip) with an invalid VideoClip`\n      )\n    }\n    this.videoClipId = getComponentId(videoClip as any)\n\n    if (opts) {\n      for (const i in opts) {\n        const that = this as any\n        that[i as 'samplingMode' | 'wrap'] = (opts as any)[i]\n      }\n    }\n  }\n\n  play() {\n    this.playing = true\n  }\n\n  pause() {\n    this.playing = false\n  }\n\n  reset() {\n    this.seekTime(0)\n    this.pause()\n  }\n\n  seekTime(seconds: number) {\n    this.seek = seconds\n    this.dirty = true\n    this.data.nonce = Math.random()\n  }\n\n  toJSON() {\n    if (this.seek >= 0) {\n      // the seek value was changed/used\n      const ret = JSON.parse(JSON.stringify(super.toJSON()))\n      this.seek = -1\n      return ret\n    }\n\n    return super.toJSON()\n  }\n\n  update(videoEvent: IEvents['videoEvent']) {\n    if (videoEvent.videoClipId === this.videoClipId) {\n      this._status = (videoEvent.videoStatus as VideoStatus) || VideoStatus.NONE\n      this._videoLength = videoEvent.totalVideoLength\n      this._position = videoEvent.currentOffset\n    }\n  }\n\n  get position() {\n    return this._position\n  }\n\n  get videoLength() {\n    return this._videoLength\n  }\n\n  get status() {\n    return this._status\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.cameraModeArea', CLASS_ID.CAMERA_MODE_AREA)\nexport class CameraModeArea extends ObservableComponent {\n  @ObservableComponent.field\n  area!: Area\n\n  @ObservableComponent.field\n  cameraMode!: CameraMode\n\n  constructor(args: { area: Area; cameraMode: CameraMode }) {\n    super()\n    this.area = args.area\n    this.cameraMode = args.cameraMode\n  }\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.texture', CLASS_ID.AVATAR_TEXTURE)\nexport class AvatarTexture extends ObservableComponent {\n  @ObservableComponent.readonly\n  readonly userId!: string\n\n  /**\n   * Enables crisper images based on the provided sampling mode.\n   * | Value | Type      |\n   * |-------|-----------|\n   * |     0 | NEAREST   |\n   * |     1 | BILINEAR  |\n   * |     2 | TRILINEAR |\n   */\n  @ObservableComponent.readonly\n  readonly samplingMode!: number\n\n  /**\n   * Enables texture wrapping for this material.\n   * | Value | Type      |\n   * |-------|-----------|\n   * |     0 | CLAMP     |\n   * |     1 | WRAP      |\n   * |     2 | MIRROR    |\n   */\n  @ObservableComponent.readonly\n  readonly wrap!: number\n\n  /**\n   * Defines if this texture has an alpha channel\n   */\n  @ObservableComponent.readonly\n  readonly hasAlpha!: boolean\n\n  constructor(\n    userId: string,\n    opts?: Partial<Pick<AvatarTexture, 'samplingMode' | 'wrap' | 'hasAlpha'>>\n  ) {\n    super()\n\n    this.userId = userId\n\n    if (opts) {\n      for (const i in opts) {\n        const that = this as any\n        that[i as 'samplingMode' | 'wrap' | 'hasAlpha'] = (opts as any)[i]\n      }\n    }\n  }\n}\n","import { Vector3, Matrix } from '@dcl/ecs-math'\n\nimport { RaycastResponse } from './Events'\nimport { uuid, log } from '../ecs/helpers'\n\nimport { Camera } from './Camera'\n\n/**\n * @public\n */\nexport type QueryType =\n  | 'HitFirst'\n  | 'HitAll'\n  | 'HitFirstAvatar'\n  | 'HitAllAvatars'\n\n/**\n * @internal\n */\nenum QueryPrefix {\n  HitFirst = 'rqhf',\n  HitAll = 'rqha'\n}\n\n/**\n * @internal\n */\nexport interface RaycastQuery {\n  queryId: string\n  queryType: QueryType\n  ray: Ray\n}\n\n/**\n * @public\n */\nexport interface RaycastHit {\n  didHit: boolean\n  ray: Ray\n  hitPoint: ReadOnlyVector3\n  hitNormal: ReadOnlyVector3\n}\n\n/**\n * @public\n */\nexport interface Ray {\n  origin: ReadOnlyVector3\n  direction: ReadOnlyVector3\n  distance: number\n}\n\n/**\n * @public\n */\nexport interface HitEntityInfo {\n  isValid: boolean\n  entityId: string\n  meshName: string\n}\n\n/**\n * @public\n */\nexport interface RaycastHitEntity extends RaycastHit {\n  entity: HitEntityInfo\n}\n\n/**\n * @public\n */\nexport interface RaycastHitEntities extends RaycastHit {\n  entities: RaycastHitEntity[]\n}\n\n/**\n * @public\n */\nexport interface BasicAvatarInfo {\n  userId: string\n  name: string\n}\n\n/**\n * @public\n */\nexport interface RaycastHitAvatar extends RaycastHit {\n  avatar: BasicAvatarInfo\n}\n\n/**\n * @public\n */\nexport interface RaycastHitAvatars extends RaycastHit {\n  avatars: BasicAvatarInfo[]\n}\n\n/**\n * @public\n */\nexport interface IPhysicsCast {\n  hitFirst(\n    ray: Ray,\n    hitCallback: (event: RaycastHitEntity) => void,\n    id?: number\n  ): void\n  hitAll(\n    ray: Ray,\n    hitCallback: (event: RaycastHitEntities) => void,\n    id?: number\n  ): void\n  /** @internal */\n  hitFirstAvatar(ray: Ray, hitCallback: (event: RaycastHitAvatar) => void): void\n  /** @internal */\n  hitAllAvatars(ray: Ray, hitCallback: (event: RaycastHitAvatars) => void): void\n}\n\n/**\n * @public\n */\nexport class PhysicsCast implements IPhysicsCast {\n  private static _instance: PhysicsCast\n  private queries: Record<string, (event: RaycastHit) => void> = {}\n\n  private constructor() {}\n\n  public static get instance(): PhysicsCast {\n    PhysicsCast.ensureInstance()\n    return PhysicsCast._instance\n  }\n\n  static ensureInstance(): any {\n    if (!PhysicsCast._instance) {\n      PhysicsCast._instance = new PhysicsCast()\n    }\n  }\n\n  public getRayFromCamera(distance: number) {\n    const rotation = Camera.instance.rotation\n    const rotationMat: Matrix = Matrix.Identity()\n    rotation.toRotationMatrix(rotationMat)\n    const direction = Vector3.TransformCoordinates(\n      Vector3.Forward(),\n      rotationMat\n    )\n\n    const ray: Ray = {\n      origin: Camera.instance.position,\n      direction: direction,\n      distance: distance\n    }\n\n    return ray\n  }\n\n  public getRayFromPositions(from: Vector3, to: Vector3) {\n    const direction = to.subtract(from)\n    const length = direction.length()\n\n    const ray: Ray = {\n      origin: from,\n      direction: direction.normalize(),\n      distance: length\n    }\n\n    return ray\n  }\n\n  public hitFirst(\n    ray: Ray,\n    hitCallback: (event: RaycastHitEntity) => void,\n    id?: number\n  ) {\n    const queryId = typeof id === 'number' ? QueryPrefix.HitFirst + id : uuid()\n\n    this.queries[queryId] = hitCallback as (event: RaycastHit) => void\n\n    if (typeof dcl !== 'undefined') {\n      dcl.query('raycast', { queryId, queryType: 'HitFirst', ray })\n    }\n  }\n\n  public hitAll(\n    ray: Ray,\n    hitCallback: (event: RaycastHitEntities) => void,\n    id?: number\n  ) {\n    const queryId = typeof id === 'number' ? QueryPrefix.HitAll + id : uuid()\n\n    this.queries[queryId] = hitCallback as (event: RaycastHit) => void\n\n    if (typeof dcl !== 'undefined') {\n      dcl.query('raycast', { queryId, queryType: 'HitAll', ray })\n    }\n  }\n\n  public hitFirstAvatar(\n    _ray: Ray,\n    _hitCallback: (event: RaycastHitAvatar) => void\n  ) {\n    log('not implemented yet')\n  }\n\n  public hitAllAvatars(\n    _ray: Ray,\n    _hitCallback: (event: RaycastHitAvatars) => void\n  ) {\n    log('not implemented yet')\n  }\n\n  public handleRaycastHitFirstResponse(\n    response: RaycastResponse<RaycastHitEntity>\n  ) {\n    this.queries[response.payload.queryId](response.payload.payload)\n    delete this.queries[response.payload.queryId]\n  }\n\n  public handleRaycastHitAllResponse(\n    response: RaycastResponse<RaycastHitEntities>\n  ) {\n    this.queries[response.payload.queryId](response.payload.payload)\n    delete this.queries[response.payload.queryId]\n  }\n}\n","import { Vector3, Quaternion } from '@dcl/ecs-math'\n\nimport { CameraMode } from './Types'\n\n/**\n * @public\n */\nexport class Camera {\n  // @internal\n  private static _instance: Camera\n\n  static get instance(): Camera {\n    if (!Camera._instance) {\n      Camera._instance = new Camera()\n    }\n    return Camera._instance\n  }\n\n  /** Camera position, relative to the parcel. */\n  public readonly position: Vector3 = new Vector3()\n  /** Camera rotation */\n  public readonly rotation: Quaternion = new Quaternion()\n\n  /** Feet position, relative to the parcel.  */\n  public readonly feetPosition: Vector3 = new Vector3()\n  /** Camera position, absolute. */\n  public readonly worldPosition: Vector3 = new Vector3()\n\n  /** Player height. */\n  get playerHeight(): number {\n    return this._playerHeight\n  }\n\n  /** @deprecated Use onCameraModeChangedObservable Observable instead. */\n  get cameraMode(): CameraMode {\n    return this._cameraMode\n  }\n\n  // @internal\n  private lastEventPosition: ReadOnlyVector3 = { x: 0, y: 0, z: 0 }\n  // @internal\n  private lastEventWorldPosition: ReadOnlyVector3 = { x: 0, y: 0, z: 0 }\n\n  // @internal\n  private lastEventRotation: ReadOnlyQuaternion = { x: 0, y: 0, z: 0, w: 1.0 }\n\n  // @internal\n  private _playerHeight: number = 1.6\n  // @internal\n  private _cameraMode: CameraMode = CameraMode.ThirdPerson\n\n  constructor() {\n    if (typeof dcl !== 'undefined') {\n      dcl.subscribe('positionChanged')\n      dcl.subscribe('rotationChanged')\n      dcl.subscribe('cameraModeChanged')\n\n      dcl.onEvent((event) => {\n        switch (event.type) {\n          case 'positionChanged':\n            this.positionChanged(event.data as any)\n            break\n          case 'rotationChanged':\n            this.rotationChanged(event.data as any)\n            break\n          case 'cameraModeChanged':\n            this.cameraModeChanged(event.data as any)\n            break\n        }\n      })\n    }\n\n    Object.defineProperty(this.position, 'x', {\n      get: () => this.lastEventPosition.x\n    })\n\n    Object.defineProperty(this.position, 'y', {\n      get: () => this.lastEventPosition.y\n    })\n\n    Object.defineProperty(this.position, 'z', {\n      get: () => this.lastEventPosition.z\n    })\n\n    Object.defineProperty(this.worldPosition, 'x', {\n      get: () => this.lastEventWorldPosition.x\n    })\n\n    Object.defineProperty(this.worldPosition, 'y', {\n      get: () => this.lastEventWorldPosition.y\n    })\n\n    Object.defineProperty(this.worldPosition, 'z', {\n      get: () => this.lastEventWorldPosition.z\n    })\n\n    Object.defineProperty(this.feetPosition, 'x', {\n      get: () => this.lastEventPosition.x\n    })\n\n    Object.defineProperty(this.feetPosition, 'y', {\n      get: () => this.lastEventPosition.y - this.playerHeight\n    })\n\n    Object.defineProperty(this.feetPosition, 'z', {\n      get: () => this.lastEventPosition.z\n    })\n\n    Object.defineProperty(this.rotation, 'x', {\n      get: () => this.lastEventRotation.x\n    })\n\n    Object.defineProperty(this.rotation, 'y', {\n      get: () => this.lastEventRotation.y\n    })\n\n    Object.defineProperty(this.rotation, 'z', {\n      get: () => this.lastEventRotation.z\n    })\n\n    Object.defineProperty(this.rotation, 'w', {\n      get: () => this.lastEventRotation.w\n    })\n  }\n\n  // @internal\n  private positionChanged(e: IEvents['positionChanged']) {\n    this.lastEventPosition = e.position\n    this.lastEventWorldPosition = e.cameraPosition\n    this._playerHeight = e.playerHeight\n  }\n\n  // @internal\n  private rotationChanged(e: IEvents['rotationChanged']) {\n    this.lastEventRotation = e.quaternion\n  }\n\n  // @internal\n  private cameraModeChanged(e: IEvents['cameraModeChanged']) {\n    this._cameraMode = e.cameraMode\n  }\n}\n","import { Component, ObservableComponent } from '../ecs/Component'\nimport { CLASS_ID, OnUUIDEvent } from './Components'\n\n/**\n * Gizmo identifiers\n * @public\n */\nexport enum Gizmo {\n  MOVE = 'MOVE',\n  ROTATE = 'ROTATE',\n  SCALE = 'SCALE',\n  NONE = 'NONE'\n}\n\n/**\n * This event is triggered after the user finalizes dragging a gizmo.\n * @public\n */\n@Component('engine.gizmoEvent', CLASS_ID.UUID_CALLBACK)\nexport class OnGizmoEvent extends OnUUIDEvent<'gizmoEvent'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'gizmoEvent'\n}\n\n/**\n * Enables gizmos in the entity. Gizmos only work in EDITOR, PREVIEW or DEBUG modes.\n * @public\n */\n@Component('engine.gizmos', CLASS_ID.GIZMOS)\nexport class Gizmos extends ObservableComponent {\n  /**\n   * Enable position gizmo\n   */\n  @ObservableComponent.field\n  position: boolean = true\n\n  /**\n   * Enable rotation gizmo\n   */\n  @ObservableComponent.field\n  rotation: boolean = true\n\n  /**\n   * Enable scale gizmo\n   */\n  @ObservableComponent.field\n  scale: boolean = true\n\n  /**\n   * Cycle through gizmos using click.\n   */\n  @ObservableComponent.field\n  cycle: boolean = true\n\n  /**\n   * If cycle is false, this will be the selected gizmo\n   */\n  @ObservableComponent.field\n  selectedGizmo?: Gizmo\n\n  /**\n   * Align the gizmos to match the local reference system\n   */\n  @ObservableComponent.field\n  localReference: boolean = false\n}\n","import { Engine } from '../ecs/Engine'\nimport { UUIDEvent, PointerEvent, RaycastResponse } from './Events'\nimport { OnUUIDEvent } from './Components'\nimport {\n  ISystem,\n  ComponentAdded,\n  ComponentRemoved,\n  IEntity\n} from '../ecs/IEntity'\nimport { Input } from './Input'\nimport {\n  PhysicsCast,\n  RaycastHitEntity,\n  RaycastHitEntities\n} from './PhysicsCast'\n\n/**\n * @public\n */\nexport class RaycastEventSystem implements ISystem {\n  activate(engine: Engine) {\n    engine.eventManager.addListener(RaycastResponse, this, (event) => {\n      if (event.payload.queryType === 'HitFirst') {\n        PhysicsCast.instance.handleRaycastHitFirstResponse(\n          event as RaycastResponse<RaycastHitEntity>\n        )\n      } else if (event.payload.queryType === 'HitAll') {\n        PhysicsCast.instance.handleRaycastHitAllResponse(\n          event as RaycastResponse<RaycastHitEntities>\n        )\n      }\n    })\n\n    if (typeof dcl !== 'undefined') {\n      dcl.subscribe('raycastResponse')\n    }\n  }\n\n  deactivate() {\n    if (typeof dcl !== 'undefined') {\n      dcl.unsubscribe('raycastResponse')\n    }\n  }\n}\n\n/**\n * @public\n */\nexport class PointerEventSystem implements ISystem {\n  activate(engine: Engine) {\n    engine.eventManager.addListener(PointerEvent, this, (event) => {\n      Input.instance.handlePointerEvent(event.payload as GlobalInputEventResult)\n    })\n\n    if (typeof dcl !== 'undefined') {\n      dcl.subscribe('pointerUp')\n      dcl.subscribe('pointerDown')\n      dcl.subscribe('actionButtonEvent')\n    }\n  }\n\n  deactivate() {\n    if (typeof dcl !== 'undefined') {\n      dcl.unsubscribe('pointerUp')\n      dcl.unsubscribe('pointerDown')\n      dcl.unsubscribe('actionButtonEvent')\n    }\n  }\n}\n\n/**\n * @public\n */\nexport class UUIDEventSystem implements ISystem {\n  handlerMap: { [uuid: string]: OnUUIDEvent<any> } = {}\n\n  activate(engine: Engine) {\n    engine.eventManager.addListener(UUIDEvent, this, this.handleEvent)\n    engine.eventManager.addListener(ComponentAdded, this, this.componentAdded)\n    engine.eventManager.addListener(\n      ComponentRemoved,\n      this,\n      this.componentRemoved\n    )\n\n    if (typeof dcl !== 'undefined') {\n      dcl.subscribe('uuidEvent')\n    }\n  }\n\n  deactivate() {\n    if (typeof dcl !== 'undefined') {\n      dcl.unsubscribe('uuidEvent')\n    }\n  }\n\n  onAddEntity(entity: IEntity) {\n    for (const componentName in entity.components) {\n      const component = entity.components[componentName]\n\n      if (component instanceof OnUUIDEvent) {\n        this.handlerMap[component.uuid] = component\n      }\n    }\n  }\n\n  onRemoveEntity(entity: IEntity) {\n    for (const componentName in entity.components) {\n      const component = entity.components[componentName]\n\n      if (component instanceof OnUUIDEvent) {\n        delete this.handlerMap[component.uuid]\n      }\n    }\n  }\n\n  private componentAdded(event: ComponentAdded) {\n    if (event.entity.isAddedToEngine()) {\n      const component = event.entity.components[event.componentName]\n\n      if (component instanceof OnUUIDEvent) {\n        this.handlerMap[component.uuid] = component\n      }\n    }\n  }\n\n  private componentRemoved(event: ComponentRemoved) {\n    if (event.entity.isAddedToEngine()) {\n      if (event.component instanceof OnUUIDEvent) {\n        delete this.handlerMap[event.component.uuid]\n      }\n    }\n  }\n\n  private handleEvent(event: UUIDEvent): void {\n    if (event.uuid in this.handlerMap) {\n      const handler = this.handlerMap[event.uuid]\n      if (handler) {\n        if (handler.callback && 'call' in handler.callback) {\n          handler.callback(event.payload)\n        }\n      }\n    }\n  }\n}\n\n/** @internal */\nexport const raycastEventSystem = new RaycastEventSystem()\n\n/** @internal */\nexport const pointerEventSystem = new PointerEventSystem()\n\n/** @internal */\nexport const uuidEventSystem = new UUIDEventSystem()\n","import {\n  DisposableComponent,\n  ObservableComponent,\n  Component,\n  getComponentId\n} from '../ecs/Component'\nimport { CLASS_ID } from './Components'\n\n/**\n * @public\n */\n@DisposableComponent('engine.AudioClip', CLASS_ID.AUDIO_CLIP)\nexport class AudioClip extends ObservableComponent {\n  @ObservableComponent.readonly\n  readonly url: string\n\n  /**\n   * Is this clip looping by default?\n   */\n  @ObservableComponent.field\n  loop: boolean = false\n\n  // @internal\n  @ObservableComponent.field\n  loadingCompleteEventId?: string\n\n  /**\n   * Clip's master volume. This volume affects all the AudioSources.\n   * Valid ranges from 0 to 1\n   */\n  @ObservableComponent.field\n  volume: number = 1\n\n  constructor(url: string) {\n    super()\n    this.url = url\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.AudioSource', CLASS_ID.AUDIO_SOURCE)\nexport class AudioSource extends ObservableComponent {\n  @ObservableComponent.readonly\n  readonly audioClipId: string\n\n  /**\n   * Is this clip looping by default?\n   */\n  @ObservableComponent.field\n  loop: boolean = false\n\n  /**\n   * Clip's master volume. This volume affects all the AudioSources.\n   * Valid ranges from 0 to 1\n   */\n  @ObservableComponent.field\n  volume: number = 1\n\n  /**\n   * Is this AudioSource playing?\n   */\n  @ObservableComponent.field\n  playing: boolean = false\n\n  /**\n   * Pitch, default: 1.0, range from 0.0 to MaxFloat\n   */\n  @ObservableComponent.field\n  pitch: number = 1.0\n\n  /**\n   * Timestamp of when the playOnce was executed to see if we need to start over the audio\n   */\n  @ObservableComponent.field\n  playedAtTimestamp: number = Date.now()\n\n  constructor(public readonly audioClip: AudioClip) {\n    super()\n    if (!(audioClip instanceof AudioClip)) {\n      throw new Error(\n        `Trying to create AudioSource(AudioClip) with an invalid AudioClip`\n      )\n    }\n    this.audioClipId = getComponentId(audioClip as any)\n  }\n\n  /**\n   * Disables the looping and plays the current source once.\n   * If the sound was playing, it stops and starts over.\n   */\n  playOnce() {\n    this.playing = true\n    this.dirty = true\n    this.playedAtTimestamp = Date.now()\n    this.data.nonce = Math.random()\n    return this\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.AudioStream', CLASS_ID.AUDIO_STREAM)\nexport class AudioStream extends ObservableComponent {\n  @ObservableComponent.readonly\n  readonly url: string\n\n  @ObservableComponent.field\n  playing: boolean = false\n\n  @ObservableComponent.field\n  volume: number = 1\n\n  constructor(url: string) {\n    super()\n    this.url = url\n    this.playing = true\n  }\n}\n","import { Color4 } from '@dcl/ecs-math'\nimport {\n  ObservableComponent,\n  DisposableComponent,\n  getComponentId\n} from '../ecs/Component'\nimport {\n  CLASS_ID,\n  OnUUIDEvent,\n  Texture,\n  AvatarTexture,\n  Font\n} from './Components'\nimport { OnTextSubmit, OnBlur, OnChanged, OnClick, OnFocus } from './UIEvents'\n/**\n * @public\n */\nexport abstract class UIShape extends ObservableComponent {\n  /**\n   * Defines if the entity and its children should be rendered\n   */\n  @ObservableComponent.field\n  name: string | null = null\n\n  @ObservableComponent.field\n  visible: boolean = true\n\n  @ObservableComponent.field\n  opacity: number = 1\n\n  @ObservableComponent.field\n  hAlign: string = 'center'\n\n  @ObservableComponent.field\n  vAlign: string = 'center'\n\n  @ObservableComponent.uiValue\n  width: string | number = '100px'\n\n  @ObservableComponent.uiValue\n  height: string | number = '50px'\n\n  @ObservableComponent.uiValue\n  positionX: string | number = '0px'\n\n  @ObservableComponent.uiValue\n  positionY: string | number = '0px'\n\n  @ObservableComponent.field\n  isPointerBlocker: boolean = true\n\n  private _parent?: UIShape\n\n  constructor(parent: UIShape | null) {\n    super()\n    if (parent) {\n      this._parent = parent\n      this.data.parentComponent = getComponentId(parent as any)\n    }\n  }\n\n  get parent() {\n    return this._parent\n  }\n\n  // @internal\n  get parentComponent(): string | undefined {\n    return this.data.parentComponent\n  }\n}\n\n/**\n * @internal\n * NOTE(Brian): this should be deprecated\n */\n@DisposableComponent('engine.shape', CLASS_ID.UI_FULLSCREEN_SHAPE)\nexport class UIFullScreen extends UIShape {\n  constructor() {\n    super(null)\n  }\n}\n\n/**\n * @internal\n * NOTE(Brian): this should be deprecated\n */\n@DisposableComponent('engine.shape', CLASS_ID.UI_WORLD_SPACE_SHAPE)\nexport class UIWorldSpace extends UIShape {\n  constructor() {\n    super(null)\n  }\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.UI_SCREEN_SPACE_SHAPE)\nexport class UICanvas extends UIShape {\n  constructor() {\n    super(null)\n  }\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.UI_CONTAINER_RECT)\nexport class UIContainerRect extends UIShape {\n  @ObservableComponent.field\n  thickness: number = 0\n\n  @ObservableComponent.field\n  color: Color4 = Color4.Clear()\n\n  @ObservableComponent.field\n  alignmentUsesSize: boolean = true\n}\n\n/**\n * @public\n */\nexport enum UIStackOrientation {\n  VERTICAL,\n  HORIZONTAL\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.UI_CONTAINER_STACK)\nexport class UIContainerStack extends UIShape {\n  @ObservableComponent.field\n  adaptWidth: boolean = true\n\n  @ObservableComponent.field\n  adaptHeight: boolean = true\n\n  @ObservableComponent.field\n  color: Color4 = Color4.Clear()\n\n  @ObservableComponent.field\n  stackOrientation: UIStackOrientation = UIStackOrientation.VERTICAL\n\n  @ObservableComponent.field\n  spacing: number = 0\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.UI_BUTTON_SHAPE)\nexport class UIButton extends UIShape {\n  @ObservableComponent.field\n  fontSize: number = 10\n\n  @ObservableComponent.field\n  fontWeight: string = 'normal'\n\n  @ObservableComponent.field\n  thickness: number = 0\n\n  @ObservableComponent.field\n  cornerRadius: number = 0\n\n  @ObservableComponent.field\n  color: Color4 = Color4.White()\n\n  @ObservableComponent.field\n  background: Color4 = Color4.White()\n\n  @ObservableComponent.field\n  paddingTop: number = 0\n\n  @ObservableComponent.field\n  paddingRight: number = 0\n\n  @ObservableComponent.field\n  paddingBottom: number = 0\n\n  @ObservableComponent.field\n  paddingLeft: number = 0\n\n  @ObservableComponent.field\n  shadowBlur: number = 0\n\n  @ObservableComponent.field\n  shadowOffsetX: number = 0\n\n  @ObservableComponent.field\n  shadowOffsetY: number = 0\n\n  @ObservableComponent.field\n  shadowColor: Color4 = Color4.Black()\n\n  @ObservableComponent.field\n  text: string = 'button'\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.UI_TEXT_SHAPE)\nexport class UIText extends UIShape {\n  @ObservableComponent.field\n  outlineWidth: number = 0\n\n  @ObservableComponent.field\n  outlineColor: Color4 = Color4.White()\n\n  @ObservableComponent.field\n  color: Color4 = Color4.White()\n\n  @ObservableComponent.field\n  fontSize: number = 10\n\n  @ObservableComponent.field\n  fontAutoSize: boolean = false\n\n  @ObservableComponent.component\n  font?: Font\n\n  @ObservableComponent.field\n  value: string = ''\n\n  @ObservableComponent.field\n  lineSpacing: number = 0\n\n  @ObservableComponent.field\n  lineCount: number = 0\n\n  @ObservableComponent.field\n  adaptWidth: boolean = false\n\n  @ObservableComponent.field\n  adaptHeight: boolean = false\n\n  @ObservableComponent.field\n  textWrapping: boolean = false\n\n  @ObservableComponent.field\n  shadowBlur: number = 0\n\n  @ObservableComponent.field\n  shadowOffsetX: number = 0\n\n  @ObservableComponent.field\n  shadowOffsetY: number = 0\n\n  @ObservableComponent.field\n  shadowColor: Color4 = Color4.Black()\n\n  @ObservableComponent.field\n  hTextAlign: string = 'left'\n\n  @ObservableComponent.field\n  vTextAlign: string = 'bottom'\n\n  @ObservableComponent.field\n  paddingTop: number = 0\n\n  @ObservableComponent.field\n  paddingRight: number = 0\n\n  @ObservableComponent.field\n  paddingBottom: number = 0\n\n  @ObservableComponent.field\n  paddingLeft: number = 0\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.UI_INPUT_TEXT_SHAPE)\nexport class UIInputText extends UIShape {\n  @ObservableComponent.field\n  outlineWidth: number = 0\n\n  @ObservableComponent.field\n  outlineColor: Color4 = Color4.Black()\n\n  @ObservableComponent.field\n  color: Color4 = Color4.Clear()\n\n  @ObservableComponent.field\n  fontSize: number = 10\n\n  @ObservableComponent.component\n  font?: Font\n\n  @ObservableComponent.field\n  value: string = ''\n\n  @ObservableComponent.field\n  placeholder: string = ''\n\n  @ObservableComponent.field\n  margin: number = 10\n\n  @ObservableComponent.field\n  hTextAlign: string = 'left'\n\n  @ObservableComponent.field\n  vTextAlign: string = 'bottom'\n\n  @ObservableComponent.field\n  focusedBackground: Color4 = Color4.Black()\n\n  @ObservableComponent.field\n  textWrapping: boolean = false\n\n  @ObservableComponent.field\n  shadowBlur: number = 0\n\n  @ObservableComponent.field\n  shadowOffsetX: number = 0\n\n  @ObservableComponent.field\n  shadowOffsetY: number = 0\n\n  @ObservableComponent.field\n  shadowColor: Color4 = Color4.White()\n\n  @ObservableComponent.field\n  paddingTop: number = 0\n\n  @ObservableComponent.field\n  paddingRight: number = 0\n\n  @ObservableComponent.field\n  paddingBottom: number = 0\n\n  @ObservableComponent.field\n  paddingLeft: number = 0\n\n  onTextSubmit: OnTextSubmit | null = null\n\n  onChanged: OnChanged | null = null\n\n  // @internal\n  @OnUUIDEvent.uuidEvent\n  protected readonly onTextChanged: OnChanged\n\n  @OnUUIDEvent.uuidEvent\n  onFocus: OnFocus | null = null\n\n  @OnUUIDEvent.uuidEvent\n  onBlur: OnBlur | null = null\n\n  constructor(parent: UIShape | null) {\n    super(parent)\n    this.onTextChanged = new OnChanged((e) => {\n      const { value, isSubmit } = e.value\n\n      // NOTE: here we want to keep the same `dirty` state as before changing `this.value`\n      // because changing `this.value` will set the component as `dirty` and send a message to the renderer with it value\n      // and that message is unnecesary (if the only thing that have changed is `this.value`) since that new value has come from the renderer itself\n      const isDirty = this.dirty\n      this.value = value\n      this.dirty = isDirty\n\n      if (isSubmit && this.onTextSubmit) {\n        const onSubmitValue: IEvents['onTextSubmit'] = { text: value }\n        this.onTextSubmit.callback(onSubmitValue)\n      } else if (!isSubmit && this.onChanged) {\n        const onChangeValue: IEvents['onChange'] = {\n          value,\n          pointerId: e.pointerId\n        }\n        this.onChanged.callback(onChangeValue)\n      }\n    })\n  }\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.UI_IMAGE_SHAPE)\nexport class UIImage extends UIShape {\n  @ObservableComponent.field\n  sourceLeft: number = 0\n\n  @ObservableComponent.field\n  sourceTop: number = 0\n\n  @ObservableComponent.field\n  sourceWidth: number = 1\n\n  @ObservableComponent.field\n  sourceHeight: number = 1\n\n  @ObservableComponent.component\n  source?: Texture | AvatarTexture\n\n  @ObservableComponent.field\n  paddingTop: number = 0\n\n  @ObservableComponent.field\n  paddingRight: number = 0\n\n  @ObservableComponent.field\n  paddingBottom: number = 0\n\n  @ObservableComponent.field\n  paddingLeft: number = 0\n\n  @ObservableComponent.field\n  sizeInPixels: boolean = true\n\n  @OnUUIDEvent.uuidEvent\n  onClick: OnClick | null = null\n\n  constructor(parent: UIShape, source: Texture | AvatarTexture) {\n    super(parent)\n    this.source = source\n  }\n}\n\n/**\n * @public\n */\n@DisposableComponent('engine.shape', CLASS_ID.UI_SLIDER_SHAPE)\nexport class UIScrollRect extends UIShape {\n  @ObservableComponent.field\n  valueX: number = 0\n\n  @ObservableComponent.field\n  valueY: number = 0\n\n  @ObservableComponent.field\n  backgroundColor: Color4 = Color4.Clear()\n\n  @ObservableComponent.field\n  isHorizontal: boolean = false\n\n  @ObservableComponent.field\n  isVertical: boolean = false\n\n  @ObservableComponent.field\n  paddingTop: number = 0\n\n  @ObservableComponent.field\n  paddingRight: number = 0\n\n  @ObservableComponent.field\n  paddingBottom: number = 0\n\n  @ObservableComponent.field\n  paddingLeft: number = 0\n\n  @OnUUIDEvent.uuidEvent\n  onChanged: OnChanged | null = null\n}\n","import { Component, ObservableComponent } from '../ecs/Component'\nimport { uuidEventSystem } from './Systems'\nimport { CLASS_ID, OnUUIDEvent, OnPointerUUIDEvent } from './Components'\nimport { ActionButton } from './Input'\n\n/**\n * @public\n */\n@Component('engine.onFocus', CLASS_ID.UUID_CALLBACK)\nexport class OnFocus extends OnUUIDEvent<'onFocus'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'onFocus'\n  constructor(callback: (event: IEvents['onFocus']) => void) {\n    super(callback)\n    // This injection is necessary ONLY in events that are ALWAYS turned on and are\n    // not assignable to entities. Like events for the UI elements\n\n    // TODO(Brian): This will be removed when UI gets back to the entity parenting.\n    uuidEventSystem.handlerMap[this.uuid] = this\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.onTextSubmit', CLASS_ID.UUID_CALLBACK)\nexport class OnTextSubmit extends OnUUIDEvent<'onTextSubmit'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'onTextSubmit'\n  constructor(callback: (event: IEvents['onTextSubmit']) => void) {\n    super(callback)\n    // This injection is necessary ONLY in events that are ALWAYS turned on and are\n    // not assignable to entities. Like events for the UI elements\n\n    // TODO(Brian): This will be removed when UI gets back to the entity parenting.\n    uuidEventSystem.handlerMap[this.uuid] = this\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.onBlur', CLASS_ID.UUID_CALLBACK)\nexport class OnBlur extends OnUUIDEvent<'onBlur'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'onBlur'\n  constructor(callback: (event: IEvents['onBlur']) => void) {\n    super(callback)\n    // This injection is necessary ONLY in events that are ALWAYS turned on and are\n    // not assignable to entities. Like events for the UI elements\n\n    // TODO(Brian): This will be removed when UI gets back to the entity parenting.\n    uuidEventSystem.handlerMap[this.uuid] = this\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.onEnter', CLASS_ID.UUID_CALLBACK)\nexport class OnEnter extends OnUUIDEvent<'onEnter'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'onEnter'\n  constructor(callback: (event: IEvents['onEnter']) => void) {\n    super(callback)\n    // This injection is necessary ONLY in events that are ALWAYS turned on and are\n    // not assignable to entities. Like events for the UI elements\n\n    // TODO(Brian): This will be removed when UI gets back to the entity parenting.\n    uuidEventSystem.handlerMap[this.uuid] = this\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.onChange', CLASS_ID.UUID_CALLBACK)\nexport class OnChanged extends OnUUIDEvent<'onChange'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'onChange'\n  constructor(callback: (event: IEvents['onChange']) => void) {\n    super(callback)\n    // This injection is necessary ONLY in events that are ALWAYS turned on and are\n    // not assignable to entities. Like events for the UI elements\n\n    // TODO(Brian): This will be removed when UI gets back to the entity parenting.\n    uuidEventSystem.handlerMap[this.uuid] = this\n  }\n}\n\n/**\n * @public\n */\nexport type OnPointerUUIDEventOptions = {\n  button?: ActionButton\n  hoverText?: string\n  showFeedback?: boolean\n  distance?: number\n}\n\n/**\n * @public @deprecated use `OnPointerDown` instead\n */\n@Component('engine.onClick', CLASS_ID.UUID_CALLBACK)\nexport class OnClick extends OnPointerUUIDEvent<'onClick'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'onClick'\n\n  constructor(callback: (event: IEvents['onClick']) => void)\n  constructor(\n    callback: (event: IEvents['onClick']) => void,\n    options: OnPointerUUIDEventOptions\n  )\n  constructor(callback: (event: IEvents['onClick']) => void, options?: any) {\n    super(callback)\n    // This injection is necessary ONLY in events that are ALWAYS turned on and are\n    // not assignable to entities. Like events for the UI elements\n\n    // TODO(Brian): This will be removed when UI gets back to the entity parenting.\n    uuidEventSystem.handlerMap[this.uuid] = this\n\n    if (options) {\n      this.showFeedback = !(options.showFeedback === false)\n\n      if (options.button) {\n        this.button = options.button\n      }\n\n      if (options.hoverText) {\n        this.hoverText = options.hoverText\n      }\n\n      if (options.distance) {\n        this.distance = options.distance\n      }\n    }\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.pointerDown', CLASS_ID.UUID_CALLBACK)\nexport class OnPointerDown extends OnPointerUUIDEvent<'pointerDown'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'pointerDown'\n\n  constructor(callback: (event: IEvents['pointerDown']) => void)\n  constructor(\n    callback: (event: IEvents['pointerDown']) => void,\n    options: OnPointerUUIDEventOptions\n  )\n  constructor(\n    callback: (event: IEvents['pointerDown']) => void,\n    options?: any\n  ) {\n    super(callback)\n    // This injection is necessary ONLY in events that are ALWAYS turned on and are\n    // not assignable to entities. Like events for the UI elements\n\n    // TODO(Brian): This will be removed when UI gets back to the entity parenting.\n    uuidEventSystem.handlerMap[this.uuid] = this\n\n    if (options) {\n      this.showFeedback = !(options.showFeedback === false)\n\n      if (options.button) {\n        this.button = options.button\n      }\n\n      if (options.hoverText) {\n        this.hoverText = options.hoverText\n      }\n\n      if (options.distance) {\n        this.distance = options.distance\n      }\n    }\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.pointerUp', CLASS_ID.UUID_CALLBACK)\nexport class OnPointerUp extends OnPointerUUIDEvent<'pointerUp'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'pointerUp'\n\n  constructor(callback: (event: IEvents['pointerUp']) => void)\n  constructor(\n    callback: (event: IEvents['pointerUp']) => void,\n    options: OnPointerUUIDEventOptions\n  )\n  constructor(callback: (event: IEvents['pointerUp']) => void, options?: any) {\n    super(callback)\n    // This injection is necessary ONLY in events that are ALWAYS turned on and are\n    // not assignable to entities. Like events for the UI elements\n\n    // TODO(Brian): This will be removed when UI gets back to the entity parenting.\n    uuidEventSystem.handlerMap[this.uuid] = this\n\n    if (options) {\n      this.showFeedback = !(options.showFeedback === false)\n\n      if (options.button) {\n        this.button = options.button\n      }\n\n      if (options.hoverText) {\n        this.hoverText = options.hoverText\n      }\n\n      if (options.distance) {\n        this.distance = options.distance\n      }\n    }\n  }\n}\n\n/**\n * @public\n */\nexport type OnPointerHoverEnterUUIDEventOptions = {\n  distance?: number\n}\n\n/**\n * @public\n */\n@Component('engine.pointerHoverEnter', CLASS_ID.UUID_CALLBACK)\nexport class OnPointerHoverEnter extends OnPointerUUIDEvent<'pointerHoverEnter'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'pointerHoverEnter'\n\n  constructor(callback: (event: IEvents['pointerHoverEnter']) => void)\n  constructor(\n    callback: (event: IEvents['pointerHoverEnter']) => void,\n    options: OnPointerHoverEnterUUIDEventOptions\n  )\n  constructor(\n    callback: (event: IEvents['pointerHoverEnter']) => void,\n    options?: any\n  ) {\n    super(callback)\n    // This injection is necessary ONLY in events that are ALWAYS turned on and are\n    // not assignable to entities. Like events for the UI elements\n\n    // TODO(Brian): This will be removed when UI gets back to the entity parenting.\n    uuidEventSystem.handlerMap[this.uuid] = this\n\n    if (options) {\n      if (options.distance) {\n        this.distance = options.distance\n      }\n    }\n  }\n}\n\n/**\n * @public\n */\n@Component('engine.pointerHoverExit', CLASS_ID.UUID_CALLBACK)\nexport class OnPointerHoverExit extends OnPointerUUIDEvent<'pointerHoverExit'> {\n  @ObservableComponent.readonly\n  readonly type: string = 'pointerHoverExit'\n\n  constructor(callback: (event: IEvents['pointerHoverExit']) => void) {\n    super(callback)\n    // This injection is necessary ONLY in events that are ALWAYS turned on and are\n    // not assignable to entities. Like events for the UI elements\n\n    // TODO(Brian): This will be removed when UI gets back to the entity parenting.\n    uuidEventSystem.handlerMap[this.uuid] = this\n\n    // Changed default distance value for this component because in most cases we probably\n    // don't want for the hover exit event to be limited by a distance, and it default value was too small.\n    this.distance = 160\n  }\n}\n","import { ReadOnlyColor4 } from '@dcl/ecs-math'\n\nimport { WearableId } from '../decentraland/Types'\nimport { Component, ObservableComponent } from '../ecs/Component'\nimport { CLASS_ID } from './Components'\n\n/**\n * @public\n */\n@Component('engine.avatarShape', CLASS_ID.AVATAR_SHAPE)\nexport class AvatarShape extends ObservableComponent {\n  @ObservableComponent.field\n  id!: string\n\n  @ObservableComponent.field\n  name!: string\n\n  @ObservableComponent.field\n  expressionTriggerId!: string\n\n  @ObservableComponent.field\n  expressionTriggerTimestamp!: number\n\n  @ObservableComponent.field\n  bodyShape!: WearableId\n\n  @ObservableComponent.field\n  wearables!: WearableId[]\n\n  @ObservableComponent.field\n  skinColor!: ReadOnlyColor4\n\n  @ObservableComponent.field\n  hairColor!: ReadOnlyColor4\n\n  @ObservableComponent.field\n  eyeColor!: ReadOnlyColor4\n\n  @ObservableComponent.field\n  useDummyModel: boolean = false\n\n  @ObservableComponent.field\n  talking: boolean = false\n\n  public static Dummy(): AvatarShape {\n    const avatarShape = new AvatarShape()\n    avatarShape.useDummyModel = true\n    return avatarShape\n  }\n}\n","import { Observable, Observer } from '../ecs/Observable'\nimport { error } from '../ecs/helpers'\n\nlet communicationsController: ModuleDescriptor | null = null\nlet communicationsControllerPromise: PromiseLike<ModuleDescriptor> | null = null\n\nlet _messageObserver: null | Observable<IEvents['comms']> = null\n\n/**\n * @internal\n */\nexport function getMessageObserver() {\n  if (!_messageObserver) {\n    _messageObserver = new Observable<IEvents['comms']>()\n  }\n  return _messageObserver\n}\n\nfunction ensureCommunicationsController() {\n  if (!communicationsControllerPromise) {\n    communicationsControllerPromise = dcl.loadModule(\n      '@decentraland/CommunicationsController',\n      {}\n    )\n\n    void communicationsControllerPromise.then(($) => {\n      communicationsController = $\n    })\n\n    const observer = getMessageObserver()\n\n    dcl.subscribe('comms')\n    dcl.onEvent((event) => {\n      if (event.type === 'comms') {\n        observer.notifyObservers(event.data as any)\n      }\n    })\n  }\n  return communicationsControllerPromise\n}\n\n/**\n * @public\n */\nexport class MessageBus {\n  private messageQueue: string[] = []\n  private connected = false\n  private flushing = false\n\n  constructor() {\n    void ensureCommunicationsController().then(() => {\n      this.connected = true\n      this.flush()\n    })\n  }\n\n  on(\n    message: string,\n    callback: (value: any, sender: string) => void\n  ): Observer<IEvents['comms']> {\n    return getMessageObserver().add((e) => {\n      try {\n        const m = JSON.parse(e.message)\n\n        if (m.message === message) {\n          callback(m.payload, e.sender)\n        }\n      } catch (e) {\n        dcl.error(\n          'Error parsing comms message ' + ((e as Error).message || ''),\n          e\n        )\n      }\n    })!\n  }\n\n  // @internal\n  sendRaw(message: string) {\n    this.messageQueue.push(message)\n\n    if (this.connected) {\n      this.flush()\n    }\n  }\n\n  emit(message: string, payload: Record<any, any>) {\n    const messageToSend = JSON.stringify({ message, payload })\n    this.sendRaw(messageToSend)\n    getMessageObserver().notifyObservers({\n      message: messageToSend,\n      sender: 'self'\n    })\n  }\n\n  private flush() {\n    if (this.messageQueue.length === 0) return\n    if (!this.connected) return\n    if (!communicationsController) return\n    if (this.flushing) return\n\n    const message = this.messageQueue.shift()\n\n    this.flushing = true\n\n    dcl.callRpc(communicationsController.rpcHandle, 'send', [message]).then(\n      (_) => {\n        this.flushing = false\n        this.flush()\n      },\n      (e) => {\n        this.flushing = false\n        error('Error flushing MessageBus', e)\n      }\n    )\n  }\n}\n","// CORE DEPENDENCIES\nexport * from './ecs/Attachable'\nexport * from './ecs/Engine'\nexport * from './ecs/Component'\nexport * from './ecs/ComponentGroup'\nexport * from './ecs/Entity'\nexport * from './ecs/IEntity'\nexport * from './ecs/Task'\nexport * from './ecs/helpers'\nexport * from './ecs/Observable'\nexport * from './ecs/UIValue'\nexport * from './ecs/EventManager'\nexport * from './ecs/UserActions'\n\nimport { _initEventObservables } from './decentraland/Events'\nimport { DecentralandSynchronizationSystem } from './decentraland/Implementation'\n\n// ECS INITIALIZATION\nimport { Engine } from './ecs/Engine'\nimport { Entity } from './ecs/Entity'\n\nconst entity = new Entity('scene')\n;(entity as any).uuid = '0'\n\n// Initialize engine\n/** @public */\nconst engine = new Engine(entity)\n\nimport { DisposableComponent } from './ecs/Component'\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nDisposableComponent.engine = engine\n\n// Initialize Decentraland interface\nif (typeof dcl !== 'undefined') {\n  engine.addSystem(new DecentralandSynchronizationSystem(dcl), Infinity)\n  _initEventObservables(dcl)\n}\n\nimport {\n  uuidEventSystem,\n  pointerEventSystem,\n  raycastEventSystem\n} from './decentraland/Systems'\n\n// Initialize UUID Events system\nengine.addSystem(uuidEventSystem)\n// Initialize Pointer Events System\nengine.addSystem(pointerEventSystem)\n// Initialize Raycast Events System\nengine.addSystem(raycastEventSystem)\n\n// DECENTRALAND DEPENDENCIES\nexport * from './decentraland/Math'\nexport * from './decentraland/Types'\nexport * from './decentraland/Components'\nexport * from './decentraland/Systems'\nexport * from './decentraland/Events'\nexport * from './decentraland/Camera'\nexport * from './decentraland/AnimationState'\nexport * from './decentraland/Input'\nexport * from './decentraland/Audio'\nexport * from './decentraland/Gizmos'\nexport * from './decentraland/UIShapes'\nexport * from './decentraland/AvatarShape'\nexport * from './decentraland/UIEvents'\nexport * from './decentraland/MessageBus'\nexport * from './decentraland/PhysicsCast'\n\nexport { engine }\n"],"names":["Attachable","getEntityRepresentation","engine","avatarEntity","firstPersonCameraEntity","lastGeneratedId","log","_i","args","dcl","console","error","data","newId","type","length","Error","toString","uuid","replace","c","r","Math","random","eventNameSymbol","takenEventNames","getEventNameFromConstructor","ctor","this","EventManager","eventClass","listener","listenerFunction","eventName","listeners","i","push","fn","splice","event","constructor","l","call","e","EventConstructor","indexOf","target","UIValueType","entity","componentName","component","ComponentRemoved","classId","ComponentAdded","parent","ParentChanged","value","PIXELS","valueAsString","PERCENT","parseFloat","UIValue","result","componentSymbol","componentClassIdSymbol","componentIdSymbol","componentId","DisposableComponentCreated","DisposableComponentRemoved","DisposableComponentUpdated","Component","isComponent","TypeError","originalClassName","extendedClass","RegisteredComponent","Array","prototype","slice","arguments","ret","Object","defineProperty","enumerable","writable","configurable","undefined","DisposableComponent","isNaN","id","registerComponent","isDisposableComponent","getComponentName","getComponentClassId","getComponentId","ObservableComponent","propertyKey","componentSymbol_1","getOwnPropertyDescriptor","get","set","oldValue","dirty","subscriptions","finalValue","requires","_requiresNames","ix","name","this_1","some","$","ComponentGroup","isAddedToEngine","entities","removeEntity","components","Entity","removeComponent","addComponent","typeOfComponent","storedComponent","identifier","getComponentOrNull","addComponentOrReplace","eventManager","fireEvent","addedToEntity","triggerRemovedEvent","removedFromEntity","rootEntity","_parent","newParent","currentParent","getParent","circularAncestor","getCircularAncestor","children","addEntity","registerAsChild","ent","root","addListener","componentAddedHandler","componentRemovedHandler","Engine","_entities","_disposableComponents","checkRequirementsAndAdd","setParent","alive","child","componentGroups","_componentGroups","groupIndex","entityLists","simpleSystems","system","onRemoveEntity","priority","addedSystems","systems","entry","isLast","registerSystem","idx","active","deactivate","dt","update","onDispose","componentGroup","traversedComponentGroup","j","requiresNames","entityId","checkRequirements","activate","systemIndex","onAddEntity","meetsRequirements","hasEntity","_defer","Promise","resolve","then","bind","executeTask","task","isComplete","didFail","catch","modulePromise","mask","skipNextObservers","currentTarget","initalize","ObserverEventState","callback","scope","MultiObserver","observables","_observers","_observables","observables_1","__values","observer","add","index","remove","onObserverAdded","_eventState","_onObserverAdded","Observable","insertFirst","unregisterOnFirstCall","Observer","unregisterOnNextCall","unshift","_deferUnregister","eventData","state","lastReturnValue","_b","obs","_willBeUnregistered","apply","p","forEach","lastReturnedValue","_this","_remove","internalDcl","payload","UUIDEvent","RaycastResponse","PointerEvent","createSubscriber","subscribe","onCameraModeChangedObservable","onIdleStateChangedObservable","onEnterSceneObservable","onEnterScene","onLeaveSceneObservable","onLeaveScene","onSceneReadyObservable","onPlayerExpressionObservable","onPointerLockedStateChange","onVideoEvent","onProfileChanged","onPlayerConnectedObservable","onPlayerDisconnectedObservable","onRealmChangedObservable","onPlayerClickedObservable","_initEventObservables","onEvent","notifyObservers","videoData","disposableComponents","DecentralandSynchronizationSystem","componentAdded","componentRemoved","disposableComponentCreated","disposableComponentRemoved","disposableComponentUpdated","parentChanged","rootId","onUpdate","presentEntities","queryType","cachedComponents","attachEntityComponent","componentJson","JSON","stringify","updateEntityComponent","jsonRepresentation","getJsonIfDirty","clearDirty","componentUpdated","removeEntityComponent","componentCreated","componentDisposed","Orientation","Space","exports","PI","utils","size","itemBuilder","a","Scalar_1","Scalar","[object Object]","b","epsilon","num","str","toUpperCase","_value","min","max","LOG2E","floor","normalized","current","Repeat","tx","t","abs","from","to","Clamp","maxDelta","Sign","DeltaAngle","MoveTowards","start","end","amount","value1","tangent1","value2","tangent2","squared","cubed","percent","angle","TwoPi","Vector4_1","types_1","require$$0","require$$1","Vector3_1","require$$2","Vector4","x","y","z","w","vector1","vector2","addInPlace","array","offset","FromArrayToRef","vector","Zero","NormalizeToRef","copyFrom","normalize","left","right","minimizeInPlace","maximizeInPlace","sqrt","DistanceSquared","center","Add","scaleInPlace","transformation","TransformNormalToRef","m","hash","toArray","otherVector","scale","Epsilon","WithinEpsilon","divideToRef","other","len","Vector3","source","copyFromFloats","v","Matrix_1","Quaternion_1","preallocatedVariables_1","require$$3","Matrix","_isIdentity","_isIdentityDirty","_isIdentity3x2","_isIdentity3x2Dirty","_m","_updateIdentityStatus","IdentityReadOnly","_identityReadOnly","_markAsUpdated","initialM11","initialM12","initialM13","initialM14","initialM21","initialM22","initialM23","initialM24","initialM31","initialM32","initialM33","initialM34","initialM41","initialM42","initialM43","initialM44","rotation","translation","ComposeToRef","ScalingToRef","MathTmp","toRotationMatrix","multiplyToRef","setTranslation","identity","FromValues","FromValuesToRef","zero","RotationXToRef","invertToRef","s","sin","cos","RotationYToRef","RotationZToRef","axis","RotationAxisToRef","c1","yaw","pitch","roll","RotationYawPitchRollToRef","Quaternion","TranslationToRef","startValue","endValue","gradient","LerpToRef","DecomposeLerpToRef","startScale","startRotation","startTranslation","decompose","endScale","endRotation","endTranslation","resultScale","resultRotation","SlerpToRef","resultTranslation","eye","up","LookAtLHToRef","xAxis","yAxis","zAxis","subtractToRef","CrossToRef","xSquareLength","lengthSquared","normalizeFromLength","ex","Dot","ey","ez","LookAtRHToRef","width","height","znear","zfar","matrix","OrthoLHToRef","d","bottom","top","OrthoOffCenterLHToRef","i0","i1","OrthoOffCenterRHToRef","fov","aspect","PerspectiveFovLHToRef","isVerticalFovFixed","n","f","tan","PerspectiveFovRHToRef","rightHanded","rightHandedFactor","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","TransposeToRef","rm","mm","plane","ReflectionToRef","normal","temp","temp2","temp3","xaxis","yaxis","zaxis","quat","xx","yy","zz","xy","zw","zx","yw","yz","xw","updateFlag","_updateFlagSeed","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","det_22_33","det_21_33","det_21_32","det_20_33","det_20_32","det_20_31","addToRef","IdentityToRef","cofact_00","cofact_01","cofact_02","cofact_03","det","detInv","det_12_33","det_11_33","det_11_32","det_10_33","det_10_32","det_10_31","det_12_23","det_11_23","det_11_22","det_10_23","det_10_22","det_10_21","cofact_10","cofact_11","cofact_12","cofact_13","cofact_20","cofact_21","cofact_22","cofact_23","cofact_30","cofact_31","cofact_32","cofact_33","vector3","setTranslationFromFloats","copyToArray","o","multiplyToArray","otherM","tm0","tm1","tm2","tm3","tm4","tm5","tm6","tm7","tm8","tm9","tm10","tm11","tm12","tm13","tm14","tm15","om0","om1","om2","om3","om4","om5","om6","om7","om8","om9","om10","om11","om12","om13","om14","om15","om","setAll","usedScale","determinant","sx","sy","sz","FromRotationMatrixToRef","row","setRowFromFloats","Transpose","scaleToRef","ref","tmp","transposeToRef","getRotationMatrixToRef","isIdentity","isIdentityDirty","isIdentity3x2","isIdentity3x2Dirty","Identity","require$$4","trace","quat0","quat1","q","quaternion","angleRad","DEG2RAD","halfPitch","halfYaw","halfRoll","c2","c3","s1","s2","s3","alpha","beta","gamma","RotationAlphaBetaGammaToRef","halfGammaPlusAlpha","halfGammaMinusAlpha","halfBeta","axis1","axis2","axis3","RotationQuaternionFromAxisToRef","rotMat","FromXYZAxesToRef","num2","num3","num4","flag","num5","acos","num6","part1","part2","part3","part4","quat2","dot","RAD2DEG","RotationYawPitchRoll","forward","staticUp","forwardNew","Normalize","Cross","upNew","num8","num7","maxDegreesDelta","Angle","Slerp","v0","v1","FromToRotation","eulerAngles","euler","setEuler","out","unit","test","atan2","asin","otherQuaternion","q1","degress","radians","a2","FromQuaternionToRef","isNonUniform","absX","absY","absZ","vector0","d0","normalizeToRef","FromArray","TransformCoordinatesToRef","TransformCoordinatesFromFloatsToRef","rx","ry","rz","rw","TransformNormalFromFloatsToRef","value3","value4","ClampToRef","RotationFromAxisToRef","addInPlaceFromFloats","subtractFromFloatsToRef","applyMatrix4ToRef","rotateToRef","qx","qy","qz","qw","iy","iz","iw","multiplyByFloats","minimizeInPlaceFromFloats","maximizeInPlaceFromFloats","reference","preallocatedVariables","utils_1","buildArray","Up","tmpMatrix","Angle_1","_radians","delta","subtract","theta","degrees","Vector2_1","Vector2","newVector","TransformToRef","p0","p1","p2","sign","segA","segB","l2","Distance","proj","Arc2_1","startPoint","midPoint","endPoint","pow","startToMid","midToEnd","centerPoint","radius","startAngle","BetweenTwoPoints","a1","a3","orientation","CW","CCW","FromDegrees","Axis_1","Axis","X","Y","Z","BezierCurve_1","x1","y1","x2","y2","f0","f1","f2","refinedT","refinedT2","Color4_1","Color4","g","hex","substring","parseInt","FromInts","color3","colors","count","colors4","newIndex","color","intR","intG","intB","intA","ToHex","convertedColor","toLinearSpaceToRef","ToLinearSpace","toGammaSpaceToRef","ToGammaSpace","Color3_1","Color3","otherColor","Curve3d","Curve3","points","_length","_points","_computeLength","v2","nbPoints","bez","equation","val0","val1","val2","v3","val3","t1","t2","hermite","step","Hermite","closed","catmullRom","pointsCount","CatmullRom","totalPoints","clone","curve","lastPoint","continuedPoints","curvePoints","getPoints","path","Plane_1","Plane","point1","point2","point3","copyFromPoints","origin","point","getHashCode","norm","magnitude","transposedMatrix","normalX","normalY","normalZ","finalD","z1","z2","xz","pyth","invPyth","direction","Furstum","Frustum","transform","frustumPlanes","GetPlanesToRef","frustumPlane","GetNearPlaneToRef","GetFarPlaneToRef","GetLeftPlaneToRef","GetRightPlaneToRef","GetTopPlaneToRef","GetBottomPlaneToRef","Path2d","Path2","newPoint","previousPoint","midX","midY","endX","endY","numberOfSegments","arc","Arc2","increment","currentAngle","addLineTo","normalizedLengthPosition","lengthPosition","previousOffset","bToA","nextOffset","dir","localOffset","Path3d","firstNormal","raw","_curve","_distances","_tangents","_normals","_binormals","_raw","_compute","_getFirstNonNullVector","tg0","pp0","_normalVector","prev","cur","curTang","prevBinor","_getLastNonNullVector","nNVector","nLVector","vt","va","normal0","tgl","Size_1","Size","surface","h","src","otherSize","__createBinding","create","k","k2","__exportStar","hasOwnProperty","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","require$$17","require$$18","require$$19","require$$20","InputEventType","CameraMode","defaultParams","looping","speed","weight","layer","clip","params","_super","setParams","__extends","AnimationState","parse","toJSON","shouldReset","reset","owner","play","pause","stop","__decorate","readonly","field","LandRole","ActionButton","CLASS_ID","AvatarModifiers","Input","ensureInstance","GlobalPointerDown","PointerEventComponent","GlobalPointerUp","useRaycast","POINTER","PRIMARY","SECONDARY","ANY","FORWARD","BACKWARD","RIGHT","LEFT","JUMP","WALK","ACTION_3","ACTION_4","ACTION_5","ACTION_6","buttonIdMapping","reduce","acc","BUTTON_DOWN","BUTTON_UP","_instance","buttonId","internalState","Subscription","unsubscribe","getSubscriptionId","button","getPointerById","eventResult","hit","hitPoint","worldNormal","DOWN","subscription","handler","actionButton","AttachToAvatarAnchorPointId","area","modifiers","excludeIds","AvatarModifierArea","AVATAR_MODIFIER_AREA","position","Transform","worldUp","invert","multiplyInPlace","angleAxis","vec","TRANSFORM","PictureFrameStyle","avatarId","anchorPointId","Position","AttachToAvatar","AVATAR_ATTACH","Billboard","BILLBOARD","BoxShape","BOX_SHAPE","Shape","SphereShape","SPHERE_SHAPE","CircleShape","CIRCLE_SHAPE","PlaneShape","PLANE_SHAPE","ConeShape","CONE_SHAPE","CylinderShape","CYLINDER_SHAPE","GLTFShape","GLTF_SHAPE","Fonts","style","Classic","NFTShape","NFT_SHAPE","opts","base64Test","RegExp","Texture","TEXTURE","Animator","states","onChange","clipName","newClip","addClip","playing","animationState","nonce","ANIMATION","OBJShape","OBJ_SHAPE","Font","FONT","TransparencyMode","TextShape","TEXT_SHAPE","VideoStatus","AUTO","Material","PBR_MATERIAL","BasicMaterial","BASIC_MATERIAL","OnUUIDEvent","OnPointerUUIDEvent","hoverText","distance","showFeedback","OnPointerLock","UUID_CALLBACK","OnAnimationEnd","SmartItem","SMART_ITEM","url","VideoClip","VIDEO_CLIP","QueryPrefix","videoClip","NONE","videoClipId","VideoTexture","seekTime","seconds","seek","videoEvent","_status","videoStatus","_videoLength","totalVideoLength","_position","currentOffset","VIDEO_TEXTURE","cameraMode","CameraModeArea","CAMERA_MODE_AREA","userId","AvatarTexture","AVATAR_TEXTURE","ThirdPerson","positionChanged","rotationChanged","cameraModeChanged","lastEventPosition","worldPosition","lastEventWorldPosition","feetPosition","playerHeight","lastEventRotation","Camera","_playerHeight","_cameraMode","cameraPosition","Gizmo","PhysicsCast","instance","rotationMat","TransformCoordinates","Forward","ray","hitCallback","queryId","HitFirst","queries","query","HitAll","_ray","_hitCallback","response","RaycastEventSystem","handleRaycastHitFirstResponse","handleRaycastHitAllResponse","PointerEventSystem","handlePointerEvent","UUIDEventSystem","handleEvent","handlerMap","raycastEventSystem","pointerEventSystem","uuidEventSystem","AudioClip","AUDIO_CLIP","audioClip","Date","now","audioClipId","AudioSource","playedAtTimestamp","AUDIO_SOURCE","AudioStream","AUDIO_STREAM","UIStackOrientation","OnGizmoEvent","Gizmos","GIZMOS","OnFocus","OnTextSubmit","OnBlur","OnEnter","OnChanged","options","OnClick","OnPointerDown","OnPointerUp","OnPointerHoverEnter","OnPointerHoverExit","parentComponent","UIShape","uiValue","UIFullScreen","UI_FULLSCREEN_SHAPE","UIWorldSpace","UI_WORLD_SPACE_SHAPE","UICanvas","UI_SCREEN_SPACE_SHAPE","Clear","UIContainerRect","UI_CONTAINER_RECT","VERTICAL","UIContainerStack","UI_CONTAINER_STACK","White","Black","UIButton","UI_BUTTON_SHAPE","UIText","UI_TEXT_SHAPE","onTextChanged","_a","isSubmit","isDirty","onTextSubmit","onSubmitValue","text","onChanged","onChangeValue","pointerId","uuidEvent","UIInputText","UI_INPUT_TEXT_SHAPE","UIImage","UI_IMAGE_SHAPE","UIScrollRect","UI_SLIDER_SHAPE","AvatarShape","avatarShape","AvatarShape_1","useDummyModel","AVATAR_SHAPE","communicationsController","communicationsControllerPromise","_messageObserver","getMessageObserver","loadModule","observer_1","ensureCommunicationsController","connected","flush","MessageBus","message","sender","messageQueue","messageToSend","sendRaw","flushing","shift","callRpc","rpcHandle","_","addSystem","Infinity","openExternalUrl","scr","comment","matches","match","openNFTDialog","destination","methodName"],"mappings":"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"}